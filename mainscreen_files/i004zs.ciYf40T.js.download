(this.$WP=this.$WP||[]).push(["i004zs",(e,t)=>{var i,a,r,s,n,o,l,u,h,c,d,p,b,g,f,m,v,w,x,y,C,E,S,k,A,N,T,_,I,O,D,B,M,R,z,U,P,F,L,$,q,G,j,X,H,K,V,J,W,Y,Z,Q,ee,et,ei,ea,er,es,en,eo,el,eu,eh,ec,ed,ep,eb,eg,ef,em,ev,ew,ex,ey,eC,eE,eS,ek,eA,eN,eT,e_,eI,eO,eD,eB,eM,eR,ez,eU,eP,eF={init:function(e){void 0===e&&void 0!==eF.zg||(eF.zg=!!e),eF.l||(eF.l=!0)},destroy:function(){eF.l=!1,eF.zg=void 0,eF.vd=void 0},setLogger:function(e){"function"==typeof e?(eF.init(),eF.vd=e):eF.info("Ignoring setLogger call since logger is not a function")},toggleLogging:function(){eF.init(),eF.zg?eF.zg=!1:eF.zg=!0},info:function(e){if(eF.zg){var t="Braze: "+e;null!=eF.vd?eF.vd(t):console.log(t)}},warn:function(e){if(eF.zg){var t="Braze SDK Warning: "+e+" (v5.8.1)";null!=eF.vd?eF.vd(t):console.warn(t)}},error:function(e){if(eF.zg){var t="Braze SDK Error: "+e+" (v5.8.1)";null!=eF.vd?eF.vd(t):console.error(t)}}},eL={Vn:function(e){for(var t=atob((e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/")),i=new Uint8Array(t.length),a=0;a<t.length;++a)i[a]=t.charCodeAt(a);return i}},e$={CustomEvent:"ce",Pr:"p",fc:"pc",Cu:"i",bu:"ie",ss:"cci",os:"ccic",Mt:"ccc",Wt:"ccd",Bl:"ss",Dl:"se",Li:"si",Qi:"sc",Vi:"sbc",Eo:"iec",mc:"lr",dc:"uae",ns:"ci",Ot:"cc",wc:"lcaa",bc:"lcar",Gn:"inc",Rn:"add",On:"rem",$n:"set",Bn:"ncam",kc:"sgu",yr:"ffi",ro:"bi",ct:"bc"},eq={Fr:"feed_displayed"},eG={ce:function(){var e=(e=!1)=>{var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t};return e()+e(!0)+e(!0)+e()}},ej={Yo:"allowCrawlerActivity",Zo:"baseUrl",Wh:"noCookies",Vh:"devicePropertyAllowlist",Da:"disablePushTokenMaintenance",Kh:"enableLogging",$h:"enableSdkAuthentication",Ca:"manageServiceWorkerExternally",Yh:"minimumIntervalBetweenTriggerActionsInSeconds",Xh:"sessionTimeoutInSeconds",Zh:"appVersion",Qh:"appVersionNumber",_a:"serviceWorkerLocation",Ba:"safariWebsitePushId",Xn:"localization",er:"contentSecurityNonce",re:"allowUserSuppliedJavascript",No:"inAppMessageZIndex",Ko:"openInAppMessagesInNewTab",en:"openNewsFeedCardsInNewTab",mh:"requireExplicitInAppMessageDismissal",Ea:"doNotLoadFontAwesome",Ia:"deviceId",Aa:"serviceWorkerScope",Na:"sdkFlavor",tn:"openCardsInNewTab"};function eX(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&void 0!==e[i]&&t.push(e[i]);return t}function eH(e,t,i,a){var r=eX(e);return -1!==r.indexOf(t)||(eo.error(`${i} Valid values from ${a} are "${r.join('"/"')}".`),!1)}function eK(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function eV(e){return"[object Date]"===Object.prototype.toString.call(e)}function eJ(e){return"[object Object]"===Object.prototype.toString.call(e)}function eW(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t}function eY(e,t){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;var i=e.toString();if(i!==t.toString())return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var r=e.constructor,s=t.constructor;if(r!==s&&!("function"==typeof r&&r instanceof r&&"function"==typeof s&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}for(var n=[],o=[],l=n.length;l--;)if(n[l]===e)return o[l]===t;if(n.push(e),o.push(t),a){if((l=e.length)!==t.length)return!1;for(;l--;)if(!eY(e[l],t[l]))return!1}else{var u,h=eW(e);if(l=h.length,eW(t).length!==l)return!1;for(;l--;)if(u=h[l],!Object.prototype.hasOwnProperty.call(t,u)||!eY(e[u],t[u]))return!1}return n.pop(),o.pop(),!0}function eZ(e,t=!1){var i=e/1e3;return t&&(i=Math.floor(i)),i}function eQ(e){if(null==e)return null;var t=parseInt(e.toString());return isNaN(t)?null:new Date(1e3*t)}function e0(e){return null!=e&&eV(e)?e.toISOString().replace(/\.[0-9]{3}Z$/,""):e}function e1(e){return null==e||""===e?null:new Date(e)}function e3(e){return(new Date().valueOf()-e.valueOf())/1e3}function e5(e){return(e.valueOf()-new Date().valueOf())/1e3}var e2="inAppMessage must be an InAppMessage object",e4="must be a Card object",e8="setCustomUserAttribute",e7="Braze must be initialized before calling methods.",e6="data-update-subscription-id";function e9(e){var t,i=null==e?void 0:e.ft(ty.gt._E);return i&&(t={label:i.l,name:i.a}),t}var te=e=>e instanceof Error?e.message:String(e);function tt(e){for(var t=e.length,i=e.length-1;i>=0;i--){var a=e.charCodeAt(i);a>127&&a<=2047?t++:a>2047&&a<=65535&&(t+=2),a>=56320&&a<=57343&&i--}return t}var ti={types:{io:"container",logCustomEvent:"logCustomEvent",setEmailNotificationSubscriptionType:"setEmailNotificationSubscriptionType",setPushNotificationSubscriptionType:"setPushNotificationSubscriptionType",setCustomUserAttribute:"setCustomUserAttribute",requestPushPermission:"requestPushPermission",addToSubscriptionGroup:"addToSubscriptionGroup",removeFromSubscriptionGroup:"removeFromSubscriptionGroup",addToCustomAttributeArray:"addToCustomAttributeArray",removeFromCustomAttributeArray:"removeFromCustomAttributeArray",co:"openLink",mo:"openLinkInWebView"},properties:{type:"type",eo:"steps",so:"args"}},ta={Tr:"unknownBrazeAction",Br:"noPushPrompt"},tr=(e,t)=>{switch(e){case ta.Tr:return`${t} contains an unknown braze action type and will not be displayed.`;case ta.Br:return`${t} contains a push prompt braze action, but is not eligible for a push prompt. Ignoring.`;default:return""}};function ts(e){try{var t=e.match(tc),i=t?t[0].length:null,a=i?e.substring(i):null;if(null==i||i>e.length-1||!a)return void eo.error(`Did not find base64 encoded brazeAction in url to process : ${e}`);var r=function(e){try{e=e.replace(/-/g,"+").replace(/_/g,"/");for(var t=window.atob(e),i=new Uint8Array(t.length),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);var r=new Uint16Array(i.buffer);return String.fromCharCode(...r)}catch(e){return eo.error("Unable to decode Base64: "+e),null}}(a);return r?JSON.parse(r):void eo.error(`Failed to decode base64 encoded brazeAction: ${a}`)}catch(t){return void eo.error(`Failed to process brazeAction URL ${e} : ${te(t)}`)}}function tn(e,t){var i=!1;if(t){for(var a of t)if(i=i||e(a))return!0}return!1}function to(e){var t=ti.properties.type,i=ti.properties.eo;try{if(null==e)return!0;var a,r=e[t];return r===ti.types.io?tn(to,e[i]):(a=!1,Object.keys(ti.types).forEach(e=>{ti.types[e]!==r.toString()||(a=!0)}),!a)}catch(e){return!0}}var tl=/^[^\x00-\x1F\x22]+$/,tu=/[$.]/,th=["$add","$update","$remove","$identifier_key","$identifier_value","$new_object","$time","$google_ad_personalization","$google_ad_user_data"],tc=/^brazeActions:\/\/v\d+\//,td=/^[^\s]+$/;function tp(e,t,i){var a=null!=e&&"string"==typeof e&&(""===e||null!=e.match(tl));return a||eo.error(`Cannot ${t} because ${i} "${e}" is invalid.`),a}function tb(e){return null!=e&&e.match(tu)&&-1===th.indexOf(e)&&eo.warn("Custom attribute keys cannot contain '$' or '.'"),tp(e,"set custom user attribute","the given key")}function tg(e){var t=typeof e;return null==e||"number"===t||"boolean"===t||eV(e)||"string"===t}function tf(e,t,i,a=!1){var r="string"==typeof e||null===e&&a;return r||eo.error(`Cannot ${t} because ${i} "${e}" is invalid.`),r}function tm(e,t,i,a,r){if(null==e&&(e={}),"object"!=typeof e||eK(e))return eo.error(`${t} requires that ${i} be an object. Ignoring ${r}.`),[!1,null];t===e8?(s=76800,n="75KB"):(s=51200,n="50KB");var s,n,o,l=JSON.stringify(e);if(tt(l)>s)return eo.error(`Could not ${a} because ${i} was greater than the max size of ${n}.`),[!1,null];try{o=JSON.parse(l)}catch(e){return eo.error(`Could not ${a} because ${i} did not contain valid JSON.`),[!1,null]}for(var u in e){if(t===e8&&!tb(u)||!tp(u,a,`the ${r} property name`))return[!1,null];var h=e[u];if(t!==e8&&null==h){delete e[u],delete o[u];continue}if(eV(h)&&(o[u]=e0(h)),!function(e,t,i,a,r){var s;return(s=eJ(e)||eK(e)?function e(t,i,a){var r=-1!==a;if(r&&a>50)return eo.error("Nested attributes cannot be more than 50 levels deep."),!1;var s=r?a+1:-1;if(eK(t)&&eK(i)){for(var n=0;n<t.length&&n<i.length;n++)if(eV(t[n])&&(i[n]=e0(t[n])),!e(t[n],i[n],s))return!1}else{if(!eJ(t))return tg(t);for(var o of eW(t)){var l=t[o];if(r&&!tb(o)||(eV(l)&&(i[o]=e0(l)),!e(l,i[o],s)))return!1}}return!0}(e,t,r?1:-1):tg(e))||eo.error(`Cannot ${i} because ${a} "${e}" is invalid.`),s}(h,o[u],a,`the ${r} property "${u}"`,t===e8))return[!1,null]}return[!0,o]}function tv(e){if(!(ti.properties.type in e))return!1;switch(e[ti.properties.type]){case ti.types.io:if(ti.properties.eo in e)return!0;break;case ti.types.logCustomEvent:case ti.types.setEmailNotificationSubscriptionType:case ti.types.setPushNotificationSubscriptionType:case ti.types.setCustomUserAttribute:case ti.types.addToSubscriptionGroup:case ti.types.removeFromSubscriptionGroup:case ti.types.addToCustomAttributeArray:case ti.types.removeFromCustomAttributeArray:case ti.types.co:case ti.types.mo:if(ti.properties.so in e)return!0;break;case ti.types.requestPushPermission:return!0}return!1}var tw={rO:"Chrome",eO:"Edge",oO:"Opera",Bg:"Safari",OO:"Firefox"},tx={xg:"Android",ao:"iOS",Pg:"Mac",Og:"Windows"},ty={iu:{su:"ab.storage.userId",Ia:"ab.storage.deviceId",Nl:"ab.storage.sessionId"},gt:{ac:"ab.test",tE:"ab.storage.events",eE:"ab.storage.attributes",sE:"ab.storage.attributes.anonymous_user",ic:"ab.storage.device",vu:"ab.storage.sdk_metadata",pu:"ab.storage.session_id_for_cached_metadata",qn:"ab.storage.pushToken",qi:"ab.storage.newsFeed",zi:"ab.storage.lastNewsFeedRefresh",Zt:"ab.storage.cardImpressions",cl:"ab.storage.serverConfig",rE:"ab.storage.triggers",oE:"ab.storage.triggers.ts",Hl:"ab.storage.messagingSessionStart",Is:"ab.storage.cc",Qs:"ab.storage.ccLastFullSync",Vs:"ab.storage.ccLastCardUpdated",xu:"ab.storage.globalRateLimitCurrentTokenCount",Gu:"ab.storage.dynamicRateLimitCurrentTokenCount",Kt:"ab.storage.ccClicks",Yt:"ab.storage.ccImpressions",Vt:"ab.storage.ccDismissals",nE:"ab.storage.lastDisplayedTriggerTimesById",aE:"ab.storage.lastDisplayedTriggerTime",iE:"ab.storage.triggerFireInstancesById",xh:"ab.storage.signature",EE:"ab.storage.brazeSyncRetryCount",fi:"ab.storage.sdkVersion",Xe:"ab.storage.ff",Ge:"ab.storage.ffImpressions",Ze:"ab.storage.ffLastRefreshAt",Ve:"ab.storage.ff.sessionId",lE:"ab.storage.lastReqToEndpoint",SE:"ab.storage.requestAttempts",Lr:"ab.storage.deferredIam",Eu:"ab.storage.lastSdkReq",_E:"ab.storage.alias",vt:"ab.storage.banners",kt:"ab.storage.banners.impressions",yt:"ab.storage.banners.sessionId"},me:"ab.optOut"},tC={BROWSER:"browser",BROWSER_VERSION:"browserVersion",OS:"os",RESOLUTION:"resolution",LANGUAGE:"language",TIME_ZONE:"timeZone",USER_AGENT:"userAgent"},tE={Au:"invalid_api_key",Du:"blacklisted",ku:"no_device_identifier",qu:"invalid_json_response",gu:"empty_response"},tS={O:{Nu:"data",gi:"content_cards/sync",Le:"feature_flags/sync",Gr:"template",K:"banners/sync"},Qu:e=>null==e?void 0:e.ft(ty.gt.lE),sm:e=>null==e?void 0:e.ft(ty.gt.SE),nm:(e,t)=>{null==e||e.Bt(ty.gt.lE,t)},rm:(e,t)=>{null==e||e.Bt(ty.gt.SE,t)},Bu:(e,t)=>{if(!e||!t)return -1;var i=tS.Qu(e);if(null==i)return -1;var a=i[t];return null==a||isNaN(a)?-1:a},zu:(e,t)=>{var i=1;if(!e||!t)return i;var a=tS.sm(e);return null==a?i:null==(i=a[t])||isNaN(i)?1:i},W:(e,t,i)=>{if(e&&t){var a=tS.Qu(e);null==a&&(a={}),a[t]=i,tS.nm(e,a)}},ju:(e,t,i)=>{if(e&&t){var a=tS.sm(e);null==a&&(a={}),a[t]=i,tS.rm(e,a)}},wi:(e,t)=>{e&&t&&tS.ju(e,t,1)},Pu:(e,t)=>{if(e&&t){var i=tS.zu(e,t);tS.ju(e,t,i+1)}}},tk={Y:e=>{var t,i;try{var a=!1;if(window.XMLHttpRequest&&(a=!0),!a)return void eo.error("This browser does not have any supported ajax options!");t=new XMLHttpRequest;var r=i=>{"function"==typeof e.error&&e.error(t.status),"function"==typeof e.nt&&e.nt(!1,i)};for(var s of(t.onload=()=>{var i,a=!1;if(4===t.readyState){a=t.status>=200&&t.status<300||304===t.status;var s=t.getAllResponseHeaders();if(a){if("function"==typeof e.tt){try{i=JSON.parse(t.responseText)}catch(i){var n={error:""===t.responseText?tE.gu:tE.qu,response:t.responseText};(0,e.tt)(n,s)}i&&e.tt(i,s)}"function"==typeof e.nt&&e.nt(!0,s)}else r(s)}},t.onerror=()=>{r(t.getAllResponseHeaders())},t.ontimeout=()=>{r()},i=JSON.stringify(e.data),t.open("POST",e.url,!0),t.setRequestHeader("Content-type","application/json"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.headers||[]))t.setRequestHeader(s[0],s[1]);t.send(i)}catch(e){eo.error(`Network request error: ${te(e)}`)}}},tA=e=>{var t,i,a={},r=e.toString().split("\r\n");if(!r)return a;for(var s of r)s&&(t=s.slice(0,s.indexOf(":")).toLowerCase().trim(),i=s.slice(s.indexOf(":")+1).trim(),a[t]=i);return a},tN=(e,t)=>(e=Math.ceil(e),Math.floor(Math.random()*((t=Math.floor(t))-e+1))+e),tT={yn:()=>"serviceWorker"in navigator&&"undefined"!=typeof ServiceWorkerRegistration&&"showNotification"in ServiceWorkerRegistration.prototype&&"PushManager"in window,gn:()=>"safari"in window&&"pushNotification"in window.safari&&"function"==typeof window.safari.pushNotification.permission&&"function"==typeof window.safari.pushNotification.requestPermission,isPushSupported:()=>tT.yn()||tT.gn(),isPushBlocked:()=>{var e=tT.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"denied"===window.Notification.permission,t=tT.isPushSupported()&&(!("Notification"in window)||null==window.Notification);return e||t},isPushPermissionGranted:()=>tT.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"granted"===window.Notification.permission,wr:()=>!tT.isPushBlocked()&&tT.isPushSupported()&&!tT.isPushPermissionGranted()},t_={Ja:function(e,t=!1){var i,a=!1;try{if(localStorage&&localStorage.getItem)try{localStorage.setItem(ty.gt.ac,"true"),localStorage.getItem(ty.gt.ac)&&(localStorage.removeItem(ty.gt.ac),a=!0)}catch(e){if(!(e instanceof Error&&("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&localStorage.length>0))throw e;a=!0}}catch(e){eo.info("Local Storage not supported!")}var r=t_.nc(),s=new f.cc(e,r&&!t,a);return i=a?new f.lc(e):new f.gc,new f(s,i)},nc:function(){return navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)}};function tI(e,t=!1,i=!1,a=!1){if(null==e)return!1;t=t||!1,i=i||!1;var r=e.getBoundingClientRect();return null!=r&&(r.top>=0&&r.top<=(window.innerHeight||document.documentElement.clientHeight)||!t)&&(r.left>=0||!a)&&(r.bottom>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)||!i)&&(r.right<=(window.innerWidth||document.documentElement.clientWidth)||!a)}var tO={To:"up",qo:"down",ie:"left",de:"right"};function tD(){if(null==ef.Ic){ef.Ic=!1;try{var e=Object.defineProperty({},"passive",{get:()=>{ef.Ic=!0}});window.addEventListener("testPassive",()=>{},e),window.removeEventListener("testPassive",()=>{},e)}catch(e){eo.error(te(e))}}return ef.Ic}function tB(e,t,i=()=>{}){e.addEventListener(t,i,!!tD()&&{passive:!0})}function tM(e){return ef.Ho(e,!0,!1,!1)}function tR(e){return ef.Ho(e,!1,!0,!1)}function tz(e){if(e.onclick){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),e.onclick.apply(e,[t])}}function tU(e,t,i){var a=null,r=null;tB(e,"touchstart",e=>{a=e.touches[0].clientX,r=e.touches[0].clientY}),tB(e,"touchmove",s=>{if(null!=a&&null!=r){var n=a-s.touches[0].clientX,o=r-s.touches[0].clientY;Math.abs(n)>Math.abs(o)&&Math.abs(n)>=25?((n>0&&t===tO.ie||n<0&&t===tO.de)&&i(s),a=null,r=null):Math.abs(o)>=25&&((o>0&&t===tO.To&&e.scrollTop===e.scrollHeight-e.offsetHeight||o<0&&t===tO.qo&&0===e.scrollTop)&&i(s),a=null,r=null)}})}function tP(e,t,i){var a="http://www.w3.org/2000/svg",r=document.createElementNS(a,"svg");r.setAttribute("viewBox",e),r.setAttribute("xmlns",a);var s=document.createElementNS(a,"path");return s.setAttribute("d",t),null!=i&&s.setAttribute("fill",i),r.appendChild(s),r}var tF={Wo:32,yo:9,Xo:13,_h:27},tL=e=>null!==e&&"IFRAME"===e.tagName;function t$(e){if(!e)return null;if(e.is_control)return N.fromJson(e);var t,i=e.type;null!=i&&(i=i.toUpperCase());var a=e.message,r=e.text_align_message,s=e.slide_from,n=e.extras,o=e.trigger_id,l=e.click_action,u=e.uri,h=e.open_target,c=e.message_close,d=e.duration,p=e.icon,b=e.image_url,g=e.image_style,f=e.icon_color,m=e.icon_bg_color,v=e.bg_color,w=e.text_color,x=e.close_btn_color,y=e.header,C=e.text_align_header,E=e.header_text_color,S=e.frame_color,k=[],A=e.btns;null==A&&(A=[]);for(var M=0;M<A.length;M++)k.push(I.fromJson(A[M]));var R=e.crop_type,z=e.orientation,U=e.animate_in,P=e.animate_out,F=e.html_id,L=e.css;null!=F&&""!==F&&null!=L&&""!==L||(F=void 0,L=void 0);var $=e.message_extras;if(i===D.ds||i===T.po.Ao)t=new D(a,r,n,o,l,u,h,c,d,p,b,g,f,m,v,w,x,U,P,y,C,E,S,k,R,F,L,$);else if(i===O.ds)t=new O(a,r,n,o,l,u,h,c,d,p,b,g,f,m,v,w,x,U,P,y,C,E,S,k,R,z,F,L,$);else if(i===B.ds)t=new B(a,r,s,n,o,l,u,h,c,d,p,b,f,m,v,w,x,U,P,F,L,$);else{if(i!==_.ds&&i!==T.po.fo&&i!==T.po.Fo)return void eo.error("Ignoring message with unknown type "+i);var q=e.message_fields;(t=new _(a,n,o,c,d,U,P,S,F,L,q,$)).trusted=e.trusted||!1}return t.uo=i,t}function tq(e){var t=[];for(var i of e)t.push(new I(i.text,i.backgroundColor,i.textColor,i.borderColor,i.clickAction,i.uri,i.id));return t}var tG={OPEN:"open",Rr:"purchase",hr:"push_click",Ee:"custom_event",Bo:"iam_click",Bs:"test"};function tj(e,t,i){var a=e||document.querySelector("head"),r=`ab-${t}-css-definitions-${"5.8.1".replace(/\./g,"-")}`;if(a){var s=a.ownerDocument||document;if(null==s.getElementById(r)){var n=s.createElement("style");n.innerHTML=i||"",n.id=r;var o=ey.ee(ig.er);null!=o&&n.setAttribute("nonce",o),a.appendChild(n)}}}function tX(){if(!ey.ee(ig.Ea)){var e="https://use.fontawesome.com/7f85a56ba4.css";if(!(null!==document.querySelector('link[rel=stylesheet][href="'+e+'"]'))){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(t)}}}function tH(){tj(void 0,"feed","body>.ab-feed{position:fixed;top:0;right:0;bottom:0;width:421px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}body>.ab-feed .ab-feed-body{position:absolute;top:0;left:0;right:0;border:none;border-left:1px solid #d0d0d0;padding-top:70px;min-height:100%}body>.ab-feed .ab-initial-spinner{float:none}body>.ab-feed .ab-no-cards-message{position:absolute;width:100%;margin-left:-20px;top:40%}.ab-feed{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);-moz-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);box-shadow:0 1px 7px 1px rgba(66,82,113,.15);width:402px;background-color:#eee;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;font-size:13px;line-height:130%;letter-spacing:normal;overflow-y:auto;overflow-x:visible;z-index:9011;-webkit-overflow-scrolling:touch}.ab-feed :focus,.ab-feed:focus{outline:0}.ab-feed .ab-feed-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border:1px solid #d0d0d0;border-top:none;padding:20px 20px 0 20px}.ab-feed.ab-effect-slide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px);-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-feed.ab-effect-slide.ab-show{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-feed.ab-effect-slide.ab-hide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card{position:relative;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;width:100%;border:1px solid #d0d0d0;margin-bottom:20px;overflow:hidden;background-color:#fff;-webkit-transition:height .4s ease-in-out,margin .4s ease-in-out;-moz-transition:height .4s ease-in-out,margin .4s ease-in-out;-o-transition:height .4s ease-in-out,margin .4s ease-in-out;transition:height .4s ease-in-out,margin .4s ease-in-out}.ab-feed .ab-card .ab-pinned-indicator{position:absolute;right:0;top:0;margin-right:-1px;width:0;height:0;border-style:solid;border-width:0 24px 24px 0;border-color:transparent #1676d0 transparent transparent}.ab-feed .ab-card .ab-pinned-indicator .fa-star{position:absolute;right:-21px;top:2px;font-size:9px;color:#fff}.ab-feed .ab-card.ab-effect-card.ab-hide{-webkit-transition:all .5s ease-in-out;-moz-transition:all .5s ease-in-out;-o-transition:all .5s ease-in-out;transition:all .5s ease-in-out}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-left{-webkit-transform:translateX(-450px);-moz-transform:translateX(-450px);-ms-transform:translateX(-450px);transform:translateX(-450px)}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-right{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card.ab-effect-card.ab-hide:not(.ab-swiped-left):not(.ab-swiped-right){opacity:0}.ab-feed .ab-card .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;top:0;z-index:9021;opacity:0;-webkit-transition:.5s;-moz-transition:.5s;-o-transition:.5s;transition:.5s}.ab-feed .ab-card .ab-close-button[dir=rtl]{left:0}.ab-feed .ab-card .ab-close-button[dir=ltr]{right:0}.ab-feed .ab-card .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-feed .ab-card .ab-close-button svg.ab-chevron{display:none}.ab-feed .ab-card .ab-close-button:active{background-color:transparent}.ab-feed .ab-card .ab-close-button:focus{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover svg{fill-opacity:.8}.ab-feed .ab-card .ab-close-button:hover{opacity:1}.ab-feed .ab-card .ab-close-button:focus{opacity:1}.ab-feed .ab-card a{float:none;color:inherit;text-decoration:none}.ab-feed .ab-card a:hover{text-decoration:underline}.ab-feed .ab-card .ab-image-area{float:none;display:inline-block;vertical-align:top;line-height:0;overflow:hidden;width:100%;-webkit-box-sizing:initial;-moz-box-sizing:initial;box-sizing:initial}.ab-feed .ab-card .ab-image-area img{float:none;height:auto;width:100%}.ab-feed .ab-card.ab-image-only .ab-card-body{display:none}.ab-feed .ab-card .ab-card-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;width:100%;position:relative}.ab-feed .ab-card .ab-unread-indicator{position:absolute;bottom:0;margin-right:-1px;width:100%;height:5px;background-color:#1676d0}.ab-feed .ab-card .ab-unread-indicator.read{background-color:transparent}.ab-feed .ab-card .ab-title{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:18px;line-height:130%;padding:20px 25px 0 25px}.ab-feed .ab-card .ab-description{float:none;color:#545454;padding:15px 25px 20px 25px;word-wrap:break-word;white-space:pre-wrap}.ab-feed .ab-card .ab-description.ab-no-title{padding-top:20px}.ab-feed .ab-card .ab-url-area{float:none;color:#1676d0;margin-top:12px;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-feed .ab-card.ab-classic-card .ab-card-body{min-height:40px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body{min-height:100px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body[dir=ltr]{padding-left:72px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body[dir=rtl]{padding-right:72px}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area{width:60px;height:60px;padding:20px 0 25px 25px;position:absolute}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area[dir=rtl]{padding:20px 25px 25px 0}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area img{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;max-width:100%;max-height:100%;width:auto;height:auto}.ab-feed .ab-card.ab-classic-card.with-image .ab-title{background-color:transparent;font-size:16px}.ab-feed .ab-card.ab-classic-card.with-image .ab-description{padding-top:10px}.ab-feed .ab-card.ab-control-card{height:0;width:0;margin:0;border:0}.ab-feed .ab-feed-buttons-wrapper{float:none;position:relative;background-color:#282828;height:50px;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);z-index:1}.ab-feed .ab-feed-buttons-wrapper .ab-close-button,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{float:none;cursor:pointer;color:#fff;font-size:18px;padding:16px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{font-size:22px}.ab-feed .ab-feed-buttons-wrapper .ab-close-button{float:right}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover{padding-top:12px;padding-right:14px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{padding-left:17px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{padding-top:13px;padding-left:14px}.ab-feed .ab-no-cards-message{text-align:center;margin-bottom:20px}@media (max-width:600px){body>.ab-feed{width:100%}}"),tX()}function tK(){tj(void 0,"iam",".ab-pause-scrolling,body.ab-pause-scrolling,html.ab-pause-scrolling{overflow:hidden;touch-action:none}.ab-iam-root.v3{position:fixed;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:9011;-webkit-tap-highlight-color:transparent}.ab-iam-root.v3:focus{outline:0}.ab-iam-root.v3.ab-effect-fullscreen,.ab-iam-root.v3.ab-effect-html,.ab-iam-root.v3.ab-effect-modal{opacity:0}.ab-iam-root.v3.ab-effect-fullscreen.ab-show,.ab-iam-root.v3.ab-effect-html.ab-show,.ab-iam-root.v3.ab-effect-modal.ab-show{opacity:1}.ab-iam-root.v3.ab-effect-fullscreen.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-html.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-modal.ab-show.ab-animate-in{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-iam-root.v3.ab-effect-fullscreen.ab-hide,.ab-iam-root.v3.ab-effect-html.ab-hide,.ab-iam-root.v3.ab-effect-modal.ab-hide{opacity:0}.ab-iam-root.v3.ab-effect-fullscreen.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-html.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-modal.ab-hide.ab-animate-out{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-iam-root.v3.ab-effect-slide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-iam-root.v3.ab-effect-slide.ab-show .ab-in-app-message{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-iam-root.v3.ab-effect-slide.ab-show.ab-animate-in .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-left{-webkit-transform:translateX(-535px);-moz-transform:translateX(-535px);-ms-transform:translateX(-535px);transform:translateX(-535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-up{-webkit-transform:translateY(-535px);-moz-transform:translateY(-535px);-ms-transform:translateY(-535px);transform:translateY(-535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-down{-webkit-transform:translateY(535px);-moz-transform:translateY(535px);-ms-transform:translateY(535px);transform:translateY(535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide.ab-animate-out .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-iam-root.v3 .ab-ios-scroll-wrapper{position:fixed;top:0;right:0;bottom:0;left:0;overflow:auto;pointer-events:all;touch-action:auto;-webkit-overflow-scrolling:touch}.ab-iam-root.v3 .ab-in-app-message{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:fixed;text-align:center;-webkit-box-shadow:0 0 4px rgba(0,0,0,.3);-moz-box-shadow:0 0 4px rgba(0,0,0,.3);box-shadow:0 0 4px rgba(0,0,0,.3);line-height:normal;letter-spacing:normal;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;z-index:9011;max-width:100%;overflow:hidden;display:inline-block;pointer-events:all;color:#333;color-scheme:normal}.ab-iam-root.v3 .ab-in-app-message.ab-no-shadow{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.ab-iam-root.v3 .ab-in-app-message :focus,.ab-iam-root.v3 .ab-in-app-message:focus{outline:0}.ab-iam-root.v3 .ab-in-app-message.ab-clickable{cursor:pointer}.ab-iam-root.v3 .ab-in-app-message.ab-background{background-color:#fff}.ab-iam-root.v3 .ab-in-app-message .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;top:0;z-index:9021}.ab-iam-root.v3 .ab-in-app-message .ab-close-button[dir=rtl]{left:0}.ab-iam-root.v3 .ab-in-app-message .ab-close-button[dir=ltr]{right:0}.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg.ab-chevron{display:none}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:active{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:focus{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover svg{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message .ab-message-text{float:none;line-height:1.5;margin:20px 25px;max-width:100%;overflow:hidden;overflow-y:auto;vertical-align:text-bottom;word-wrap:break-word;white-space:pre-wrap;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.start-aligned{text-align:start}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.end-aligned{text-align:end}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.center-aligned{text-align:center}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar{-webkit-appearance:none;width:14px}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-thumb{-webkit-appearance:none;border:4px solid transparent;background-clip:padding-box;-webkit-border-radius:7px;-moz-border-radius:7px;border-radius:7px;background-color:rgba(0,0,0,.2)}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-button{width:0;height:0;display:none}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-corner{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-message-header{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;font-size:20px;margin-bottom:10px;line-height:1.3}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.start-aligned{text-align:start}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.end-aligned{text-align:end}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.center-aligned{text-align:center}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal,.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;cursor:pointer;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:14px;font-weight:700;margin:20px;margin-top:calc(constant(safe-area-inset-top,0) + 20px);margin-right:calc(constant(safe-area-inset-right,0) + 20px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 20px);margin-left:calc(constant(safe-area-inset-left,0) + 20px);margin-top:calc(env(safe-area-inset-top,0) + 20px);margin-right:calc(env(safe-area-inset-right,0) + 20px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 20px);margin-left:calc(env(safe-area-inset-left,0) + 20px);max-height:150px;padding:10px;right:0;background-color:#efefef}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button svg:not(.ab-chevron){display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button svg.ab-chevron.rtl{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-message-text{border-right-width:40px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text{max-width:100%;border-right-width:10px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text span{max-height:66px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area{width:50px;height:50px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-message-text{opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-close-button svg.ab-chevron{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 25px 5px 10px;max-width:430px;vertical-align:middle;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text[dir=rtl]{border-width:5px 10px 5px 25px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{display:block;max-height:150px;overflow:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:365px;border-top:0;border-bottom:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;top:0;z-index:9021}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button[dir=rtl]{left:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button[dir=ltr]{right:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg.ab-chevron{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:active{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:focus{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover svg{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{float:none;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 0 5px 5px;vertical-align:top;width:60px;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area.ab-icon-area{width:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{float:none;width:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal{font-size:14px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{float:none;position:relative;display:block;overflow:hidden}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area .ab-center-cropped-img,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area .ab-center-cropped-img{background-size:cover;background-repeat:no-repeat;background-position:50% 50%;position:absolute;top:0;right:0;bottom:0;left:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-icon{margin-top:20px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{padding:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-text{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-buttons{bottom:0;left:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{float:none;height:auto;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{display:block;top:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none}.ab-iam-root.v3 .ab-in-app-message.ab-modal{padding-top:20px;width:450px;max-width:450px;max-height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone{max-width:91%;max-width:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone.graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text{max-height:660px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-image{max-height:524.82758621px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-icon{max-height:610px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons{margin-bottom:93px;max-height:587px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-image{max-height:451.82758621px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-icon{max-height:537px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{margin-top:-20px;max-height:155.17241379px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area img{max-width:100%;max-height:155.17241379px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area.ab-icon-area{height:auto}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{width:auto;overflow:hidden}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{width:auto;max-height:720px;max-width:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen{width:450px;max-height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape{width:720px;max-height:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-image-area{height:225px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape.graphic .ab-image-area{height:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-message-text{max-height:112px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text{max-height:247px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text.ab-with-buttons{margin-bottom:93px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area{height:360px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area{height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-html-message{background-color:transparent;border:none;height:100%;overflow:auto;position:relative;touch-action:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message .ab-message-buttons{position:absolute;bottom:0;width:100%;padding:17px 25px 30px 25px;z-index:inherit;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ab-iam-root.v3 .ab-in-app-message .ab-message-button{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;cursor:pointer;display:inline-block;font-size:14px;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;height:44px;line-height:normal;letter-spacing:normal;margin:0;max-width:100%;min-width:80px;padding:0 12px;position:relative;text-transform:none;width:48%;width:calc(50% - 5px);border:1px solid #1b78cf;-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;word-wrap:normal;white-space:nowrap}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type{float:left;background-color:#fff;color:#1b78cf}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:last-of-type{float:right;background-color:#1b78cf;color:#fff}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type:last-of-type{float:none;width:auto}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:hover{opacity:.8}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:active:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.08)}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:focus:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.15)}.ab-iam-root.v3 .ab-in-app-message .ab-message-button a{color:inherit;text-decoration:inherit}.ab-iam-root.v3 .ab-in-app-message img{float:none;display:inline-block}.ab-iam-root.v3 .ab-in-app-message .ab-icon{float:none;display:inline-block;padding:10px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-iam-root.v3 .ab-in-app-message .ab-icon .fa{float:none;font-size:30px;width:30px}.ab-iam-root.v3 .ab-start-hidden{visibility:hidden}.ab-iam-root.v3 .ab-centered{margin:auto;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.ab-iam-root.v3{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-iam-root.v3 .ab-page-blocker{position:fixed;top:0;left:0;width:100%;height:100%;z-index:9001;pointer-events:all;background-color:rgba(51,51,51,.75)}@media (max-width:600px){.ab-iam-root.v3 .ab-in-app-message.ab-slideup{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg:not(.ab-chevron){display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button svg.ab-chevron.rtl{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-message-text{border-right-width:40px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{max-width:100%;border-right-width:10px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{max-height:66px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{width:50px;height:50px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-close-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic),.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic) .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic{display:block}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-message-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:480px){.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-width:91%;max-width:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}}@media (max-height:750px){.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-height:91%;max-height:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-height:91vh;max-height:calc(100vh - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text{max-height:65vh;max-height:calc(100vh - 30px - 60px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-image{max-height:45vh;max-height:calc(100vh - 30px - 155.17241379310346px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-icon{max-height:45vh;max-height:calc(100vh - 30px - 70px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons{max-height:50vh;max-height:calc(100vh - 30px - 93px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-image{max-height:30vh;max-height:calc(100vh - 30px - 155.17241379310346px - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-icon{max-height:30vh;max-height:calc(100vh - 30px - 70px - 93px - 20px)}}@media (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area img{max-height:100%;max-width:100%}}@media (max-height:750px) and (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important;width:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-height:480px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:750px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}"),tX()}function tV(e,t,i,a="ltr"){var r=document.createElement("button");r.setAttribute("aria-label",e),r.setAttribute("tabindex","0"),r.setAttribute("role","button"),r.dir=a,tB(r,"touchstart"),r.className="ab-close-button";var s=tP("0 0 15 15","M15 1.5L13.5 0l-6 6-6-6L0 1.5l6 6-6 6L1.5 15l6-6 6 6 1.5-1.5-6-6 6-6z",t);return r.appendChild(s),r.addEventListener("keydown",e=>{e.keyCode!==tF.Wo&&e.keyCode!==tF.Xo||(i(),e.stopPropagation())}),r.onclick=e=>{i(),e.stopPropagation()},r}function tJ(e,t){return null==e||isNaN(e=parseInt(e.toString()))?"":(t&&!isNaN(parseFloat(t.toString()))||(t=1),"rgba("+[(16711680&(e>>>=0))>>>16,(65280&e)>>>8,255&e,((4278190080&e)>>>24)/255*t].join(",")+")")}function tW(e){if(!ey.rr())return!1;if(!(e instanceof T||e instanceof N))return eo.error(e2),!1;var t=e instanceof N?e$.Eo:e$.Li;return ex.ea().ut(e,t).tt}function tY(e){if(!ey.rr())return!1;if(!(e instanceof T))return eo.error(e2),!1;var t=ex.ea().ut(e,e$.Qi);if(t){e.Do()||tW(e);for(var i=0;i<t.$e.length;i++)ib.m().Ce(tG.Bo,[e.triggerId],t.$e[i])}return t.tt}var tZ={PORTRAIT:0,LANDSCAPE:1};function tQ(){return screen.width<=600}function t0(){if("orientation"in window)return 90===Math.abs(window.orientation)||270===window.orientation?tZ.LANDSCAPE:tZ.PORTRAIT;var e=window;if("screen"in e){var t=e.screen.orientation||screen.mozOrientation||screen.msOrientation;return null!=t&&"object"==typeof t&&(t=t.type),"landscape-primary"===t||"landscape-secondary"===t?tZ.LANDSCAPE:tZ.PORTRAIT}return tZ.PORTRAIT}function t1(e,t,i){e&&(t||null!=i&&i.metaKey?window.open(e):window.location=e)}function t3(){return window.location.href}function t5(){if(ey.rr())return ey.mr()}function t2(e,t,i){if(ey.rr()){if(tc.test(e)){var a=ts(e);if(a){var r=e=>{if(!tv(e))return void eo.error(`Decoded Braze Action json is invalid: ${JSON.stringify(e,null,2)}`);var t=ti.properties.type,i=ti.properties.eo,a=ti.properties.so,s=e[t];if(s===ti.types.io)for(var n of e[i])r(n);else{var o,l,u=e[a];switch(s){case ti.types.logCustomEvent:Promise.resolve().then(function(){return eN}).then(({logCustomEvent:e})=>{ey._t()?e(...l=Array.prototype.slice.call(u)):eo.error(e7)});break;case ti.types.requestPushPermission:Promise.resolve().then(function(){return eM}).then(({requestPushPermission:e})=>{ey._t()?"Safari"===ec.browser&&ec.OS===tx.ao?window.navigator.standalone&&e():e():eo.error(e7)});break;case ti.types.setEmailNotificationSubscriptionType:case ti.types.setPushNotificationSubscriptionType:case ti.types.setCustomUserAttribute:case ti.types.addToSubscriptionGroup:case ti.types.removeFromSubscriptionGroup:case ti.types.addToCustomAttributeArray:case ti.types.removeFromCustomAttributeArray:(o=t5())&&o[s](...Array.prototype.slice.call(u));break;case ti.types.co:case ti.types.mo:l=Array.prototype.slice.call(u),em.openUri(...l);break;default:eo.info(`Ignoring unknown Braze Action: ${s}`)}}};r(a)}}else em.openUri(e,t,i)}}function t4(e,t){t2(e,t)}function t8(e){null==e&&(e="");var t=e.split("?").slice(1).join("?"),i={};if(null!=t)for(var a=t.split("&"),r=0;r<a.length;r++){var s=a[r].split("=");""!==s[0]&&(i[s[0]]=s[1])}return i}function t7(e){return!(!e||0!==(e=e.toString().toLowerCase()).lastIndexOf("javascript:",0)&&0!==e.lastIndexOf("data:",0))}function t6(e,t,i){if(!ey.rr())return!1;if(!(e instanceof _))return eo.error("inAppMessage argument to logInAppMessageHtmlClick must be an HtmlMessage object."),!1;var a=e$.Qi;null!=t&&(a=e$.Vi);var r=ex.ea().ut(e,a,t,i);if(r.tt)for(var s=0;s<r.$e.length;s++)ib.m().Ce(tG.Bo,[e.triggerId,t],r.$e[s]);return r.tt}var t9=(e,t,i,a)=>{var r=i.getAttribute("href"),s=i.onclick;return n=>{if(null==s||"function"!=typeof s||!1!==s.bind(i)(n)){var o=t8(r).abButtonId;if(null!=o&&""!==o||(o=i.getAttribute("id")||void 0),null!=r&&""!==r&&0!==r.indexOf("#")){var l="blank"===(i.getAttribute("target")||"").toLowerCase().replace("_",""),u=a||e.openTarget===T.OpenTarget.BLANK||l,h=()=>{t6(e,o,r),em.openUri(r,u,n)};u?h():e.ll(t,h)}else t6(e,o,r||void 0);return n.stopPropagation(),!1}}},ie=(e,t,i)=>{var a={display:{},web:{}},r=function(){return function(){var e=arguments;Promise.resolve().then(function(){return eM}).then(t=>{ey._t()?t.requestPushPermission(...Array.prototype.slice.call(e)):eo.error(e7)})}},s={requestImmediateDataFlush:function(){var e=arguments;Promise.resolve().then(function(){return e_}).then(({requestImmediateDataFlush:t})=>{ey._t()?t(...Array.prototype.slice.call(e)):eo.error(e7)})},logCustomEvent:function(){var e=arguments;Promise.resolve().then(function(){return eN}).then(({logCustomEvent:t})=>{if(!ey._t())return void eo.error(e7);t(...Array.prototype.slice.call(e))})},logPurchase:function(){var e=arguments;Promise.resolve().then(function(){return eT}).then(({logPurchase:t})=>{if(!ey._t())return void eo.error(e7);t(...Array.prototype.slice.call(e))})},unregisterPush:function(){var e=arguments;Promise.resolve().then(function(){return eR}).then(({unregisterPush:t})=>{ey._t()?t(...Array.prototype.slice.call(e)):eo.error(e7)})},requestPushPermission:r(),changeUser:function(){var e=arguments;Promise.resolve().then(function(){return eA}).then(({changeUser:t})=>{if(!ey._t())return void eo.error(e7);t(...Array.prototype.slice.call(e))})}},n=function(e){return function(){s[e](...Array.prototype.slice.call(arguments))}};for(var o of eW(s))a[o]=n(o);for(var l=["setFirstName","setLastName","setEmail","setGender","setDateOfBirth","setCountry","setHomeCity","setEmailNotificationSubscriptionType","setLanguage","addAlias","setPushNotificationSubscriptionType","setPhoneNumber","setCustomUserAttribute","addToCustomAttributeArray","removeFromCustomAttributeArray","incrementCustomUserAttribute","setCustomLocationAttribute","addToSubscriptionGroup","removeFromSubscriptionGroup","setLineId"],u=function(e){return function(){var t=t5();t&&t[e](...Array.prototype.slice.call(arguments))}},h={},c=0;c<l.length;c++)h[l[c]]=u(l[c]);a.getUser=function(){return h};var d={showFeed:t},p=function(t){return function(){var a=arguments;"function"!=typeof i?d[t](...Array.prototype.slice.call(a)):i(e,function(){d[t](...Array.prototype.slice.call(a))})}},b=a.display;for(var g of eW(d))b[g]=p(g);var f={registerAppboyPushMessages:r()},m=function(e){return function(){f[e](...Array.prototype.slice.call(arguments))}},v=a.web;for(var w of eW(f))v[w]=m(w);return a},it=(e,t,i)=>{var a=`([\\w]+)\\s*=\\s*document.createElement\\(['"]${i}['"]\\)`,r=e.match(new RegExp(a));if(r){var s=`${r[1]}.setAttribute("nonce", "${t}")`;return`${e.slice(0,r.index+r[0].length)};${s};${e.slice(r.index+r[0].length)}`}return null},ii=(e,t,i)=>{var a=null;if(null!=i){(a=document.createElement("html")).innerHTML=t||"";for(var r=a.getElementsByTagName("style"),s=0;s<r.length;s++)r[s].setAttribute("nonce",i);for(var n=a.getElementsByTagName("script"),o=0;o<n.length;o++){n[o].setAttribute("nonce",i),n[o].innerHTML=n[o].innerHTML.replace(/<style>/g,`<style nonce='${i}'>`);var l=it(n[o].innerHTML,i,"script");l&&(n[o].innerHTML=l);var u=it(n[o].innerHTML,i,"style");u&&(n[o].innerHTML=u)}}e.srcdoc=a?a.innerHTML:t||""};function ia(e,t){if(!ey.rr())return!1;if(!(e instanceof I))return eo.error("button must be an InAppMessageButton object"),!1;if(!(t instanceof T))return eo.error(e2),!1;var i,a=ex.ea().Yi(e,t);if(a.tt)for(var r=0;r<a.$e.length;r++)ib.m().Ce(tG.Bo,[t.triggerId,null===(i=e.id)||void 0===i?void 0:i.toString()],a.$e[r]);return a.tt}var ir={Lo:e=>{for(var t=e.querySelectorAll(".ab-close-button, .ab-message-text, .ab-message-button"),i=0;i<t.length;i++)t[i].tabIndex=0;if(t.length>0){var a=t[0],r=t[t.length-1];e.addEventListener("keydown",t=>{var i=document.activeElement;t.keyCode!==tF.yo||(t.shiftKey||i!==r&&i!==e?t.shiftKey&&(i===a||i===e)&&(t.preventDefault(),r.focus()):(t.preventDefault(),a.focus()))})}},Io:(e,t)=>{t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),t.setAttribute("aria-label","Modal Message"),e&&t.setAttribute("aria-labelledby",e)},zo:(e,t,i,a)=>{if(e.buttons&&e.buttons.length>0){var r=document.createElement("div");r.className="ab-message-buttons",i.appendChild(r);var s=i.getElementsByClassName("ab-message-text")[0];null!=s&&(s.className+=" ab-with-buttons");for(var n=r=>s=>(e.ll(i,()=>{ia(r,e),r.clickAction===T.ClickAction.URI?t2(r.uri||"",a||e.openTarget===T.OpenTarget.BLANK,s):r.clickAction===T.ClickAction.NEWS_FEED&&t()}),s.stopPropagation(),!1),o=0;o<e.buttons.length;o++){var l=e.buttons[o],u=document.createElement("button");u.className="ab-message-button",u.setAttribute("type","button"),tB(u,"touchstart");var h=l.text;""===l.text&&(h="\xa0"),u.appendChild(document.createTextNode(h)),e.lo()||(u.style.backgroundColor=tJ(l.backgroundColor),u.style.color=tJ(l.textColor),u.style.borderColor=tJ(l.borderColor)),u.onclick=n(l),r.appendChild(u)}}}},is={en:{NO_CARDS_MESSAGE:"We have no updates for you at this time.<br/>Please check again later.",FEED_TIMEOUT_MESSAGE:"Sorry, this refresh timed out.<br/>Please try again later."},ar:{NO_CARDS_MESSAGE:"   .     ",FEED_TIMEOUT_MESSAGE:"   "},cs:{NO_CARDS_MESSAGE:"V tuto chv\xedli pro v\xe1s nem\xe1me \xe1dn\xe9 aktualizace.<br/>Zkontrolujte pros\xedm znovu pozdji.",FEED_TIMEOUT_MESSAGE:"Pros\xedm zkuste to znovu pozdji."},da:{NO_CARDS_MESSAGE:"Vi har ingen updates.<br/>Pr\xf8v venligst senere.",FEED_TIMEOUT_MESSAGE:"Pr\xf8v venligst senere."},de:{NO_CARDS_MESSAGE:"Derzeit sind keine Updates verf\xfcgbar.<br/>Bitte sp\xe4ter noch einmal versuchen.",FEED_TIMEOUT_MESSAGE:"Bitte sp\xe4ter noch einmal versuchen."},es:{NO_CARDS_MESSAGE:"No tenemos actualizaciones.<br/>Por favor compru\xe9belo m\xe1s tarde.",FEED_TIMEOUT_MESSAGE:"Por favor int\xe9ntelo m\xe1s tarde."},"es-mx":{NO_CARDS_MESSAGE:"No tenemos ninguna actualizaci\xf3n.<br/>Vuelva a verificar m\xe1s tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, vuelva a intentarlo m\xe1s tarde."},et:{NO_CARDS_MESSAGE:"Uuendusi pole praegu saadaval.<br/>Proovige hiljem uuesti.",FEED_TIMEOUT_MESSAGE:"Palun proovige hiljem uuesti."},fi:{NO_CARDS_MESSAGE:"P\xe4ivityksi\xe4 ei ole saatavilla.<br/>Tarkista my\xf6hemmin uudelleen.",FEED_TIMEOUT_MESSAGE:"Yrit\xe4 my\xf6hemmin uudelleen."},fr:{NO_CARDS_MESSAGE:"Aucune mise \xe0 jour disponible.<br/>Veuillez v\xe9rifier ult\xe9rieurement.",FEED_TIMEOUT_MESSAGE:"Veuillez r\xe9essayer ult\xe9rieurement."},he:{NO_CARDS_MESSAGE:".  .    ",FEED_TIMEOUT_MESSAGE:".   "},hi:{NO_CARDS_MESSAGE:"            .",FEED_TIMEOUT_MESSAGE:"     ."},id:{NO_CARDS_MESSAGE:"Kami tidak memiliki pembaruan. Coba lagi nanti.",FEED_TIMEOUT_MESSAGE:"Coba lagi nanti."},it:{NO_CARDS_MESSAGE:"Non ci sono aggiornamenti.<br/>Ricontrollare pi\xf9 tardi.",FEED_TIMEOUT_MESSAGE:"Riprovare pi\xf9 tardi."},ja:{NO_CARDS_MESSAGE:"<br/>",FEED_TIMEOUT_MESSAGE:""},ko:{NO_CARDS_MESSAGE:" .    .",FEED_TIMEOUT_MESSAGE:"   ."},ms:{NO_CARDS_MESSAGE:"Tiada kemas kini. Sila periksa kemudian.",FEED_TIMEOUT_MESSAGE:"Sila cuba kemudian."},nl:{NO_CARDS_MESSAGE:"Er zijn geen updates.<br/>Probeer het later opnieuw.",FEED_TIMEOUT_MESSAGE:"Probeer het later opnieuw."},no:{NO_CARDS_MESSAGE:"Vi har ingen oppdateringer.<br/>Vennligst sjekk igjen senere.",FEED_TIMEOUT_MESSAGE:"Vennligst pr\xf8v igjen senere."},pl:{NO_CARDS_MESSAGE:"Brak aktualizacji.<br/>Prosz sprawdzi ponownie p\xf3niej.",FEED_TIMEOUT_MESSAGE:"Prosz spr\xf3bowa ponownie p\xf3niej."},pt:{NO_CARDS_MESSAGE:"N\xe3o temos atualiza\xe7\xf5es.<br/>Por favor, verifique mais tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, tente mais tarde."},"pt-br":{NO_CARDS_MESSAGE:"N\xe3o temos nenhuma atualiza\xe7\xe3o.<br/>Verifique novamente mais tarde.",FEED_TIMEOUT_MESSAGE:"Tente novamente mais tarde."},ru:{NO_CARDS_MESSAGE:" .<br/>,   .",FEED_TIMEOUT_MESSAGE:",   ."},sv:{NO_CARDS_MESSAGE:"Det finns inga uppdateringar.<br/>F\xf6rs\xf6k igen senare.",FEED_TIMEOUT_MESSAGE:"F\xf6rs\xf6k igen senare."},th:{NO_CARDS_MESSAGE:" .",FEED_TIMEOUT_MESSAGE:"."},uk:{NO_CARDS_MESSAGE:" .<br/>,   .",FEED_TIMEOUT_MESSAGE:" ,    ."},vi:{NO_CARDS_MESSAGE:"Ch\xfang t\xf4i kh\xf4ng c\xf3 cp nht n\xe0o.<br/>Vui l\xf2ng kim tra li sau.",FEED_TIMEOUT_MESSAGE:"Vui l\xf2ng th li sau."},"zh-hk":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-hans":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-hant":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-tw":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},zh:{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."}},io={l:!1,aa:null,ea:()=>{if(io.p(),!io.aa){var e=ec.language,t=!1;ey.ee(ig.Xn)&&(e=ey.ee(ig.Xn),t=!0),io.aa=new j(e,t)}return io.aa},p:()=>{io.l||(ey.h(io),io.l=!0)},destroy:()=>{io.aa=null,io.l=!1}};function il(e,t,i){if(ey.rr()){if(tK(),null==e)return!1;if(e instanceof N)return eo.info("User received control for a multivariate test, logging to Braze servers."),tW(e),!0;if(!(e instanceof T)||e.constructor===T)return!1;e.Lh();var a,r=e instanceof _;if(r&&!e.trusted&&!ey.tr())return eo.error('HTML in-app messages are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these messages.'),!1;if(null==t&&(t=document.body),e.wo()&&t.querySelectorAll(".ab-modal-interactions").length>0)return eo.info(`Cannot show in-app message ${e.message} because another message is being shown.`),!1;if(em.Uo()){var s=em.Jo();if(s===tZ.PORTRAIT&&e.orientation===T.Orientation.LANDSCAPE||s===tZ.LANDSCAPE&&e.orientation===T.Orientation.PORTRAIT){var n=s===tZ.PORTRAIT?"portrait":"landscape",o=e.orientation===T.Orientation.PORTRAIT?"portrait":"landscape";return eo.info(`Not showing ${o} in-app message ${e.message} because the screen is currently ${n}`),!1}}if(!ey.tr()){var l=!1;if(e.buttons&&e.buttons.length>0)for(var u=e.buttons,h=0;h<u.length;h++)u[h].clickAction===T.ClickAction.URI&&(l=t7(u[h].uri));else e.clickAction===T.ClickAction.URI&&(l=t7(e.uri));if(l)return eo.error('Javascript click actions are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these actions.'),!1}var c=document.createElement("div");if(c.className="ab-iam-root v3",c.className+=(a="",e.animateIn&&(a+=" ab-animate-in"),e.animateOut&&(a+=" ab-animate-out"),e instanceof O?a+=" ab-effect-fullscreen":e instanceof _?a+=" ab-effect-html":e instanceof D?a+=" ab-effect-modal":e instanceof B&&(a+=" ab-effect-slide"),a),c.setAttribute("role","complementary"),e.bo()&&(c.id=e.htmlId),ey.ee(ig.No)&&(c.style.zIndex=(ey.ee(ig.No)+1).toString()),t.appendChild(c),e.lo()){var d=document.createElement("style");d.innerHTML=e.css,d.id=e.do(),null!=ey.ee(ig.er)&&d.setAttribute("nonce",ey.ee(ig.er)),document.getElementsByTagName("head")[0].appendChild(d)}var p=e instanceof B,b=function(e,t,i,a,r,s,n,o=document.body,l="ltr"){if(e.jo=document.activeElement,e instanceof _)return function(e,t,i,a,r,s){var n=document.createElement("iframe");if(n.setAttribute("title","Modal Message"),r&&(n.style.zIndex=(r+1).toString()),ii(n,e.message,s),n.onload=()=>{var r=n.contentWindow;r.focus();var o=r.document.getElementsByTagName("head")[0];if(null!=o){if(e.lo()){var l=document.createElement("style");l.innerHTML=e.css||"",l.id=e.do()||"",null!=s&&l.setAttribute("nonce",s),o.appendChild(l)}var u=r.document.createElement("base");null!=u&&(u.setAttribute("target","_parent"),o.appendChild(u))}var h=r.document.getElementsByTagName("title");h&&h.length>0&&n.setAttribute("title",h[0].textContent||"");var c=Object.assign(Object.assign({},ie(n,t,(t,i)=>e.ll(t,i))),{closeMessage:function(){e.ll(n)},logClick:function(){t6(e,...arguments)}});if(r.appboyBridge=c,r.brazeBridge=c,e.uo!==T.po.fo){for(var d=r.document.getElementsByTagName("a"),p=0;p<d.length;p++)d[p].onclick=t9(e,n,d[p],a);for(var b=r.document.getElementsByTagName("button"),g=0;g<b.length;g++)b[g].onclick=t9(e,n,b[g],a)}var f=r.document.body;if(null!=f){e.bo()&&(f.id=e.htmlId||"");var m=document.createElement("hidden");m.onclick=c.closeMessage,m.className="ab-programmatic-close-button",f.appendChild(m)}r.dispatchEvent(new CustomEvent("ab.BridgeReady")),-1!==n.className.indexOf("ab-start-hidden")&&(n.className=n.className.replace("ab-start-hidden",""),i(n))},n.className="ab-in-app-message ab-start-hidden ab-html-message ab-modal-interactions",ec.OS===tx.ao){var o=document.createElement("div");return o.className="ab-ios-scroll-wrapper",o.appendChild(n),e.ho=o,o}return e.ho=n,n}(e,t,i,r,s,n);var u=function(e,t,i,a,r,s,n=document.body,o="ltr"){var l,u=null,h=document.createElement("div");h.dir=o,h.className="ab-in-app-message ab-start-hidden ab-background",s&&(h.style.zIndex=(s+1).toString()),e.wo()&&(h.className+=" ab-modal-interactions",h.setAttribute("tabindex","-1")),e.lo()||(h.style.color=tJ(e.textColor),h.style.backgroundColor=tJ(e.backgroundColor),null==(l=e.backgroundColor)||isNaN(l=parseInt(l.toString()))||(4278190080&l)>>>24!=0||(h.className+=" ab-no-shadow"));var c=()=>{-1!==h.className.indexOf("ab-start-hidden")&&(h.className=h.className.replace("ab-start-hidden",""),document.querySelectorAll(".ab-iam-img-loading").length>0?a(`Cannot show in-app message ${e.message} because another message is being shown.`,T.xo.vo):i(h))},d=(t=!0)=>{var i=document.querySelectorAll(".ab-iam-root");i&&0!==i.length||(i=n.querySelectorAll(".ab-iam-root")),i&&i.length>0&&(i[0].classList.remove("ab-iam-img-loading"),u&&(clearTimeout(u),u=null),t?c():eo.error(`Cannot show in-app message ${e.message} because the image failed to load.`))};e.imageStyle===T.ImageStyle.GRAPHIC&&(h.className+=" graphic"),e.orientation===T.Orientation.LANDSCAPE&&(h.className+=" landscape"),null!=e.buttons&&0===e.buttons.length&&(e.clickAction!==T.ClickAction.NONE&&(h.className+=" ab-clickable"),h.onclick=i=>(e.ll(h,()=>{tY(e),e.clickAction===T.ClickAction.URI?t2(e.uri||"",r||e.openTarget===T.OpenTarget.BLANK,i):e.clickAction===T.ClickAction.NEWS_FEED&&t()}),i.stopPropagation(),!1));var p=tV("Close Message",e.lo()?void 0:tJ(e.closeButtonColor),()=>{e.ll(h)},o);h.appendChild(p),s&&(p.style.zIndex=(s+2).toString());var b=document.createElement("div");b.className="ab-message-text",b.dir=o;var g=(e.messageAlignment||e.Co).toLowerCase();b.className+=" "+g+"-aligned";var f=!1,m=document.createElement("div");if(m.className="ab-image-area",e.imageUrl){if(e.cropType===T.CropType.CENTER_CROP){var v=document.createElement("span");v.className="ab-center-cropped-img",v.style.backgroundImage="url("+e.imageUrl+")",v.setAttribute("role","img"),v.setAttribute("aria-label","Modal Image"),e.$o(v),m.appendChild(v)}else{var w=document.createElement("img");if(w.setAttribute("src",e.imageUrl),e.$o(w),0===document.querySelectorAll(".ab-iam-img-loading").length){f=!0;var x=document.querySelectorAll(".ab-iam-root");x&&x.length>0&&x[0].classList.add("ab-iam-img-loading"),u=window.setTimeout(()=>{d(!1)},6e4),w.onload=()=>{d()},w.onerror=()=>{d(!1)}}m.appendChild(w)}h.appendChild(m),b.className+=" ab-with-image"}else if(e.icon){m.className+=" ab-icon-area";var y=document.createElement("span");y.className="ab-icon",e.lo()||(y.style.backgroundColor=tJ(e.iconBackgroundColor),y.style.color=tJ(e.iconColor));var C=document.createElement("i");C.className="fa",C.appendChild(document.createTextNode(e.icon)),C.setAttribute("aria-hidden","true"),y.appendChild(C),m.appendChild(y),h.appendChild(m),b.className+=" ab-with-icon"}if(tB(b,"touchstart"),e.header&&e.header.length>0){var E=document.createElement("h1");E.className="ab-message-header",e.ko=eu.ce(),E.id=e.ko;var S=(e.headerAlignment||T.TextAlignment.CENTER).toLowerCase();E.className+=" "+S+"-aligned",e.lo()||(E.style.color=tJ(e.headerTextColor)),E.appendChild(document.createTextNode(e.header)),b.appendChild(E)}return b.appendChild(e.Mo()),h.appendChild(b),f||c(),e.ho=h,h}(e,t,i,a,r,s,o,l);if(e instanceof O||e instanceof D){var h=e instanceof O?"ab-fullscreen":"ab-modal";u.className+=` ${h} ab-centered`,ev.zo(e,t,u,r),ev.Lo(u),ev.Io(e.ko,u)}else if(e instanceof B){u.className+=" ab-slideup";var c,d,p=u.getElementsByClassName("ab-close-button")[0];if(null!=p){var b=tP("0 0 11.38 19.44","M11.38 9.72l-9.33 9.72L0 17.3l7.27-7.58L0 2.14 2.05 0l9.33 9.72z",e.lo()?void 0:tJ(e.closeButtonColor));b.setAttribute("class",`ab-chevron ${l}`),p.appendChild(b)}tU(u,tO.ie,e=>{u.className+=" ab-swiped-left",null!=p&&null!=p.onclick&&p.onclick(e)}),tU(u,tO.de,e=>{u.className+=" ab-swiped-right",null!=p&&null!=p.onclick&&p.onclick(e)}),e.slideFrom===T.SlideFrom.TOP?(c=tO.To,d=" ab-swiped-up"):(c=tO.qo,d=" ab-swiped-down"),tU(u,c,e=>{u.className+=d,null!=p&&null!=p.onclick&&p.onclick(e)})}return u}(e,()=>{Promise.resolve().then(function(){return eO}).then(e=>{ey._t()?e.showFeed():eo.error(e7)})},t=>{if(e.wo()&&e.Po()){var a=document.createElement("div");if(a.className="ab-page-blocker",e.lo()||(a.style.backgroundColor=tJ(e.frameColor)),ey.ee(ig.No)&&(a.style.zIndex=ey.ee(ig.No).toString()),c.appendChild(a),!ey.ee(ig.mh)){var s=new Date().valueOf();a.onclick=i=>{new Date().valueOf()-s>T.ph&&(e.ll(t),i.stopPropagation())}}c.appendChild(t),t.focus(),e.Ah(c)}else if(p){for(var n=document.querySelectorAll(".ab-slideup"),o=null,l=n.length-1;l>=0;l--)if(n[l]!==t){o=n[l];break}if(e.slideFrom===T.SlideFrom.TOP){var u=0;null!=o&&(u=o.offsetTop+o.offsetHeight),t.style.top=Math.max(u,0)+"px"}else{var h=0;null!=o&&(h=(window.innerHeight||document.documentElement.clientHeight)-o.offsetTop),t.style.bottom=Math.max(h,0)+"px"}}else r&&!ey.ee(ig.mh)&&tL(t)&&t.contentWindow&&t.contentWindow.addEventListener("keydown",function(t){t.keyCode===tF._h&&e.closeMessage()});tW(e),e.dismissType===T.DismissType.AUTO_DISMISS&&setTimeout(()=>{c.contains(t)&&e.ll(t)},e.duration),"function"==typeof i&&i()},e=>{eo.info(e)},ey.ee(ig.Ko),ey.ee(ig.No),ey.ee(ig.er),t,ew.ea().Oo());return(r||p)&&(c.appendChild(b),e.Ah(c)),!0}}function iu(e){if(ey.rr())return"function"!=typeof e?null:ex.ea().Hi(function(t){return e(t[0]),t.slice(1)})}function ih(){if(ey.rr()){tK();var e=ex.ea();if(null==e.Ji()){var t=iu(e=>il(e));e.Ki(t)}return e.Ji()}}function ic(e){if(ey.rr())return e instanceof N?(eo.info("Not deferring since this is a ControlMessage."),!1):e instanceof T?ex.ea().sn(e):(eo.info("Not an instance of InAppMessage, ignoring."),!1)}function id(){if(ey.rr())return ex.ea().Ar()}var ip={aa:null,l:!1,ea:()=>(ip.p(),ip.aa||(ip.aa=new X(ey.g(),ey.P(),ey.j(),ey.ir())),ip.aa),p:()=>{ip.l||(ey.h(ip),ip.l=!0)},destroy:()=>{ip.aa=null,ip.l=!1}},ib={l:!1,provider:null,m:()=>(ib.p(),ib.provider||ib.rg(),ib.provider),rg:()=>{if(!ib.provider){var e=ey.ee(ig.Yh);ib.provider=new K(null!=e?e:30,ex.ea().Xi(),ey.j(),ey.nn(),ex.ea()),ey._(ib.provider)}},p:()=>{ib.l||(ib.rg(),ey.h(ib),ib.l=!0)},destroy:()=>{ib.provider=null,ib.l=!1}},ig={Yo:"allowCrawlerActivity",Zo:"baseUrl",Wh:"noCookies",Da:"disablePushTokenMaintenance",Kh:"enableLogging",$h:"enableSdkAuthentication",Ca:"manageServiceWorkerExternally",Yh:"minimumIntervalBetweenTriggerActionsInSeconds",Xh:"sessionTimeoutInSeconds",Zh:"appVersion",Qh:"appVersionNumber",_a:"serviceWorkerLocation",Ba:"safariWebsitePushId",Xn:"localization",er:"contentSecurityNonce",re:"allowUserSuppliedJavascript",No:"inAppMessageZIndex",Ko:"openInAppMessagesInNewTab",tn:"openCardsInNewTab",en:"openNewsFeedCardsInNewTab",mh:"requireExplicitInAppMessageDismissal",Ea:"doNotLoadFontAwesome",Ia:"deviceId",Aa:"serviceWorkerScope",Na:"sdkFlavor"},im={ut:(e,t,i)=>{var a,r,s=new C,n=ey.P();if(!n)return eo.info(`Not logging event with type "${e}" because the current session ID could not be found.`),s;var o=n.Qo();return s.$e.push(new u(i||(null===(a=ey.ir())||void 0===a?void 0:a.getUserId()),e,new Date().valueOf(),o,t)),s.tt=(null===(r=ey.j())||void 0===r?void 0:r.Vo(s.$e))||!1,s}},iv={l:!1,aa:null,ea:()=>(iv.p(),iv.aa||(iv.aa=new W(ey.j())),iv.aa),p:()=>{iv.l||(ey.h(iv),iv.l=!0)},destroy:()=>{iv.aa=null,iv.l=!1}};function iw(e,t){return!!ey.rr()&&(e instanceof r?eE.ea().logClick(e,t).tt:(eo.error("card "+e4),!1))}function ix(e){return!!ey.rr()&&(e instanceof r?eE.ea().Pt(e).tt:(eo.error("card "+e4),!1))}function iy(e,t){if(!ey.rr())return!1;if(!eK(e))return eo.error("cards must be an array"),!1;for(var i of e)if(!(i instanceof r))return eo.error(`Each card in cards ${e4}`),!1;return eE.ea().Xt(e,t).tt}function iC(e){return iy(e,!0)}function iE(e){return iw(e,!0)}function iS(e,t,i,a,u,h,c,d,p,b,g,f,m,v,w,x,y,C){var E;if(t===r.ds.Ti||t===r.ds.Ii)E=new o(e,i,a,u,h,c,d,p,b,g,f,m,v,w,x,y);else if(t===r.ds.cs)E=new n(e,i,a,u,h,c,d,p,b,g,f,m,v,w,x,y);else if(t===r.ds.ai)E=new s(e,i,u,c,d,p,b,g,f,m,v,w,x,y);else{if(t!==r.ds.ci)return eo.error("Ignoring card with unknown type "+t),null;E=new l(e,i,d,b,v,w)}return C&&(E.test=C),E}function ik(e){if(e[r.ui.Ei])return null;var t=e[r.ui.ps],i=e[r.ui.hs],a=e[r.ui.us],s=e[r.ui.ls],n=e[r.ui.fs],o=e[r.ui.xs],l=eQ(e[r.ui.bs]);return iS(t,i,a,s,n,o,l,l,null,e[r.ui.zs]===r.oi?null:eQ(e[r.ui.zs]),e[r.ui.URL],e[r.ui.ks],e[r.ui.qs],e[r.ui.vs],e[r.ui.ws],e[r.ui.ys],e[r.ui.As],e[r.ui.Bs]||!1)}function iA(e){return iS(e[r.es.ps],e[r.es.hs],e[r.es.us],e[r.es.ls],e[r.es.fs],e[r.es.xs],e1(e[r.es.gs]),e1(e[r.es.bs]),e[r.es.js],e1(e[r.es.zs]),e[r.es.URL],e[r.es.ks],e[r.es.qs],e[r.es.vs],e[r.es.ws],e[r.es.ys],e[r.es.As],e[r.es.Bs]||!1)||void 0}var iN={l:!1,provider:null,m:()=>(iN.p(),iN.provider||(iN.provider=new Z(ey.ir(),ey.j(),ey.v(),ey.tr(),ey.g()),ey._(iN.provider)),iN.provider),p:()=>{iN.l||(ey.h(iN),iN.l=!0)},destroy:()=>{iN.provider=null,iN.l=!1}};function iT(e,t){if(ey.rr())return eS.m().vi(e,t,!0)}function i_(){if(ey.rr())return eS.m().pi(!1)}function iI(e){if(null!=e){var t=e.querySelectorAll(".ab-unread-indicator")[0];null!=t&&(t.className+=" read")}}function iO(e,t){var i,a=t.querySelectorAll(".ab-image-area"),r=0;for(var s of(a.length>0&&(r=a[0].offsetWidth),e))if((i=s.te)&&s.imageUrl&&"number"==typeof s.aspectRatio){var n=r/s.aspectRatio;n&&(i.style.height=`${n}px`)}}function iD(e){ey.rr()&&ey.removeSubscription(e)}function iB(e){return null!=e&&!!e.getAttribute("data-ab-had-top-impression")}function iM(e){null!=e&&e.setAttribute("data-ab-had-top-impression","true")}function iR(e){return null!=e&&!!e.getAttribute("data-ab-had-bottom-impression")}function iz(e){null!=e&&e.setAttribute("data-ab-had-bottom-impression","true")}var iU="data-last-requested-refresh",iP={};function iF(e){e&&(e.className=e.className.replace("ab-show","ab-hide"),setTimeout(()=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Y.Ih));var t=e.getAttribute(e6);null!=t&&iD(t);var i=e.getAttribute("data-listener-id");null!=i&&(window.removeEventListener("scroll",iP[i]),delete iP[i])}function iL(e,t){var i=ew.ea(),a=document.createElement("div");if(a.className="ab-feed-body",a.setAttribute("aria-label","Feed"),a.setAttribute("role","feed"),null==e.lastUpdated){var r=document.createElement("div");r.className="ab-no-cards-message";var s=document.createElement("i");s.className="fa fa-spinner fa-spin fa-4x ab-initial-spinner",r.appendChild(s),a.appendChild(r)}else{var n=!1,o=t=>e.logCardClick(t);for(var u of e.cards){var h=u instanceof l;!h||e.nr()?(a.appendChild(function(e,t,i,a="ltr"){var r=document.createElement("div");r.dir=a,r.className="ab-card ab-effect-card "+e.oe,e.id&&(r.setAttribute("data-ab-card-id",e.id),r.setAttribute("id",e.id)),r.setAttribute("role","article"),r.setAttribute("tabindex","0");var s="",n=!1;e.url&&""!==e.url&&(s=e.url,n=!0);var o=a=>(iI(r),n&&(t(e),t2(s,i,a)),!1);if(e.pinned){var l=document.createElement("div");l.className="ab-pinned-indicator";var u=document.createElement("i");u.className="fa fa-star",l.appendChild(u),r.appendChild(l)}if(e.imageUrl&&""!==e.imageUrl){var h,c=document.createElement("div");c.dir=a,c.className="ab-image-area";var d=document.createElement("img");if(d.setAttribute("src",e.imageUrl),d.onload=()=>{r.style.height="auto"},h="",e.title||e.description||(h="Feed Image"),d.setAttribute("alt",h),c.appendChild(d),r.className+=" with-image",n&&!e.ae){var p=document.createElement("a");p.setAttribute("href",s),p.onclick=o,p.appendChild(c),r.appendChild(p)}else r.appendChild(c)}var b=document.createElement("div");if(b.className="ab-card-body",b.dir=a,e.dismissible){e.logCardDismissal=()=>ix(e);var g=tV("Dismiss Card",void 0,e.dismissCard.bind(e),a);r.appendChild(g),tU(b,tO.ie,e=>{r.className+=" ab-swiped-left",g.onclick(e)}),tU(b,tO.de,e=>{r.className+=" ab-swiped-right",g.onclick(e)})}var f="",m=!1;if(e.title&&""!==e.title&&(f=e.title,m=!0),m){var v=document.createElement("h1");if(v.className="ab-title",v.id=eu.ce(),r.setAttribute("aria-labelledby",v.id),n){var w=document.createElement("a");w.setAttribute("href",s),w.onclick=o,w.appendChild(document.createTextNode(f)),v.appendChild(w)}else v.appendChild(document.createTextNode(f));b.appendChild(v)}var x=document.createElement("div");if(x.className=m?"ab-description":"ab-description ab-no-title",x.id=eu.ce(),r.setAttribute("aria-describedby",x.id),e.description&&x.appendChild(document.createTextNode(e.description)),n){var y=document.createElement("div");y.className="ab-url-area";var C=document.createElement("a");C.setAttribute("href",s),e.linkText&&C.appendChild(document.createTextNode(e.linkText)),C.onclick=o,y.appendChild(C),x.appendChild(y)}b.appendChild(x),r.appendChild(b);var E=document.createElement("div");return E.className="ab-unread-indicator",e.viewed&&(E.className+=" read"),r.appendChild(E),e.te=r,r}(u,o,t,i.Oo())),n=n||!h):eo.error("Received a control card for a legacy news feed. Control cards are only supported with content cards.")}if(!n){var c=document.createElement("div");c.className="ab-no-cards-message",c.innerHTML=i.get("NO_CARDS_MESSAGE")||"",c.setAttribute("role","article"),a.appendChild(c)}}return a}function i$(e,t){if(null!=e&&null!=t){var i=[],a=t.querySelectorAll(".ab-card");e._o||(e._o={});for(var r=0;r<a.length;r++){var s=a[r].getAttribute("data-ab-card-id"),n=tM(a[r]),o=tR(a[r]);if(e._o[s]){n||o||iI(a[r]);continue}var l=iB(a[r]),u=iR(a[r]),h=l,c=u;if(!l&&n&&(l=!0,iM(a[r])),!u&&o&&(u=!0,iz(a[r])),l&&u){if(h&&c)continue;for(var d of e.cards)if(d.id===s){e._o[d.id]=!0,i.push(d);break}}}i.length>0&&e.logCardImpressions(i)}}function iq(e,t){if(null!=e&&null!=t){t.setAttribute("aria-busy","true");var i=t.querySelectorAll(".ab-refresh-button")[0];null!=i&&(i.className+=" fa-spin");var a=new Date().valueOf().toString();t.setAttribute("data-last-requested-refresh",a),setTimeout(()=>{if(t.getAttribute("data-last-requested-refresh")===a){for(var e=t.querySelectorAll(".fa-spin"),i=0;i<e.length;i++)e[i].className=e[i].className.replace(/fa-spin/g,"");var r=t.querySelectorAll(".ab-initial-spinner")[0];if(null!=r){var s=document.createElement("span");s.innerHTML=ew.ea().get("FEED_TIMEOUT_MESSAGE")||"",null!=r.parentNode&&(r.parentNode.appendChild(s),r.parentNode.removeChild(r))}"true"===t.getAttribute("aria-busy")&&t.setAttribute("aria-busy","false")}},Y.Ro),e.sr()}}function iG(e,t,i){var a=document.createElement("div");a.className="ab-feed ab-hide ab-effect-slide",a.setAttribute("role","dialog"),a.setAttribute("aria-label","Feed"),a.setAttribute("tabindex","-1");var r=document.createElement("div");r.className="ab-feed-buttons-wrapper",r.setAttribute("role","group"),a.appendChild(r);var s=document.createElement("i");s.className="fa fa-times ab-close-button",s.setAttribute("aria-label","Close Feed"),s.setAttribute("tabindex","0"),s.setAttribute("role","button");var n=e=>{iF(a),e.stopPropagation()};s.addEventListener("keydown",e=>{e.keyCode!==tF.Wo&&e.keyCode!==tF.Xo||n(e)}),s.onclick=n;var o=document.createElement("i");o.className="fa fa-refresh ab-refresh-button",e&&null==e.lastUpdated&&(o.className+=" fa-spin"),o.setAttribute("aria-label","Refresh Feed"),o.setAttribute("tabindex","0"),o.setAttribute("role","button");var l=t=>{iq(e,a),t.stopPropagation()};o.addEventListener("keydown",e=>{e.keyCode!==tF.Wo&&e.keyCode!==tF.Xo||l(e)}),o.onclick=l,r.appendChild(o),r.appendChild(s),a.appendChild(iL(e,t));var u=()=>i$(e,a);if(a.addEventListener("scroll",u),!i){window.addEventListener("scroll",u);var h=eu.ce();iP[h]=u,a.setAttribute("data-listener-id",h)}return a}function ij(e,t,i,a,s){if(eK(t)){var n=[];for(var o of t)if(o instanceof r){if(o.url&&tc.test(o.url)&&to(ts(o.url))){eo.error(tr(ta.Tr,"Content Card"));continue}n.push(o)}if(e.cards=n,e.lastUpdated=i,null!=a){if(a.setAttribute("aria-busy","false"),null==e.lastUpdated)iF(a);else{var l=a.querySelectorAll(".ab-feed-body")[0];if(null!=l){var u=iL(e,s);l.parentNode&&l.parentNode.replaceChild(u,l),i$(e,u.parentNode)}}}}}function iX(e,t){e&&t.setAttribute(e6,e)}function iH(e){if(ey.rr())for(var t=document.querySelectorAll(".ab-feed"),i=0;i<t.length;i++)(null==e||null!=e&&t[i].parentNode===e)&&iF(t[i])}function iK(e,t){if(ey.rr()){tH();var i,a=!1;null==e&&(e=document.body,a=!0);var r=ey.ee(ig.tn)||ey.ee(ig.en)||!1,s=eS.m().pi(!1);"function"==typeof t&&ij(s,t(s.cards.slice()),s.lastUpdated,null,r);var n=iG(s,r,a),o=eS.m(),l=o.Gs();(null==s.lastUpdated||new Date().valueOf()-s.lastUpdated.valueOf()>Q.dr)&&(null==l||new Date().valueOf()-l>Q.dr)&&(eo.info(`Cached content cards were older than max TTL of ${Q.dr} ms, requesting an update from the server.`),iq(s,n),o.Hs(new Date().valueOf()));var u=new Date().valueOf();iX(iV(function(e){var i=n.querySelectorAll(".ab-refresh-button")[0];if(null!=i){var a,o=a=500-(new Date().valueOf()-u),l=n.getAttribute(iU);l&&(isNaN(o=parseInt(l))||(a-=new Date().valueOf()-o)),setTimeout(function(){i.className=i.className.replace(/fa-spin/g,"")},Math.max(a,0))}var h=e.cards;"function"==typeof t&&(h=t(h.slice())),ij(s,h,e.lastUpdated,n,r)}),n);var h=function(e){for(var t=e.querySelectorAll(".ab-feed"),i=null,r=0;r<t.length;r++)t[r].parentNode===e&&(i=t[r]);null!=i?(iF(i),null!=i.parentNode&&i.parentNode.replaceChild(n,i)):e.appendChild(n),setTimeout(function(){n.className=n.className.replace("ab-hide","ab-show")},0),a&&n.focus(),i$(s,n),iO(s.cards,e)};null!=e?h(e):window.onload=(i=window.onload,function(){"function"==typeof i&&i(new Event("oldLoad")),h(document.body)})}}function iV(e){if(ey.rr()){var t=eS.m(),i=t.qt(e);if(!t.Ct()){var a=ey.nn();if(a){var r=a.rn(()=>{t.vi(void 0,void 0,!0)});r&&t.Tt(r)}}return i}}function iJ(e,t){ey.rr()&&(document.querySelectorAll(".ab-feed").length>0?iH():iK(e,t))}var iW={GOOGLE_TAG_MANAGER:"gg",MPARTICLE:"mp",SEGMENT:"sg",TEALIUM:"tl",MANUAL:"manu",NPM:"npm",CDN:"wcd",SHOPIFY:"shp"};function iY(e){if(ey.rr()){var t=ey.g();if(t){if(!eK(e))return eo.error("Cannot set SDK metadata because metadata is not an array."),!1;for(var i of e)if(!eH(iW,i,"sdkMetadata contained an invalid value.","BrazeSdkMetadata"))return!1;return t.addSdkMetadata(e),!0}}}function iZ(e,t){if(ey.rr()){if(null==e||0===e.length||e!=e)return void eo.error("changeUser requires a non-empty userId.");if(tt(e)>c.ur)return void eo.error(`Rejected user id "${e}" because it is longer than ${c.ur} bytes.`);if(null==t||tf(t,"set signature for new user","signature")){var i=ey.nn();i&&i.changeUser(e.toString(),ey.ar(),t)}}}function iQ(){eo.info("Destroying Braze instance"),ey.destroy(!0)}function i0(){var e=ey.nn();e&&e.requestImmediateDataFlush();var t=new f.se(null,!0),a="This-cookie-will-expire-in-"+t.le();t.store(ty.me,a);var r=i.Ls.Fs;new i(r,eo).setItem(r.Ms.pe,r.be,!0),eo.info("disableSDK was called"),ey.destroy(!1),ey.fe(!0)}function i1(){new f.se(null,!0).remove(ty.me);var e=i.Ls.Fs;new i(e,eo).ge(e.Ms.pe,e.be),eo.info("enableSDK was called"),ey.destroy(!1),ey.fe(!1)}function i3(e){if(ey.rr()){var t=ey.ue();if(t){var i=t.ve().id;if("function"!=typeof e)return i;eo.warn("The callback for getDeviceId is deprecated. You can access its return value directly instead (e.g. `const id = braze.getDeviceId()`)"),e(i)}}}function i5(e,t){return ey.initialize(e,t)}function i2(){return!!new f.se(null,!0).gr(ty.me)}function i4(){return ey._t()}function i8(e,t){if(!ey.rr())return!1;if(null==e||e.length<=0)return eo.error(`logCustomEvent requires a non-empty eventName, got "${e}". Ignoring event.`),!1;if(!tp(e,"log custom event","the event name"))return!1;var[i,a]=tm(t,"logCustomEvent","eventProperties",`log custom event "${e}"`,"event");if(!i)return!1;var r=ey.v();if(r&&r.je(e))return eo.info(`Custom Event "${e}" is blocklisted, ignoring.`),!1;var s=eC.ut(e$.CustomEvent,{n:e,p:a});if(s.tt)for(var n of(eo.info(`Logged custom event "${e}".`),s.$e))ib.m().Ce(tG.Ee,[e,t],n);return s.tt}function i7(e,t,i,a,r){if(!ey.rr())return!1;if(null==i&&(i="USD"),null==a&&(a=1),null==e||e.length<=0)return eo.error(`logPurchase requires a non-empty productId, got "${e}", ignoring.`),!1;if(!tp(e,"log purchase","the purchase name"))return!1;if(null==t||isNaN(parseFloat(t.toString())))return eo.error(`logPurchase requires a numeric price, got ${t}, ignoring.`),!1;var s=parseFloat(t.toString()).toFixed(2);if(null==a||isNaN(parseInt(a.toString())))return eo.error(`logPurchase requires an integer quantity, got ${a}, ignoring.`),!1;var n=parseInt(a.toString());if(n<1||n>100)return eo.error(`logPurchase requires a quantity >1 and <100, got ${n}, ignoring.`),!1;if(-1===["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BRL","BSD","BTC","BTN","BWP","BYR","BZD","CAD","CDF","CHF","CLF","CLP","CNY","COP","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GGP","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","IMP","INR","IQD","IRR","ISK","JEP","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MTL","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XCD","XDR","XOF","XPD","XPF","XPT","YER","ZAR","ZMK","ZMW","ZWL"].indexOf(i=null!=i?i.toUpperCase():i))return eo.error(`logPurchase requires a valid currencyCode, got ${i}, ignoring.`),!1;var[o,l]=tm(r,"logPurchase","purchaseProperties",`log purchase "${e}"`,"purchase");if(!o)return!1;var u=ey.v();if(u&&u.Dr(e))return eo.info(`Purchase "${e}" is blocklisted, ignoring.`),!1;var h=eC.ut(e$.Pr,{pid:e,c:i,p:s,q:n,pr:l});if(h.tt)for(var c of(eo.info(`Logged ${n} purchase${n>1?"s":""} of "${e}" for ${i} ${s}.`),h.$e))ib.m().Ce(tG.Rr,[e,r],c);return h.tt}function i6(){if(ey.rr()){var e=ey.nn();if(e){e.openSession();var t=i.Ls.Fs,a=new i(t,eo);a.cr(t.Ms.jr,(i,r)=>{var s=r.lastClick,n=r.trackingString;eo.info(`Firing push click trigger from ${n} push click at ${s}`);var o=e.lr(s,n),l=function(){ib.m().Ce(tG.hr,[n],o)};e.br(l,l),a.ge(t.Ms.jr,i)}),a.Ns(t.Ms.kr,function(t){e.vr(t)})}}}function i9(){ey.rr()&&ey.removeAllSubscriptions()}function ae(e){if(ey.rr()){var t=ey.nn();t&&t.requestImmediateDataFlush(e)}}function at(e){eo.setLogger(e)}function ai(e){if(!ey.rr()||""===e||!tf(e,"set signature","signature",!1))return!1;var t=ey.Sr();return!!t&&(t.setSdkAuthenticationSignature(e),!0)}function aa(e){var t;if(ey.rr())return null===(t=ey.Sr())||void 0===t?void 0:t.subscribeToSdkAuthenticationFailures(e)}function ar(){eo.toggleLogging()}function as(){var e=ey.j();if(null==e)return void eo.warn(e7);e.clearData();for(var t=eW(i.Ls),a=0;a<t.length;a++){var r=t[a],s=i.Ls[r];new i(s,eo).clearData()}if(ey.rr())for(var n of ey.ar())n.clearData(!0)}var an={l:!1,provider:null,m:()=>(an.p(),an.provider||(an.provider=new ee(ey.j(),ey.nn()),ey._(an.provider)),an.provider),p:()=>{an.l||(ey.h(an),an.l=!0)},destroy:()=>{an.provider=null,an.l=!1}};function ao(){if(ey.rr())return eI.m().vi()}function al(){if(ey.rr())return eI.m().Bi()}function au(){if(ey.rr())for(var e=document.querySelectorAll(".ab-feed"),t=0;t<e.length;t++)iF(e[t])}function ah(){var e;if(ey.rr())return null===(e=ey.g())||void 0===e?void 0:e.zr(eq.Fr).tt}function ac(e,t,i){if(ey.rr()){tH();var a,r=(e,t)=>{if(null==t)return e;for(var i=[],a=0;a<t.length;a++)i.push(t[a].toLowerCase());for(var r=[],s=0;s<e.length;s++){for(var n=[],o=e[s].categories||[],l=0;l<o.length;l++)n.push(o[l].toLowerCase());(function(e,...t){null==e&&(e=[]);for(var i=[],a=arguments.length,r=0,s=e.length;r<s;r++){var n=e[r];if(-1===i.indexOf(n)){var o=1;for(o=1;o<a&&-1!==arguments[o].indexOf(n);o++);o===a&&i.push(n)}}return i})(n,i).length>0&&r.push(e[s])}return r},s=ey.ee(ig.tn)||ey.ee(ig.en)||!1,n=!1;null==e&&(e=document.body,n=!0);var o,l=!1;null==t?(ij(o=eI.m().Bi(),r(o.cards,i),o.lastUpdated,null,s),l=!0):o=new et(r(t,i),new Date);var u=iG(o,s,n);if(l){(null==o.lastUpdated||new Date().valueOf()-o.lastUpdated.valueOf()>et.dr)&&(eo.info(`Cached feed was older than max TTL of ${et.dr} ms, requesting an update from the server.`),iq(o,u));var h=new Date().valueOf();iX(ad(function(e){var t=u.querySelectorAll(".ab-refresh-button")[0];if(null!=t){a=500-(new Date().valueOf()-h);var a,n=u.getAttribute(iU);if(n){var l=parseInt(n);isNaN(l)||(a-=new Date().valueOf()-l)}setTimeout(function(){t.className=t.className.replace(/fa-spin/g,"")},Math.max(a,0))}ij(o,r(e.cards,i),e.lastUpdated,u,s)}),u)}var c=e=>{for(var t=e.querySelectorAll(".ab-feed"),i=null,a=0;a<t.length;a++)t[a].parentNode===e&&(i=t[a]);null!=i?(iF(i),i.parentNode&&i.parentNode.replaceChild(u,i)):e.appendChild(u),setTimeout(function(){u.className=u.className.replace("ab-hide","ab-show")},0),n&&u.focus(),ah(),i$(o,u),o&&iO(o.cards,e)};null!=e?c(e):window.onload=(a=window.onload,function(){"function"==typeof a&&a(new Event("oldLoad")),c(document.body)})}}function ad(e){if(ey.rr())return eI.m().qt(e)}function ap(e,t,i){ey.rr()&&(document.querySelectorAll(".ab-feed").length>0?au():ac(e,t,i))}function ab(){if(ey.rr())return eb.isPushBlocked()}function ag(){if(ey.rr())return eb.isPushPermissionGranted()}function af(){if(ey.rr())return eb.isPushSupported()}var am={l:!1,aa:null,ea:()=>(am.p(),am.aa||(am.aa=new ei(ey.mr(),ey.Ma(),ey.ue(),ey.Z(),ey.ee(ig._a),ey.ee(ig.Aa),ey.ee(ig.Ba),ey.v(),ey.ee(ig.Ca),ey.ee(ig.Da),ey.j())),am.aa),p:()=>{am.l||(ey.h(am),am.l=!0)},destroy:()=>{am.aa=null,am.l=!1}};function av(e,t){if(ey.rr())return eD.ea().subscribe((t,i,a)=>{var r=ey.nn();r&&r.requestImmediateDataFlush(),"function"==typeof e&&e(t,i,a)},t)}function aw(e,t){if(ey.rr())return eD.ea().unsubscribe(e,t)}var ax={l:!1,provider:null,m:()=>(ax.p(),ax.provider||(ax.provider=new er(ey.v(),ey.g(),ey.j(),ey.P()),ey._(ax.provider)),ax.provider),p:()=>{ax.l||(ey.h(ax),ax.l=!0)},destroy:()=>{ax.provider=null,ax.l=!1}};function ay(e,t,i=!1){if(ey.rr())return ez.m().refreshFeatureFlags(e,t,i)}function aC(e,t){ay(e,t)}function aE(e){if(ey.rr()){var t=ey.v();if(t&&!t.Be())return null;var i=ez.m().Ue();return i[e]?i[e]:null}}function aS(){if(ey.rr()){var e=[],t=ey.v();if(t&&!t.Be())return e;var i=ez.m().Ue();for(var a in i)e.push(i[a]);return e}}function ak(e){if(ey.rr()){var t=ez.m();if(t.Ye()){var i=aS();i&&"function"==typeof e&&e(i)}return t.qt(e)}}function aA(e){if(ey.rr()){if(!e)return!1;var t="Not logging a feature flag impression. The feature flag was not part of any matching experiment.",i=ez.m().Ue();if(!i[e])return eo.info(t),!1;var a=i[e].trackingString;if(!a)return eo.info(t),!1;var r=ez.m()._e();return r[a]?(eo.info("Not logging another feature flag impression. This ID was already logged this session."),!1):(r[a]=!0,ez.m().He(r),eC.ut(e$.yr,{fid:e,fts:a}).tt)}}var aN={l:!1,provider:null,m:()=>(aN.p(),aN.provider||(aN.provider=new en(ey.v(),ey.g(),ey.j(),ey.P()),ey._(aN.provider)),aN.provider),p:()=>{aN.l||(ey.h(aN),aN.l=!0)},destroy:()=>{aN.provider=null,aN.l=!1}};function aT(e,t){var i=e[t];if(!i)return null;var a=i.Gt,r=new Date().valueOf();return -1!==a&&1e3*a<r?(eo.info(`Banner with ID: ${i.id} and placement ID: ${t} has expired.`),null):i}function a_(e){if(ey.rr()){var t=eP.m();return t.L()?aT(t.dt(),e):null}}var aI="data-ab-banner-placement-id";function aO(e,t){if(e.Jt()){var i;return(i=document.createElement("div")).id=e.id,i.className="ab-html-control-banner",i.setAttribute(aI,e.placementId),i}var a=document.createElement("iframe");return a.id=e.id,t&&a.setAttribute("nonce",t),a.className="ab-html-banner",a.setAttribute(aI,e.placementId),a.setAttribute("title","Banner"),ii(a,e.html,t),a.onload=()=>{var t=a.contentWindow,i=t.document.getElementsByTagName("title");i&&i.length>0&&a.setAttribute("title",i[0].textContent||"");var r=Object.assign(Object.assign({},ie(a,()=>{Promise.resolve().then(function(){return eO}).then(e=>{ey._t()?e.showFeed():eo.error(e7)})})),{logClick:function(){(function(e,t){if(ey.rr()){if(!(e instanceof es))return eo.error("Banner argument to logBannerClick must be an Banner object.");var i=eP.m(),a=i.dt();0===eW(a).length?eo.info("Not logging banner click. No banners exist."):a[e.placementId]?i.lt(e,t):eo.info(`Not logging banner click for ID ${e.placementId}. The placement ID did not correspond to any banner.`)}})(e,...arguments)},closeMessage:function(){}});t.brazeBridge=r,t.appboyBridge=r,t.dispatchEvent(new CustomEvent("ab.BridgeReady"))},a}function aD(e){if(ey.rr()){if(!e||e.length<=0)return!1;var t=eP.m(),i=t.dt();if(0===eW(i).length)return eo.info("Not logging banners impression. No banners exist."),!1;var a=t.Nt(),r=[];for(var s of e){var n=i[s];n?a[n.placementId]?eo.info(`Not logging banners impression for ID ${s}. This ID was already logged this session.`):(a[n.placementId]=!0,r.push(n.id)):eo.info(`Not logging banners impression for ID ${s}. The placement ID did not correspond to any banner.`)}return 0!==r.length&&(t.xt(a),eC.ut(e$.ro,{ids:r}).tt)}}function aB(){for(var e=document.querySelectorAll(".ab-html-banner, .ab-html-control-banner"),t=[],i=0;i<e.length;i++){var a=e[i],r=a.getAttribute(aI);if(r){var s=ek.oo(a),n=ek.no(a);if(!s||!n){var o=tM(a),l=tR(a);o&&!s&&iM(a),l&&!n&&iz(a),ek.oo(a)&&ek.no(a)&&t.push(r)}}}t.length>0&&aD(t)}function aM(){if(ey.rr()){var e={},t=ey.v();if(t&&!t.Dt())return e;var i=eP.m().dt();for(var a in i)e[a]=aT(i,a);return e}}function aR(e){if(ey.rr()){var t,i=eP.m();if(i.It()){var a=aM();a&&"function"==typeof e&&e(a)}var r=i.qt(e);if(!i.Ct()){var s=null===(t=ey.nn())||void 0===t?void 0:t.rn(()=>{var e=i.ht();e&&e.length>0&&i.$(e)});s&&i.Tt(s)}return r}}function az(e,t){if(ey.rr()){if(!e)return void eo.error("Not inserting banner: banner was not provided.");if(!t)return void eo.error("Not inserting banner: parentNode was not provided.");if(!ey.ee(ig.re))return void eo.error("Banners are disabled. Use the 'allowUserSuppliedJavascript' option for braze.initialize to enable these messages.");tj(void 0,"banner",".ab-html-banner{width:100%;height:100%;border:none}.ab-html-control-banner{width:0;height:0;margin:0;border:none}");var i=aO(e,ey.ee(ig.er)),a=aR(a=>{var r,s=a[e.placementId];s?t.replaceChildren(aO(s,ey.ee(ig.er))):(null!=(r=i.getAttribute(e6))&&iD(r),i&&i.parentNode&&i.parentNode.removeChild(i))});a&&i.setAttribute(e6,a),t.replaceChildren(i),tB(window,"scroll",aB),aB()}}function aU(e,t,i){if(!ey.rr())return void eo.warn(e7);var a=ey.v();if(a){if(!eK(e)||0===e.length)return void eo.warn("placementIds should be a non-empty array.");if(!ey.ee(ig.re))return void eo.error("Banners are disabled. Use the 'allowUserSuppliedJavascript' option for braze.initialize to enable these messages.");var r=eP.m();if(eP.m().Rt())return void eo.warn("Banners can be refreshed only once per session per user.");if(!a||!r.L())return void a.A(()=>{aU(e,t,i)});var s=a.ne();e.length>s&&(eo.warn(`Number of placement IDs requested exceeds the max allowed. Trimming placementIds array from length ${e.length} to ${s} (max allowed).`),e=e.slice(0,s)),0!==(e=e.filter(e=>!!td.test(e)||(eo.warn(`Placement ID should be a valid utf8 string with no whitespaces, filtering out: ${e}`),!1))).length&&(eo.info(`Requesting banners for placement IDs: ${JSON.stringify(e)}`),eP.m().$(e,t,i))}}return e({addSdkMetadata:iY,automaticallyShowInAppMessages:ih,changeUser:iZ,deferInAppMessage:ic,destroy:iQ,destroyFeed:au,disableSDK:i0,enableSDK:i1,getAllBanners:aM,getAllFeatureFlags:aS,getBanner:a_,getCachedContentCards:i_,getCachedFeed:al,getDeferredInAppMessage:id,getDeviceId:i3,getFeatureFlag:aE,getUser:t5,handleBrazeAction:t4,hideContentCards:iH,initialize:i5,insertBanner:az,isDisabled:i2,isInitialized:i4,isPushBlocked:ab,isPushPermissionGranted:ag,isPushSupported:af,logBannerImpressions:aD,logCardClick:iw,logCardDismissal:ix,logCardImpressions:iy,logContentCardClick:iE,logContentCardImpressions:iC,logCustomEvent:i8,logFeatureFlagImpression:aA,logFeedDisplayed:ah,logInAppMessageButtonClick:ia,logInAppMessageClick:tY,logInAppMessageHtmlClick:t6,logInAppMessageImpression:tW,logPurchase:i7,openSession:i6,refreshFeatureFlags:aC,removeAllSubscriptions:i9,removeSubscription:iD,requestBannersRefresh:aU,requestContentCardsRefresh:iT,requestFeedRefresh:ao,requestImmediateDataFlush:ae,requestPushPermission:av,setLogger:at,setSdkAuthenticationSignature:ai,showContentCards:iK,showFeed:ac,showInAppMessage:il,subscribeToBannersUpdates:aR,subscribeToContentCardsUpdates:iV,subscribeToFeatureFlagsUpdates:ak,subscribeToFeedUpdates:ad,subscribeToInAppMessage:iu,subscribeToSdkAuthenticationFailures:aa,toggleContentCards:iJ,toggleFeed:ap,toggleLogging:ar,unregisterPush:aw,wipeData:as}),[()=>{eo=eF,el=eL,eu=eG,(i=class{constructor(e,t){this.database=e,this.vd=t,this.parent="undefined"==typeof window?self:window,this.database=e,this.vd=t}Dd(){if("indexedDB"in this.parent)return this.parent.indexedDB}isSupported(){var e;try{if(null==this.Dd())return!1;var t=null===(e=this.Dd())||void 0===e?void 0:e.open("Braze IndexedDB Support Test");if(t&&(t.onupgradeneeded=()=>t.result.close(),t.onsuccess=()=>t.result.close()),"undefined"!=typeof window){var i=window,a=i.chrome||i.browser||i.pd;if(a&&a.runtime&&a.runtime.id)return this.vd.info("Not using IndexedDB for storage because we are running inside an extension"),!1}return!0}catch(e){return this.vd.info("Not using IndexedDB for storage due to following error: "+e),!1}}Bd(e,t){var i,a=null===(i=this.Dd())||void 0===i?void 0:i.open(this.database.Sd,this.database.VERSION);if(null==a)return"function"==typeof t&&t(),!1;var r=this;return a.onupgradeneeded=e=>{r.vd.info("Upgrading indexedDB "+r.database.Sd+" to v"+r.database.VERSION+"...");var t,i=null===(t=e.target)||void 0===t?void 0:t.result;for(var a in r.database.Ms)r.database.Ms.hasOwnProperty(a)&&!i.objectStoreNames.contains(r.database.Ms[a])&&i.createObjectStore(r.database.Ms[a])},a.onsuccess=i=>{var a,s=null===(a=i.target)||void 0===a?void 0:a.result;s.onversionchange=()=>{s.close(),"function"==typeof t&&t(),r.vd.error("Needed to close the database unexpectedly because of an upgrade in another tab")},e(s)},a.onerror=e=>{var i;return r.vd.info("Could not open indexedDB "+r.database.Sd+" v"+r.database.VERSION+": "+(null===(i=e.target)||void 0===i?void 0:i.errorCode)),"function"==typeof t&&t(),!0},!0}setItem(e,t,i,a,r){if(!this.isSupported())return"function"==typeof r&&r(),!1;var s=this;return this.Bd(n=>{if(!n.objectStoreNames.contains(e))return s.vd.error("Could not store object "+t+" in "+e+" on indexedDB "+s.database.Sd+" - "+e+" is not a valid objectStore"),"function"==typeof r&&r(),void n.close();var o=n.transaction([e],"readwrite");o.oncomplete=()=>n.close();var l=o.objectStore(e).put(i,t);l.onerror=()=>{s.vd.error("Could not store object "+t+" in "+e+" on indexedDB "+s.database.Sd),"function"==typeof r&&r()},l.onsuccess=()=>{"function"==typeof a&&a()}},r)}getItem(e,t,i){if(!this.isSupported())return!1;var a=this;return this.Bd(r=>{if(!r.objectStoreNames.contains(e))return a.vd.error("Could not retrieve object "+t+" in "+e+" on indexedDB "+a.database.Sd+" - "+e+" is not a valid objectStore"),void r.close();var s=r.transaction([e],"readonly");s.oncomplete=()=>r.close();var n=s.objectStore(e).get(t);n.onerror=()=>{a.vd.error("Could not retrieve object "+t+" in "+e+" on indexedDB "+a.database.Sd)},n.onsuccess=e=>{var t,a=null===(t=e.target)||void 0===t?void 0:t.result;null!=a&&i(a)}})}cr(e,t,i){if(!this.isSupported())return"function"==typeof i&&i(),!1;var a=this;return this.Bd(r=>{if(!r.objectStoreNames.contains(e))return a.vd.error("Could not retrieve last record from "+e+" on indexedDB "+a.database.Sd+" - "+e+" is not a valid objectStore"),"function"==typeof i&&i(),void r.close();var s=r.transaction([e],"readonly");s.oncomplete=()=>r.close();var n=s.objectStore(e).openCursor(null,"prev");n.onerror=()=>{a.vd.error("Could not open cursor for "+e+" on indexedDB "+a.database.Sd),"function"==typeof i&&i()},n.onsuccess=e=>{var a,r=null===(a=e.target)||void 0===a?void 0:a.result;null!=r&&null!=r.value&&null!=r.key?t(r.key,r.value):"function"==typeof i&&i()}},i)}ge(e,t){if(!this.isSupported())return!1;var i=this;return this.Bd(a=>{if(!a.objectStoreNames.contains(e))return i.vd.error("Could not delete record "+t+" from "+e+" on indexedDB "+i.database.Sd+" - "+e+" is not a valid objectStore"),void a.close();var r=a.transaction([e],"readwrite");r.oncomplete=()=>a.close(),r.objectStore(e).delete(t).onerror=()=>{i.vd.error("Could not delete record "+t+" from "+e+" on indexedDB "+i.database.Sd)}})}Ns(e,t){if(!this.isSupported())return!1;var i=this;return this.Bd(a=>{if(!a.objectStoreNames.contains(e))return i.vd.error("Could not retrieve objects from "+e+" on indexedDB "+i.database.Sd+" - "+e+" is not a valid objectStore"),void a.close();var r=a.transaction([e],"readwrite");r.oncomplete=()=>a.close();var s=r.objectStore(e),n=s.openCursor(),o=[];n.onerror=()=>{o.length>0?(i.vd.info("Cursor closed midway through for "+e+" on indexedDB "+i.database.Sd),t(o)):i.vd.error("Could not open cursor for "+e+" on indexedDB "+i.database.Sd)},n.onsuccess=e=>{var i,a=null===(i=e.target)||void 0===i?void 0:i.result;null!=a?(null!=a.value&&null!=a.key&&(s.delete(a.key).onsuccess=()=>{o.push(a.value)}),"function"==typeof a.continue&&a.continue()):o.length>0&&t(o)}})}clearData(){if(!this.isSupported())return!1;var e=[];for(var t in this.database.Ms)this.database.Ms.hasOwnProperty(t)&&this.database.Ms[t]!==this.database.Ms.pe&&e.push(this.database.Ms[t]);var i=this;return this.Bd(function(t){var a=t.transaction(e,"readwrite");a.oncomplete=()=>t.close();for(var r=0;r<e.length;r++){var s=e[r];a.objectStore(s).clear().onerror=function(){i.vd.error("Could not clear "+this.source.name+" on indexedDB "+i.database.Sd)}}a.onerror=function(){i.vd.error("Could not clear object stores on indexedDB "+i.database.Sd)}})}}).Ls={Fs:{Sd:"AppboyServiceWorkerAsyncStorage",VERSION:6,Ms:{Nu:"data",jr:"pushClicks",cu:"pushSubscribed",Cd:"fallbackDevice",Js:"cardUpdates",pe:"optOut",kr:"pendingData",qh:"sdkAuthenticationSignature"},be:1}},a=class{constructor(){this.Mi={}}Ft(e){if("function"!=typeof e)return null;var t=eu.ce();return this.Mi[t]=e,t}removeSubscription(e){delete this.Mi[e]}removeAllSubscriptions(){this.Mi={}}uc(){return Object.keys(this.Mi).length}X(e){var t=[];for(var i in this.Mi){var a=this.Mi[i];t.push(a(e))}return t}},e("Card",r=class e{constructor(e,t,i,a,r,s,n,o,l,u,h,c,d,p,b,g){this.id=e,this.viewed=t,this.title=i,this.imageUrl=a,this.description=r,this.created=s,this.updated=n,this.categories=o,this.expiresAt=l,this.url=u,this.linkText=h,this.aspectRatio=c,this.extras=d,this.pinned=p,this.dismissible=b,this.clicked=g,this.id=e,this.viewed=t||!1,this.title=i||"",this.imageUrl=a,this.description=r||"",this.created=s||null,this.updated=n||null,this.categories=o||[],this.expiresAt=l||null,this.url=u,this.linkText=h,null==c?this.aspectRatio=null:(c=parseFloat(c.toString()),this.aspectRatio=isNaN(c)?null:c),this.extras=d||{},this.pinned=p||!1,this.dismissible=b||!1,this.dismissed=!1,this.clicked=g||!1,this.isControl=!1,this.test=!1,this.ti=null,this.ii=null,this.si=null}subscribeToClickedEvent(e){return this.hi().Ft(e)}subscribeToDismissedEvent(e){return this.ni().Ft(e)}removeSubscription(e){this.hi().removeSubscription(e),this.ni().removeSubscription(e)}removeAllSubscriptions(){this.hi().removeAllSubscriptions(),this.ni().removeAllSubscriptions()}dismissCard(){if(this.dismissible&&!this.dismissed){"function"==typeof this.logCardDismissal&&this.logCardDismissal();var t=this.te;!t&&this.id&&(t=document.getElementById(this.id)),t&&(t.style.height=t.offsetHeight+"px",t.className=t.className+" ab-hide",setTimeout(function(){t&&t.parentNode&&(t.style.height="0",t.style.margin="0",setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},e.li))},500))}}hi(){return null==this.ti&&(this.ti=new a),this.ti}ni(){return null==this.ii&&(this.ii=new a),this.ii}ts(){var t=new Date().valueOf();return!(null!=this.si&&t-this.si<e.ei)&&(this.si=t,this.viewed=!0,!0)}$t(){this.viewed=!0,this.clicked=!0,this.hi().X()}Qt(){return!(!this.dismissible||this.dismissed)&&(this.dismissed=!0,this.ni().X(),!0)}ri(t){if(null==t||t[e.ui.ps]!==this.id)return!0;if(t[e.ui.Ei])return!1;if(null!=t[e.ui.bs]&&null!=this.updated&&parseInt(t[e.ui.bs])<eZ(this.updated.valueOf()))return!0;if(t[e.ui.us]&&!this.viewed&&(this.viewed=!0),t[e.ui.As]&&!this.clicked&&(this.clicked=t[e.ui.As]),null!=t[e.ui.ls]&&(this.title=t[e.ui.ls]),null!=t[e.ui.fs]&&(this.imageUrl=t[e.ui.fs]),null!=t[e.ui.xs]&&(this.description=t[e.ui.xs]),null!=t[e.ui.bs]){var i,a=eQ(t[e.ui.bs]);null!=a&&(this.updated=a)}if(null!=t[e.ui.zs]&&(i=t[e.ui.zs]===e.oi?null:eQ(t[e.ui.zs]),this.expiresAt=i),null!=t[e.ui.URL]&&(this.url=t[e.ui.URL]),null!=t[e.ui.ks]&&(this.linkText=t[e.ui.ks]),null!=t[e.ui.qs]){var r=parseFloat(t[e.ui.qs].toString());this.aspectRatio=isNaN(r)?null:r}return null!=t[e.ui.vs]&&(this.extras=t[e.ui.vs]),null!=t[e.ui.ws]&&(this.pinned=t[e.ui.ws]),null!=t[e.ui.ys]&&(this.dismissible=t[e.ui.ys]),null!=t[e.ui.Bs]&&(this.test=t[e.ui.Bs]),!0}bt(){eo.error("Must be implemented in a subclass")}}),r.oi=-1,r.ui={ps:"id",us:"v",ys:"db",Ei:"r",bs:"ca",ws:"p",zs:"ea",vs:"e",hs:"tp",fs:"i",ls:"tt",xs:"ds",URL:"u",ks:"dm",qs:"ar",As:"cl",Bs:"t"},r.ds={cs:"captioned_image",Ti:"text_announcement",Ii:"short_news",ai:"banner_image",ci:"control"},r.es={ps:"id",us:"v",ys:"db",gs:"cr",bs:"ca",ws:"p",js:"t",zs:"ea",vs:"e",hs:"tp",fs:"i",ls:"tt",xs:"ds",URL:"u",ks:"dm",qs:"ar",As:"cl",Bs:"s"},r.Ni={mi:"ADVERTISING",Si:"ANNOUNCEMENTS",Ai:"NEWS",Di:"SOCIAL"},r.li=400,r.ei=1e4,e("ImageOnly",s=class extends r{constructor(e,t,i,a,r,s,n,o,l,u,h,c,d,p){super(e,t,null,i,null,a,r,s,n,o,l,u,h,c,d,p),this.oe="ab-image-only",this.ae=!1,this.test=!1}bt(){var e={};return e[r.es.hs]=r.ds.ai,e[r.es.ps]=this.id,e[r.es.us]=this.viewed,e[r.es.fs]=this.imageUrl,e[r.es.bs]=this.updated,e[r.es.gs]=this.created,e[r.es.js]=this.categories,e[r.es.zs]=this.expiresAt,e[r.es.URL]=this.url,e[r.es.ks]=this.linkText,e[r.es.qs]=this.aspectRatio,e[r.es.vs]=this.extras,e[r.es.ws]=this.pinned,e[r.es.ys]=this.dismissible,e[r.es.As]=this.clicked,e[r.es.Bs]=this.test,e}}),e("CaptionedImage",n=class extends r{constructor(e,t,i,a,r,s,n,o,l,u,h,c,d,p,b,g){super(e,t,i,a,r,s,n,o,l,u,h,c,d,p,b,g),this.oe="ab-captioned-image",this.ae=!0,this.test=!1}bt(){var e={};return e[r.es.hs]=r.ds.cs,e[r.es.ps]=this.id,e[r.es.us]=this.viewed,e[r.es.ls]=this.title,e[r.es.fs]=this.imageUrl,e[r.es.xs]=this.description,e[r.es.bs]=this.updated,e[r.es.gs]=this.created,e[r.es.js]=this.categories,e[r.es.zs]=this.expiresAt,e[r.es.URL]=this.url,e[r.es.ks]=this.linkText,e[r.es.qs]=this.aspectRatio,e[r.es.vs]=this.extras,e[r.es.ws]=this.pinned,e[r.es.ys]=this.dismissible,e[r.es.As]=this.clicked,e[r.es.Bs]=this.test,e}}),e("ClassicCard",o=class extends r{constructor(e,t,i,a,r,s,n,o,l,u,h,c,d,p,b,g){super(e,t,i,a,r,s,n,o,l,u,h,c,d,p,b,g),this.oe="ab-classic-card",this.ae=!0}bt(){var e={};return e[r.es.hs]=r.ds.Ii,e[r.es.ps]=this.id,e[r.es.us]=this.viewed,e[r.es.ls]=this.title,e[r.es.fs]=this.imageUrl,e[r.es.xs]=this.description,e[r.es.bs]=this.updated,e[r.es.gs]=this.created,e[r.es.js]=this.categories,e[r.es.zs]=this.expiresAt,e[r.es.URL]=this.url,e[r.es.ks]=this.linkText,e[r.es.qs]=this.aspectRatio,e[r.es.vs]=this.extras,e[r.es.ws]=this.pinned,e[r.es.ys]=this.dismissible,e[r.es.As]=this.clicked,e[r.es.Bs]=this.test,e}}),e("ControlCard",l=class extends r{constructor(e,t,i,a,r,s){super(e,t,null,null,null,null,i,null,a,null,null,null,r,s),this.isControl=!0,this.oe="ab-control-card",this.ae=!1}bt(){var e={};return e[r.es.hs]=r.ds.ci,e[r.es.ps]=this.id,e[r.es.us]=this.viewed,e[r.es.bs]=this.updated,e[r.es.zs]=this.expiresAt,e[r.es.vs]=this.extras,e[r.es.ws]=this.pinned,e[r.es.Bs]=this.test,e}}),u=class e{constructor(e,t,i,a,r){this.userId=e,this.type=t,this.time=i,this.sessionId=a,this.data=r,this.userId=e,this.type=t,this.time=null==i||""===i?new Date().valueOf():i,this.sessionId=a,this.data=r}$r(){var e,t={name:this.type,time:eZ(this.time),data:this.data||{},session_id:this.sessionId};null!=this.userId&&(t.user_id=this.userId);var i=(null===(e=ey.Sr())||void 0===e?void 0:e.wh())||!1;if(!t.user_id&&!i){var a=e9(ey.j());a&&(t.alias=a)}return t}bt(){return{u:this.userId,t:this.type,ts:this.time,s:this.sessionId,d:this.data}}static fromJson(t){return new e(t.user_id,t.name,t.time,t.session_id,t.data)}static RE(e){return null!=e&&eJ(e)&&null!=e.t&&""!==e.t}static En(t){return new e(t.u,t.t,t.ts,t.s,t.d)}},h=class e{constructor(e,t,i){this.eu=e,null==e&&(e=eu.ce()),!i||isNaN(i)?this.Gl=new Date().valueOf():this.Gl=i,this.eu=e,this.ql=new Date().valueOf(),this.kl=t}bt(){return`g:${encodeURIComponent(this.eu)}|e:${this.kl}|c:${this.Gl}|l:${this.ql}`}static hE(e){if("string"!=typeof e)return null;var t,i=e.lastIndexOf("|e:"),a=e.substring(0,i),r=a.split("g:")[1];return t=/[|:]/.test(r)?encodeURIComponent(r):r,e=e.replace(a,`g:${t}`)}static En(t){var i;if("string"==typeof t)try{var a=t.split("|");if(!eK(a)||4!==a.length)return null;var r=e=>e.split(":")[1],s=e=>{var t=parseInt(r(e));if(!isNaN(t))return t};(i=new e(decodeURIComponent(r(a[0])),s(a[1]),s(a[2]))).ql=s(a[3])}catch(e){eo.info(`Unable to parse cookie string ${t}, failed with error: ${te(e)}`)}else{if(null==t||null==t.g)return null;(i=new e(t.g,t.e,t.c)).ql=t.l}return i}},eh=new RegExp(/^.+@.+\..+$/),e("User",c=class e{constructor(e,t){this.Cs=e,this.Fi=t,this.Cs=e,this.Fi=t}getUserId(e){var t=this.Cs.getUserId();if("function"!=typeof e)return t;eo.warn("The callback for getUserId is deprecated. You can access its return value directly instead (e.g. `const id = braze.getUser().getUserId()`)"),e(t)}addAlias(e,t){return!tf(e,"add alias","the alias",!1)||e.length<=0?(eo.error("addAlias requires a non-empty alias"),!1):!tf(t,"add alias","the label",!1)||t.length<=0?(eo.error("addAlias requires a non-empty label"),!1):this.Fi.Cn(e,t).tt}setFirstName(e){return!!tf(e,"set first name","the firstName",!0)&&this.Cs.nu("first_name",e)}setLastName(e){return!!tf(e,"set last name","the lastName",!0)&&this.Cs.nu("last_name",e)}setEmail(e){return null===e||"string"==typeof e&&null!=e.toLowerCase().match(eh)?this.Cs.nu("email",e):(eo.error(`Cannot set email address - "${e}" did not pass RFC-5322 validation.`),!1)}setGender(t){return"string"==typeof t&&(t=t.toLowerCase()),!(null!==t&&!eH(e.Genders,t,`Gender "${t}" is not a valid gender.`,"User.Genders"))&&this.Cs.nu("gender",t)}setDateOfBirth(e,t,i){return null===e&&null===t&&null===i?this.Cs.nu("dob",null):(e=null!=e?parseInt(e.toString()):null,t=null!=t?parseInt(t.toString()):null,i=null!=i?parseInt(i.toString()):null,null==e||null==t||null==i||isNaN(e)||isNaN(t)||isNaN(i)||t>12||t<1||i>31||i<1?(eo.error("Cannot set date of birth - parameters should comprise a valid date e.g. setDateOfBirth(1776, 7, 4);"),!1):this.Cs.nu("dob",`${e}-${t}-${i}`))}setCountry(e){return!!tf(e,"set country","the country",!0)&&this.Cs.nu("country",e)}setHomeCity(e){return!!tf(e,"set home city","the homeCity",!0)&&this.Cs.nu("home_city",e)}setLanguage(e){return!!tf(e,"set language","the language",!0)&&this.Cs.nu("language",e)}setEmailNotificationSubscriptionType(t){return!!eH(e.NotificationSubscriptionTypes,t,`Email notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.Cs.nu("email_subscribe",t)}setPushNotificationSubscriptionType(t){return!!eH(e.NotificationSubscriptionTypes,t,`Push notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.Cs.nu("push_subscribe",t)}setPhoneNumber(t){return!!tf(t,"set phone number","the phoneNumber",!0)&&(null===t||t.match(e.Fn)?this.Cs.nu("phone",t):(eo.error(`Cannot set phone number - "${t}" did not pass validation.`),!1))}setLastKnownLocation(e,t,i,a,r){return null==e||null==t?(eo.error("Cannot set last-known location - latitude and longitude are required."),!1):(e=parseFloat(e.toString()),t=parseFloat(t.toString()),null!=i&&(i=parseFloat(i.toString())),null!=a&&(a=parseFloat(a.toString())),null!=r&&(r=parseFloat(r.toString())),isNaN(e)||isNaN(t)||null!=i&&isNaN(i)||null!=a&&isNaN(a)||null!=r&&isNaN(r)?(eo.error("Cannot set last-known location - all supplied parameters must be numeric."),!1):e>90||e<-90||t>180||t<-180?(eo.error("Cannot set last-known location - latitude and longitude are bounded by \xb190 and \xb1180 respectively."),!1):null!=i&&i<0||null!=r&&r<0?(eo.error("Cannot set last-known location - accuracy and altitudeAccuracy may not be negative."),!1):this.Fi.setLastKnownLocation(this.Cs.getUserId(),e,t,a,i,r).tt)}setCustomUserAttribute(e,t,i){if(!tb(e))return!1;var a=t=>{var[i]=tm(t,e8,"attribute value",`set custom user attribute "${e}"`,"custom user attribute");return i};if(eK(t)){var[r,s]=function(e,t){var i=!1,a=!1,r=()=>{eo.error("Custom attribute arrays must be either string arrays or object arrays.")};for(var s of t)if("string"==typeof s){if(a)return r(),[!1,!1];if(!tp(s,`set custom user attribute "${e}"`,"the element in the given array"))return[!1,!1];i=!0}else{if(!eJ(s)||i)return r(),[!1,!1];if(!tm(s,e8,"attribute value",`set custom user attribute "${e}"`,"custom user attribute"))return[!1,!1];a=!0}return[i,a]}(e,t);if(!r&&!s&&0!==t.length)return!1;if(r||0===t.length)return this.Fi.Ln(e$.$n,e,t).tt;for(var n of t)if(!a(n))return!1}else if(eJ(t)){if(!a(t))return!1;if(i)return this.Fi.Ln(e$.Bn,e,t).tt}else if(!(void 0!==t&&tg(t))||(eV(t)&&(t=e0(t)),"string"==typeof t&&!tp(t,`set custom user attribute "${e}"`,"the element in the given array")))return!1;return this.Cs.setCustomUserAttribute(e,t)}addToCustomAttributeArray(e,t){return!!tp(e,"add to custom user attribute array","the given key")&&!(null!=t&&!tp(t,"add to custom user attribute array","the given value"))&&this.Fi.Ln(e$.Rn,e,t).tt}removeFromCustomAttributeArray(e,t){return!!tp(e,"remove from custom user attribute array","the given key")&&!(null!=t&&!tp(t,"remove from custom user attribute array","the given value"))&&this.Fi.Ln(e$.On,e,t).tt}incrementCustomUserAttribute(e,t){if(!tp(e,"increment custom user attribute","the given key"))return!1;null==t&&(t=1);var i=parseInt(t.toString());return isNaN(i)||i!==parseFloat(t.toString())?(eo.error(`Cannot increment custom user attribute because the given incrementValue "${t}" is not an integer.`),!1):this.Fi.Ln(e$.Gn,e,i).tt}setCustomLocationAttribute(e,t,i){return!!tp(e,"set custom location attribute","the given key")&&((null!==t||null!==i)&&(t=null!=t?parseFloat(t.toString()):null,i=null!=i?parseFloat(i.toString()):null,null==t&&null!=i||null!=t&&null==i||null!=t&&(isNaN(t)||t>90||t<-90)||null!=i&&(isNaN(i)||i>180||i<-180))?(eo.error("Received invalid values for latitude and/or longitude. Latitude and longitude are bounded by \xb190 and \xb1180 respectively, or must both be null for removal."),!1):this.Fi.Hn(e,t,i).tt)}addToSubscriptionGroup(t){return!tf(t,"add user to subscription group","subscription group ID",!1)||t.length<=0?(eo.error("addToSubscriptionGroup requires a non-empty subscription group ID"),!1):this.Fi.Kn(t,e.Mn.SUBSCRIBED).tt}removeFromSubscriptionGroup(t){return!tf(t,"remove user from subscription group","subscription group ID",!1)||t.length<=0?(eo.error("removeFromSubscriptionGroup requires a non-empty subscription group ID"),!1):this.Fi.Kn(t,e.Mn.UNSUBSCRIBED).tt}setLineId(t){return tf(t,"set LINE user ID","the ID",!0)&&0!==(null==t?void 0:t.length)?t&&t.length>e.Yn?(eo.error(`Rejected LINE user ID ${t} because it is longer than ${e.Yn} characters.`),!1):this.Cs.nu("native_line_id",t):(eo.error("setLineId requires a non-empty ID"),!1)}Sn(e,t,i,a,r){this.Cs.Sn(e,t,i,a,r),this.Fi.Jn()}jn(e){this.Cs.jn(e)}}),c.Genders={MALE:"m",FEMALE:"f",OTHER:"o",UNKNOWN:"u",NOT_APPLICABLE:"n",PREFER_NOT_TO_SAY:"p"},c.NotificationSubscriptionTypes={OPTED_IN:"opted_in",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},c.Fn=/^[0-9 .\\(\\)\\+\\-]+$/,c.Mn={SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},c.Qn="user_id",c.lu="custom",c.ur=997,c.Yn=33,d=class{constructor(){}ef(){}ff(){}tc(e){}static nf(e,t){if(e&&t){if(e=e.toLowerCase(),eK(t.cf)){for(var i=0;i<t.cf.length;i++)if(-1!==e.indexOf(t.cf[i].toLowerCase()))return t.identity}else if(-1!==e.indexOf(t.cf.toLowerCase()))return t.identity}}},p=class e extends d{constructor(){if(super(),this.userAgentData=navigator.userAgentData,this.browser=null,this.version=null,this.userAgentData){var e=this.Bc();this.browser=e.browser||"Unknown Browser",this.version=e.version||"Unknown Version"}this.OS=null}ef(){return this.browser}ff(){return this.version}tc(t){if(this.OS)return Promise.resolve(this.OS);var i=i=>{for(var a=0;a<t.length;a++){var r=e.nf(i,t[a]);if(r)return this.OS=r,this.OS}return i};return this.userAgentData.platform?Promise.resolve(i(this.userAgentData.platform)):this.getHighEntropyValues().then(e=>e.platform?i(e.platform):navigator.platform).catch(()=>navigator.platform)}Bc(){var e={},t=this.userAgentData.brands;if(t&&t.length)for(var i of t){var a=this.Vc(tw),r=i.brand.match(a);if(r&&r.length>0){e.browser=r[0],e.version=i.version;break}}return e}Vc(e){var t=[];for(var i in e)t.push(e[i]);return RegExp("("+t.join("|")+")","i")}getHighEntropyValues(){return this.userAgentData.getHighEntropyValues?this.userAgentData.getHighEntropyValues(["platform"]):Promise.reject()}},b=class e extends d{constructor(){super(),this.fd=e.Bc(navigator.userAgent||"")}ef(){return this.fd[0]||"Unknown Browser"}ff(){return this.fd[1]||"Unknown Version"}tc(t){for(var i=0;i<t.length;i++){var a=t[i].string,r=e.nf(a,t[i]);if(r)return r===tx.Pg&&navigator.maxTouchPoints>1&&(r=tx.ao),Promise.resolve(r)}return Promise.resolve(navigator.platform)}static Bc(e){var t,i=e.match(/(samsungbrowser|tizen|roku|konqueror|icab|crios|opera|ucbrowser|chrome|safari|firefox|camino|msie|trident(?=\/))\/?\s*(\.?\d+(\.\d+)*)/i)||[];if(-1!==e.indexOf("(Web0S; Linux/SmartTV)"))return["LG Smart TV",null];if(-1!==e.indexOf("CrKey"))return["Chromecast",null];if(-1!==e.indexOf("BRAVIA")||-1!==e.indexOf("SonyCEBrowser")||-1!==e.indexOf("SonyDTV"))return["Sony Smart TV",null];if(-1!==e.indexOf("PhilipsTV"))return["Philips Smart TV",null];if(e.match(/\b(Roku)\b/))return["Roku",null];if(e.match(/\bAFTM\b/))return["Amazon Fire Stick",null];if(i[1]===tw.rO&&null!=(t=e.match(/\b(OPR|Edge|EdgA|Edg|UCBrowser)\/(\.?\d+(\.\d+)*)/)))return(t=t.slice(1))[0]=t[0].replace("OPR",tw.oO),t[0]=t[0].replace("EdgA",tw.eO),"Edg"===t[0]&&(t[0]=tw.eO),[t[0],t[1]];if(i[1]===tw.Bg&&null!=(t=e.match(/\b(EdgiOS)\/(\.?\d+(\.\d+)*)/)))return(t=t.slice(1))[0]=t[0].replace("EdgiOS",tw.eO),[t[0],t[1]];if((i=i[2]?[i[1],i[2]]:[null,null])[0]===tw.Bg&&null!=(t=e.match(/version\/(\.?\d+(\.\d+)*)/i))&&i.splice(1,1,t[1]),null!=(t=e.match(/\b(UCBrowser)\/(\.?\d+(\.\d+)*)/))&&i.splice(1,1,t[2]),i[0]===tw.oO&&null!=(t=e.match(/mini\/(\.?\d+(\.\d+)*)/i)))return["Opera Mini",t[1]||""];if(i[0]){var a=i[0].toLowerCase();"crios"===a&&(i[0]=tw.rO),"tizen"===a&&(i[0]="Samsung Smart TV",i[1]=null),"samsungbrowser"===a&&(i[0]="Samsung Browser")}return i}},(g=class e{constructor(){var t=navigator.userAgentData?p:b;this.Sg=new t,this.userAgent=navigator.userAgent,this.browser=this.Sg.ef(),this.version=this.Sg.ff(),this.OS=null,this.tc().then(e=>this.OS=e);var i=navigator;this.language=(i.userLanguage||i.language||i.browserLanguage||i.systemLanguage||"").toLowerCase(),this.$a=e.vg(this.userAgent)}fE(){return this.browser===tw.Bg}sc(){return this.OS||null}tc(){return this.OS?Promise.resolve(this.OS):this.Sg.tc(e.kg).then(e=>(this.OS=e,e))}static vg(e){e=e.toLowerCase();for(var t=["googlebot","bingbot","slurp","duckduckbot","baiduspider","yandex","facebookexternalhit","sogou","ia_archiver","https://github.com/prerender/prerender","aolbuild","bingpreview","msnbot","adsbot","mediapartners-google","teoma","taiko"],i=0;i<t.length;i++)if(-1!==e.indexOf(t[i]))return!0;return!1}}).kg=[{string:navigator.platform,cf:"Win",identity:tx.Og},{string:navigator.platform,cf:"Mac",identity:tx.Pg},{string:navigator.platform,cf:"BlackBerry",identity:"BlackBerry"},{string:navigator.platform,cf:"FreeBSD",identity:"FreeBSD"},{string:navigator.platform,cf:"OpenBSD",identity:"OpenBSD"},{string:navigator.platform,cf:"Nintendo",identity:"Nintendo"},{string:navigator.platform,cf:"SunOS",identity:"SunOS"},{string:navigator.platform,cf:"PlayStation",identity:"PlayStation"},{string:navigator.platform,cf:"X11",identity:"X11"},{string:navigator.userAgent,cf:["iPhone","iPad","iPod"],identity:tx.ao},{string:navigator.platform,cf:"Pike v",identity:tx.ao},{string:navigator.userAgent,cf:["Web0S"],identity:"WebOS"},{string:navigator.userAgent,cf:"Tizen",identity:"Tizen"},{string:navigator.platform,cf:["Linux armv7l","Android"],identity:tx.xg},{string:navigator.userAgent,cf:["Android"],identity:tx.xg},{string:navigator.platform,cf:"Linux",identity:"Linux"}],ec=new g,(f=class e{constructor(e,t){this.uE=e,this.cE=t,this.uE=e,this.cE=t}Ya(t){var i=eW(ty.iu),a=new e.se(t);for(var r of i)a.remove(ty.iu[r])}uu(e,t){var i=null;null!=t&&t instanceof h&&(i=t.bt()),this.uE.store(e,i)}TE(e){var t=this.tu(e);null!=t&&(t.ql=new Date().valueOf(),this.uu(e,t))}tu(e){var t,i=this.uE.gr(e),a=(e=>{var t;try{t=JSON.parse(e)}catch(e){t=null}return t})(i);if(a)(t=h.En(a)||null)&&this.uu(e,t);else{var r=h.hE(i);t=h.En(r)||null,r!==i&&t&&this.uu(e,t)}return t}Il(e){this.uE.remove(e)}Ha(){var e;for(var t of eW(ty.iu))null!=(e=this.tu(ty.iu[t]))&&this.uu(ty.iu[t],e)}Vo(e){if(null==e||0===e.length)return!1;t=eK(e)?e:[e];var t,i=this.cE.gr(ty.gt.tE);null!=i&&eK(i)||(i=[]);for(var a=0;a<t.length;a++)i.push(t[a].bt());return this.cE.store(ty.gt.tE,i)}Al(e){return null!=e&&this.Vo([e])}AE(){var e=this.cE.gr(ty.gt.tE);this.cE.remove(ty.gt.tE),null==e&&(e=[]);var t=[],i=!1,a=null;if(eK(e))for(var r=0;r<e.length;r++)u.RE(e[r])?t.push(u.En(e[r])):a=r;else i=!0;if(i||null!=a){var s="Stored events could not be deserialized as Events";i&&(s+=", was "+Object.prototype.toString.call(e)+" not an array"),null!=a&&(s+=", value at index "+a+" does not look like an event"),s+=", serialized values were of type "+typeof e+": "+JSON.stringify(e),t.push(new u(null,e$.bu,new Date().valueOf(),null,{e:s}))}return t}Bt(e,t){return!!eH(ty.gt,e,"StorageManager cannot store object.","STORAGE_KEYS.OBJECTS")&&this.cE.store(e,t)}ft(e){return!!eH(ty.gt,e,"StorageManager cannot retrieve object.","STORAGE_KEYS.OBJECTS")&&this.cE.gr(e)}Ut(e){return!!eH(ty.gt,e,"StorageManager cannot remove object.","STORAGE_KEYS.OBJECTS")&&(this.cE.remove(e),!0)}clearData(){for(var e=eW(ty.iu),t=eW(ty.gt),i=0;i<e.length;i++){var a=e[i];this.uE.remove(ty.iu[a])}for(var r=0;r<t.length;r++){var s=t[r];this.cE.remove(ty.gt[s])}}gE(e){return e||ty.gt.sE}wu(e){var t=this.cE.gr(ty.gt.eE);null==t&&(t={});var i=this.gE(e[c.Qn]),a=t[i];for(var r in e)r!==c.Qn&&(null==t[i]||a&&null==a[r])&&this.mu(e[c.Qn],r,e[r])}mu(e,t,i){var a=this.cE.gr(ty.gt.eE);null==a&&(a={});var r=this.gE(e),s=a[r];if(null==s&&(s={},null!=e&&(s[c.Qn]=e)),t===c.lu)for(var n in null==s[t]&&(s[t]={}),i)s[t][n]=i[n];else s[t]=i;return a[r]=s,this.cE.store(ty.gt.eE,a)}OE(){var e=this.cE.gr(ty.gt.eE);this.cE.remove(ty.gt.eE);var t=[];for(var i in e)null!=e[i]&&t.push(e[i]);return t}ru(e){var t=this.cE.gr(ty.gt.eE);if(null!=t){var i=this.gE(null),a=t[i];null!=a&&(t[i]=void 0,this.cE.store(ty.gt.eE,t),a[c.Qn]=e,this.wu(a))}var r=this.tu(ty.iu.Nl),s=null;null!=r&&(s=r.eu);var n=this.AE();if(null!=n)for(var o=0;o<n.length;o++){var l=n[o];null==l.userId&&l.sessionId==s&&(l.userId=e),this.Al(l)}}IE(){return this.cE.dE}}).lc=class{constructor(e){this.un=e,this.un=e,this.dE=ec.fE()?3:10}bE(e){return e+"."+this.un}store(e,t){try{return localStorage.setItem(this.bE(e),JSON.stringify({v:t})),!0}catch(e){return eo.info("Storage failure: "+te(e)),!1}}gr(e){try{var t=null,i=localStorage.getItem(this.bE(e));return null!=i&&(t=JSON.parse(i)),null==t?null:t.v}catch(e){return eo.info("Storage retrieval failure: "+te(e)),null}}remove(e){try{localStorage.removeItem(this.bE(e))}catch(e){return eo.info("Storage removal failure: "+te(e)),!1}}},f.gc=class{constructor(){this.KE={},this.mE=5242880,this.dE=3}store(e,t){var i=this.YE(t);return i>this.mE?(eo.info("Storage failure: object is "+i+" bytes which is greater than the max of "+this.mE),!1):(this.KE[e]={value:t},!0)}YE(e){for(var t=[],i=[e],a=0;i.length;){var r=i.pop();if("boolean"==typeof r)a+=4;else if("string"==typeof r)a+=2*r.length;else if("number"==typeof r)a+=8;else if("object"==typeof r&&-1===t.indexOf(r)){var s=void 0,n=void 0;for(var o in t.push(r),r)n=r,s=o,i.push(n[s])}}return a}gr(e){var t=this.KE[e];return null==t?null:t.value}remove(e){this.KE[e]=null}},f.se=class{constructor(e,t){this.un=e,this.NE=t,this.un=e,this.GE=this.DE(),this.CE=576e3,this.NE=!!t}bE(e){return null!=this.un?e+"."+this.un:e}DE(){for(var e=0,t=document.location.hostname,i=t.split("."),a="ab._gd";e<i.length-1&&-1===document.cookie.indexOf(a+"="+a);)e++,t="."+i.slice(-1-e).join("."),document.cookie=a+"="+a+";domain="+t+";";return document.cookie=a+"=;expires="+new Date(0).toUTCString()+";domain="+t+";",t}le(){var e=new Date;return e.setTime(e.getTime()+60*this.CE*1e3),e.getFullYear()}ME(){for(var e=eX(ty.iu),t=document.cookie.split(";"),i=0;i<t.length;i++){for(var a=t[i];" "===a.charAt(0);)a=a.substring(1);for(var r=!1,s=0;s<e.length;s++)if(0===a.indexOf(e[s])){r=!0;break}if(r){var n=a.split("=")[0];-1===n.indexOf("."+this.un)&&this.pE(n)}}}store(e,t){this.ME();var i,a=new Date;a.setTime(a.getTime()+60*this.CE*1e3);var r="expires="+a.toUTCString(),s="domain="+this.GE;i=this.NE?t:encodeURIComponent(t);var n=this.bE(e)+"="+i+";"+r+";"+s+";path=/";return n.length>=4093?(eo.info("Storage failure: string is "+n.length+" chars which is too large to store as a cookie."),!1):(document.cookie=n,!0)}gr(e){for(var t=[],i=this.bE(e)+"=",a=document.cookie.split(";"),r=0;r<a.length;r++){for(var s=a[r];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(i))try{var n=void 0;n=this.NE?s.substring(i.length,s.length):decodeURIComponent(s.substring(i.length,s.length)),t.push(n)}catch(t){return eo.info("Storage retrieval failure: "+te(t)),this.remove(e),null}}return t.length>0?t[t.length-1]:null}remove(e){this.pE(this.bE(e))}pE(e){var t=e+"=;expires="+new Date(0).toUTCString();document.cookie=t,document.cookie=t+";path=/";var i=t+";domain="+this.GE;document.cookie=i,document.cookie=i+";path=/"}},f.cc=class{constructor(e,t,i){this.un=e,this.vE=[],t&&this.vE.push(new f.se(e)),i&&this.vE.push(new f.lc(e)),this.vE.push(new f.gc)}store(e,t){for(var i=!0,a=0;a<this.vE.length;a++)i=this.vE[a].store(e,t)&&i;return i}gr(e){for(var t=0;t<this.vE.length;t++){var i=this.vE[t].gr(e);if(null!=i)return i}return null}remove(e){new f.se(this.un).remove(e);for(var t=0;t<this.vE.length;t++)this.vE[t].remove(e)}},m=class{constructor(e,t,i){this.C=e,this.Zn=t,this.gh=i,this.C=e,this.Zn=t||!1,this.gh=i,this.Fh=new a,this.kh=0,this.fh=1}wh(){return this.Zn}jh(){return this.C.ft(ty.gt.xh)}setSdkAuthenticationSignature(e){var t=this.jh();this.C.Bt(ty.gt.xh,e);var a=i.Ls.Fs;new i(a,eo).setItem(a.Ms.qh,this.fh,e),t!==e&&this.it()}yh(){this.C.Ut(ty.gt.xh);var e=i.Ls.Fs;new i(e,eo).ge(e.Ms.qh,this.fh)}subscribeToSdkAuthenticationFailures(e){return this.gh.Ft(e)}Bh(e){this.gh.X(e)}Gh(){this.Fh.removeAllSubscriptions()}Hh(){this.kh+=1}Jh(){return this.kh}it(){this.kh=0}},v=class{constructor(){}U(e){}changeUser(e=!1){}clearData(e=!1){}},w=class{constructor(e){this.id=e,this.id=e}$r(){var e={};return null!=this.browser&&(e.browser=this.browser),null!=this.Za&&(e.browser_version=this.Za),null!=this.os&&(e.os_version=this.os),null!=this.resolution&&(e.resolution=this.resolution),null!=this.language&&(e.locale=this.language),null!=this.timeZone&&(e.time_zone=this.timeZone),null!=this.userAgent&&(e.user_agent=this.userAgent),e}},x=class{constructor(e,t){this.C=e,this.Qa=t,this.C=e,null==t&&(t=eX(tC)),this.Qa=t}ve(e=!0){var t=this.C.tu(ty.iu.Ia);null==t&&(t=new h(eu.ce()),e&&this.C.uu(ty.iu.Ia,t));for(var i=new w(t.eu),a=0;a<this.Qa.length;a++)switch(this.Qa[a]){case tC.BROWSER:i.browser=ec.browser;break;case tC.BROWSER_VERSION:i.Za=ec.version;break;case tC.OS:i.os=this.tc();break;case tC.RESOLUTION:i.ec=screen.width+"x"+screen.height;break;case tC.LANGUAGE:i.language=ec.language;break;case tC.TIME_ZONE:i.timeZone=this.rc(new Date);break;case tC.USER_AGENT:i.userAgent=ec.userAgent}return i}tc(){if(ec.sc())return ec.sc();var e=this.C.ft(ty.gt.ic);return e&&e.os_version?e.os_version:ec.tc()}rc(e){var t=!1;if("undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat)try{if("function"==typeof Intl.DateTimeFormat().resolvedOptions){var i=Intl.DateTimeFormat().resolvedOptions().timeZone;if(null!=i&&""!==i)return i}}catch(e){eo.info("Intl.DateTimeFormat threw an error, cannot detect user's time zone:"+te(e)),t=!0}if(t)return"";var a=e.getTimezoneOffset();return this.oc(a)}oc(e){var t="GMT";return 0!==e&&(t+=(e<0?"+":"-")+("00"+Math.abs(Math.trunc(e/60))).slice(-2)+":"+("00"+Math.abs(Math.trunc(e%60))).slice(-2)),t}},ed=tS,ep=tk,y=class{constructor(e,t,i,a,r,s,n,o,l,u,h,c){this.an=e,this.C=t,this.Ra=i,this.Cs=a,this.T=r,this.B=s,this.un=n,this.Pa=o,this.Oa=l,this.Ta=u,this.appVersion=h,this.au=c,this.du=e=>null==e?"":`${e} `,this.an=e,this.C=t,this.Ra=i,this.Cs=a,this.T=r,this.B=s,this.un=n,this.Pa=o,this.Oa=l,this.Ta=u,this.appVersion=h,this.au=c,this.fu=["npm"]}H(e,t=!1,i=!1){var a=this.an.ve(!i),r=a.$r();eY(this.C.ft(ty.gt.ic),r)||(e.device=r),e.api_key=this.un,e.time=eZ(new Date().valueOf(),!0);var s=this.C.ft(ty.gt.vu)||[],n=this.C.ft(ty.gt.pu)||"";this.fu.length>0&&(!eY(s,this.fu)||n!==this.T.St())&&(e.sdk_metadata=this.fu),e.sdk_version=this.Oa,this.Ta&&(e.sdk_flavor=this.Ta),e.app_version=this.appVersion,e.app_version_code=this.au,e.device_id=a.id;var o=this.Cs.getUserId();if(t&&null!==o&&(e.user_id=o),!o&&!this.Ra.wh()){var l=e9(this.C);l&&(e.alias=l)}return e}st(e,t,i){var a=t.auth_error,r=t.error;if(!a&&!r)return!0;if(a){this.Ra.Hh();var s,n={errorCode:a.error_code};for(var o of i)eK(o)&&"X-Braze-Auth-Signature"===o[0]&&(n.signature=o[1]);e.respond_with&&e.respond_with.user_id?n.userId=e.respond_with.user_id:e.user_id&&(n.userId=e.user_id);var l=a.reason;return l?(n.reason=l,s=`due to ${l}`):s=`with error code ${a.error_code}.`,this.Ra.wh()||(s+=' Please use the "enableSdkAuthentication" initialization option to enable authentication.'),eo.error(`SDK Authentication failed ${s}`),this.Ru(e.events||[],e.attributes||[]),this.Ra.Bh(n),!1}if(r){var u,h=r;switch(h){case tE.gu:return u="Received successful response with empty body.",eC.ut(e$.bu,{e:u}),eo.info(u),!1;case tE.qu:return u="Received successful response with invalid JSON",eC.ut(e$.bu,{e:u+": "+t.response}),eo.info(u),!1;case tE.Au:h=`The API key "${e.api_key}" is invalid for the baseUrl ${this.Pa}`;break;case tE.Du:h="Sorry, we are not currently accepting your requests. If you think this is in error, please contact us.";break;case tE.ku:h="No device identifier. Please contact support@braze.com"}eo.error("Backend error: "+h)}return!1}Tu(e,t,i,a){return!!(e&&0!==e.length||t&&0!==t.length||i||a)}yu(e,t,i,a,r=!1){var s,n=[],o=e=>e||"",l=o(this.Cs.getUserId()),u=this.Nr(e,t),h=[],c=[],d=null;if(i.length>0){var p=[];for(var b of i){if(s=b.$r(),this.Ra.wh()){if(l&&!s.user_id){d||(d={}),d.events||(d.events=[]),d.events.push(s);continue}if(o(s.user_id)!==l){c.push(s);continue}}p.push(s)}p.length>0&&(u.events=p)}if(a.length>0){var g=[];for(var f of a)f&&(this.Ra.wh()&&o(f.user_id)!==l?h.push(f):g.push(f));g.length>0&&(u.attributes=g)}if(this.Ru(c,h),u=this.H(u,!1,r),d){var m={requestData:d=this.H(d,!1,r),headers:this.J(d,ed.O.Nu)};n.push(m)}if(u&&!this.Tu(u.events,u.attributes,e,t))return d?n:null;var v={requestData:u,headers:this.J(u,ed.O.Nu)};return n.push(v),n}Ru(e,t){if(e){var i=[];for(var a of e){var r=u.fromJson(a);r.time=1e3*r.time,i.push(r)}this.C.Vo(i)}if(t)for(var s of t)this.C.wu(s)}et(e,t){var i="HTTP error ";null!=e&&(i+=e+" "),i+=t,eo.error(i)}zr(e){return eC.ut(e$.Cu,{n:e})}Nr(e,t,i){var a={};e&&(a.feed=!0),t&&(a.triggers=!0);var r=null!=i?i:this.Cs.getUserId();if(r&&(a.user_id=r),!a.user_id&&!this.Ra.wh()){var s=e9(this.C);s&&(a.alias=s)}return a.config={config_time:this.B.Et()},{respond_with:a}}Su(e){var t=new Date().valueOf(),i="7200000",a=ed.Bu(this.C,e);return -1!==a&&(i=(t-a).toString()),i}J(e,t,i=!1){var a=[["X-Braze-Api-Key",this.un]],r=this.Su(t);a.push(["X-Braze-Last-Req-Ms-Ago",r]);var s=ed.zu(this.C,t).toString();a.push(["X-Braze-Req-Attempt",s]);var n=!1;if(null!=e.respond_with&&e.respond_with.triggers&&(a.push(["X-Braze-TriggersRequest","true"]),n=!0),null!=e.respond_with&&e.respond_with.feed&&(a.push(["X-Braze-FeedRequest","true"]),n=!0),t===ed.O.gi){a.push(["X-Braze-ContentCardsRequest","true"]);var o=ed.zu(this.C,ed.O.gi);o&&!i||(o=1,ed.ju(this.C,ed.O.gi,o));var l=Math.max(0,o-1);a.push(["BRAZE-SYNC-RETRY-COUNT",l.toString()]),n=!0}if(t===ed.O.Le&&(a.push(["X-Braze-FeatureFlagsRequest","true"]),n=!0),n&&a.push(["X-Braze-DataRequest","true"]),this.Ra.wh()){var u=this.Ra.jh();null!=u&&a.push(["X-Braze-Auth-Signature",u])}return a}Mu(e,t,i,a){window.setTimeout(()=>{eo.info(`Retrying rate limited ${this.du(a)}SDK request.`),this.V(t,i,a)},e)}V(e,t,i,a){if(!this.Xu(i))return eo.info(`${this.du(i)}SDK request being rate limited.`),void("function"==typeof a&&a());var r=this.$u();if(!r.Fu)return eo.info(`${this.du(i)}SDK request being rate limited. Request will be retried in ${Math.trunc(r.Lu/1e3)} seconds.`),void this.Mu(r.Lu,e,t,i);this.C.Bt(ty.gt.Eu,new Date().valueOf());var s=e.device;s&&s.os_version instanceof Promise?s.os_version.then(i=>{e.device.os_version=i,t(r.Ku)}):t(r.Ku)}Iu(e){var t=e?tA(e):null;if(!t||!t["retry-after"])return null;var i=t["retry-after"];return isNaN(i)&&!isNaN(Date.parse(i))?{type:"date",value:Date.parse(i)}:isNaN(parseFloat(i.toString()))?(eC.ut(e$.bu,{e:"Received unexpected value for retry-after header in /sync response: "+i}),null):{type:"timestamp",value:1e3*parseFloat(i.toString())}}rt(e,t,i,a,r,s){if(!(ed.zu(this.C,i)>=15)){s=s||0;var n,o=this.Iu(e);r();var l=e=>{a(window.setTimeout(()=>{t()},e)),ed.Pu(this.C,i)};if(o&&!isNaN(o.value)){switch(o.type){case"date":(n=o.value-new Date().getTime()+s)<0&&t();break;case"timestamp":n=o.value+s}l(n)}else s?l(s):ed.wi(this.C,i)}}Uu(e){var t;null===(t=this.C)||void 0===t||t.Bt(ty.gt.xu,e)}Hu(e,t){var i=this.Ou();null==i&&(i={}),i[e]=t,this.C.Bt(ty.gt.Gu,i)}_u(){var e;return null===(e=this.C)||void 0===e?void 0:e.ft(ty.gt.xu)}Ou(){var e;return null===(e=this.C)||void 0===e?void 0:e.ft(ty.gt.Gu)}Wu(e,t,i,a,r=""){if(r){var s,n=this.Ou();s=null==n||isNaN(n[r])?t:n[r]}else(null==(s=this._u())||isNaN(s))&&(s=t);return Math.min(s+(e-a)/1e3/i,t)}Yu(e,t){return Math.max(0,(1-e)*t*1e3)}Ju(e,t=""){var i={Fu:!0,Ku:-1,Lu:0};if(null==e&&(e=!0),!e&&!t)return i;var a,r,s,n,o,l,u,h=null;if(e)h=null===(a=this.C)||void 0===a?void 0:a.ft(ty.gt.Eu);else{var c=ed.Qu(this.C);if(null==c||null==c[t])return i;h=c[t]}if(null==h||isNaN(h)||(e?(l=(null===(r=this.B)||void 0===r?void 0:r.Vu())||-1,u=(null===(s=this.B)||void 0===s?void 0:s.Zu())||-1):(l=(null===(n=this.B)||void 0===n?void 0:n.tl(t))||-1,u=(null===(o=this.B)||void 0===o?void 0:o.el(t))||-1),-1===l||-1===u))return i;var d=new Date().valueOf(),p=this.Wu(d,l,u,h,t);return p<1?(i.Fu=!1,i.Lu=this.Yu(p,u)):(p=Math.trunc(p)-1,i.Ku=p,e?this.Uu(p):this.Hu(t,p)),i}$u(){return this.Ju(!0)}Xu(e){var t=this.Ju(!1,e);return!(t&&!t.Fu)}it(){this.Ra.it()}Z(){return this.Pa}addSdkMetadata(e){for(var t of e)-1===this.fu.indexOf(t)&&this.fu.push(t)}},C=class{constructor(e=!1,t=[]){this.tt=e,this.$e=t,this.tt=e,this.$e=t}rs(e){this.tt=this.tt&&e.tt,this.$e.push(...e.$e)}},eb=tT,E=class{constructor(e,t,i,r,s,n,o,l,u,h){this.un=e,this.baseUrl=t,this.T=i,this.an=r,this.Cs=s,this.B=n,this.C=o,this.$l=l,this.Ra=u,this.S=h,this.un=e,this.baseUrl=t,this.Tl=0,this.dE=o.IE()||0,this.Ml=null,this.T=i,this.an=r,this.Cs=s,this.B=n,this.C=o,this.Ra=u,this.S=h,this.$l=l,this.Pl=new a,this.Ol=null,this.Ul=50,this._l=!1}Jl(e,t){return!e&&!t&&this.Ra.Jh()>=this.Ul}Kl(e){var t=this.T.zl();if(e.length>0){var i=this.Cs.getUserId();for(var a of e){var r=!a.userId&&!i||a.userId===i;a.type===e$.Bl&&r&&(t=!0)}}return t}Xl(e=!1,t=!1,i=!0,a,r,s,n=!1,o=!1){var l=this;i&&this.Ql();var u=this.C.AE(),h=this.C.OE(),c=!1,d=(e,t,n=-1)=>{var o=new Date().valueOf();ed.W(this.C,ed.O.Nu,o),-1!==n&&t.push(["X-Braze-Req-Tokens-Remaining",n.toString()]);var l=!1;ep.Y({url:this.baseUrl+"/data/",data:e,headers:t,tt:i=>{null!=e.respond_with&&e.respond_with.triggers&&(this.Tl=Math.max(this.Tl-1,0)),this.S.st(e,i,t)?(this.Ra.it(),this.B.gl(i),null!=e.respond_with&&e.respond_with.user_id!=this.Cs.getUserId()||(null!=e.device&&this.C.Bt(ty.gt.ic,e.device),null!=e.sdk_metadata&&(this.C.Bt(ty.gt.vu,e.sdk_metadata),this.C.Bt(ty.gt.pu,this.T.St())),this.$l(i),ed.ju(this.C,ed.O.Nu,1),"function"==typeof a&&a())):i.auth_error&&(l=!0)},error:()=>{l=!0,null!=e.respond_with&&e.respond_with.triggers&&(this.Tl=Math.max(this.Tl-1,0)),this.S.Ru(e.events,e.attributes),"function"==typeof r&&r()},nt:(e,t)=>{"function"==typeof s&&s(!l);var a=this.S.Iu(t),r=0;if(a)switch(a.type){case"date":r=Math.max(a.value-new Date().valueOf(),0);break;case"timestamp":r=a.value}if(i&&!c){if(l){ed.Pu(this.C,ed.O.Nu);var n=this.Ml;(null==n||n<1e3*this.dE)&&(n=1e3*this.dE);var o=Math.min(3e5,tN(1e3*this.dE,3*n))+r;this.Yl(o)}else this.Yl(Math.max(1e3*this.dE,r));c=!0}}})},p=this.Kl(u),b=t||p;if(this.Jl(n,p))return void eo.info("Declining to flush data due to 50 consecutive authentication failures");if(i&&!this.S.Tu(u,h,e,b))return this.Yl(),void("function"==typeof s&&s(!0));var g=this.S.yu(e,b,u,h,o);b&&this.Tl++;var f=!1;if(g){var m=function(e){l.S.V(e.requestData,t=>d(e.requestData,e.headers,t),ed.O.Nu,r),f=!0};for(var v of g)m(v)}this.Ra.wh()&&i&&!f?this.Yl():p&&(eo.info("Invoking new session subscriptions"),this.Pl.X())}Zl(){return this.Tl>0}Yl(e=1e3*this.dE){this._l||(this.Ql(),this.Ol=window.setTimeout(()=>{if(document.hidden){var e="visibilitychange",t=()=>{document.hidden||(document.removeEventListener(e,t,!1),this.Xl())};document.addEventListener(e,t,!1)}else this.Xl()},e),this.Ml=e)}Ql(){null!=this.Ol&&(clearTimeout(this.Ol),this.Ol=null)}initialize(){this._l=!1,this.Yl()}destroy(){this.Pl.removeAllSubscriptions(),this.Ra.Gh(),this.Ql(),this._l=!0,this.Xl(void 0,void 0,!1,void 0,void 0,void 0,void 0,!0),this.Ol=null}rn(e){return this.Pl.Ft(e)}openSession(){var e=this.T.St()!==this.T.Qo();e&&(this.C.TE(ty.iu.Ia),this.C.TE(ty.iu.su)),this.Xl(void 0,!1,void 0,()=>{this.C.Ut(ty.gt.Ge)}),this.Jn(),e&&Promise.resolve().then(function(){return eB}).then(e=>{if(!this._l){var t=e.default.ea();if(null!=t&&(eb.isPushPermissionGranted()||eb.isPushBlocked())){var a=()=>{t.vn()?eo.info("Push token maintenance is disabled, not refreshing token for backend."):t.subscribe()},r=i.Ls.Fs;new i(r,eo).cr(r.Ms.cu,(e,t)=>{t&&a()},()=>{var e=this.C.ft(ty.gt.qn);(null==e||e)&&a()})}}})}hc(){this.C.Ut(ty.gt.Xe),this.C.Ut(ty.gt.Is),this.C.Ut(ty.gt.Lr)}changeUser(e,t,i){var a=this.Cs.getUserId();if(a!==e){this.T.Fl(),this.hc(),null!=a&&this.Xl(void 0,!1,void 0,void 0,void 0),this.Cs.ou(e),i?this.Ra.setSdkAuthenticationSignature(i):this.Ra.yh();for(var r=0;r<t.length;r++)t[r].changeUser(null==a);null!=a&&this.C.Ut(ty.gt.Zt),this.C.Ut(ty.gt.ic),this.C.Ut(ty.gt._E),this.openSession(),eo.info('Changed user to "'+e+'".')}else{var s="Doing nothing.";i&&this.Ra.jh()!==i&&(this.Ra.setSdkAuthenticationSignature(i),s="Updated SDK authentication signature"),eo.info(`Current user is already ${e}. ${s}`)}}requestImmediateDataFlush(e){this.Ql(),this.T.Qo(),this.Xl(void 0,void 0,void 0,void 0,()=>{eo.error("Failed to flush data, request will be retried automatically.")},e,!0)}requestFeedRefresh(){this.T.Qo(),this.Xl(!0)}br(e,t){this.T.Qo(),eo.info("Requesting explicit trigger refresh."),this.Xl(void 0,!0,void 0,e,t)}Cn(e,t){var i=e$.dc,a={a:e,l:t},r=eC.ut(i,a);return r&&(eo.info(`Logged alias ${e} with label ${t}`),this.C.Bt(ty.gt._E,a)),r}Ln(e,t,i){if(this.B.hu(t))return eo.info(`Custom Attribute "${t}" is blocklisted, ignoring.`),new C;var a=eC.ut(e,{key:t,value:i});if(a){var r="object"==typeof i?JSON.stringify(i,null,2):i;eo.info(`Logged custom attribute: ${t} with value: ${r}`)}return a}setLastKnownLocation(e,t,i,a,r,s){var n={latitude:t,longitude:i};null!=a&&(n.altitude=a),null!=r&&(n.ll_accuracy=r),null!=s&&(n.alt_accuracy=s);var o=eC.ut(e$.mc,n,e||void 0);return o&&eo.info(`Set user last known location as ${JSON.stringify(n,null,2)}`),o}lr(e,t){var i=this.T.Qo();return new u(this.Cs.getUserId(),e$.fc,e,i,{cid:t})}vc(e,t){return new i(e,t)}Jn(){var e=i.Ls.Fs;this.vc(e,eo).setItem(e.Ms.Nu,1,{baseUrl:this.baseUrl,data:{api_key:this.un,device_id:this.an.ve().id},userId:this.Cs.getUserId(),sdkAuthEnabled:this.Ra.wh()})}vr(e){for(var t of e)if(t.api_key===this.un)this.S.Ru(t.events,t.attributes);else{var a=i.Ls.Fs;new i(a,eo).setItem(a.Ms.kr,eu.ce(),t)}}Hn(e,t,i){var a,r;return this.B.hu(e)?(eo.info(`Custom Attribute "${e}" is blocklisted, ignoring.`),new C):(null===t&&null===i?(a=e$.bc,r={key:e}):(a=e$.wc,r={key:e,latitude:t,longitude:i}),eC.ut(a,r))}Kn(e,t){return eC.ut(e$.kc,{group_id:e,status:t})}},S=class e{constructor(e=0,t=[],i=[],a=[],r=null,s=null,n={enabled:!1},o={enabled:!1,refresh_rate_limit:void 0},l={enabled:!0,capacity:30,refill_rate:30,endpoint_overrides:{}},u={enabled:!1,max_placements:0}){this.ml=e,this.Rl=t,this.Cl=i,this.El=a,this.wl=r,this.fl=s,this.dl=n,this.De=o,this.bl=l,this.banners=u,this.ml=e,this.Rl=t,this.Cl=i,this.El=a,this.wl=r,this.fl=s,this.dl=n,this.De=o,this.bl=l,this.banners=u}bt(){return{s:"5.8.1",l:this.ml,e:this.Rl,a:this.Cl,p:this.El,m:this.wl,v:this.fl,c:this.dl,f:this.De,grl:this.bl,b:this.banners}}static En(t){var i=t.l;return"5.8.1"!==t.s&&(i=0),new e(i,t.e,t.a,t.p,t.m,t.v,t.c,t.f,t.grl,t.b)}},k=class{constructor(e){this.C=e,this.C=e,this.il=new a,this.sl=new a,this.rl=new a,this.al=new a,this.hl=null,this.ul=null}ol(){if(null==this.ul){var e=this.C.ft(ty.gt.cl);this.ul=null!=e?S.En(e):new S}return this.ul}Et(){return this.ol().ml}gl(e){if(null!=e&&null!=e.config){var t=e.config;if(t.time>this.ol().ml){let e;var i=new S(t.time,t.events_blacklist,t.attributes_blacklist,t.purchases_blacklist,t.messaging_session_timeout,t.vapid_public_key,t.content_cards,t.feature_flags,null==(e=t.global_request_rate_limit)?this.ol().bl:e,t.banners),a=!1;null!=i.fl&&this.Tn()!==i.fl&&(a=!0);var r=!1;null!=i.dl.enabled&&this.Ri()!==i.dl.enabled&&(r=!0);var s=!1;null!=i.De.enabled&&this.Be()!==i.De.enabled&&(s=!0);var n=!1;null!=i.banners.enabled&&this.Dt()!==i.banners.enabled&&(n=!0),this.ul=i,this.C.Bt(ty.gt.cl,i.bt()),a&&this.il.X(),r&&this.sl.X(),s&&this.rl.X(),n&&this.al.X()}}}In(e){var t=this.il.Ft(e);return this.hl&&this.il.removeSubscription(this.hl),this.hl=t,t}ji(e){return this.sl.Ft(e)}Ke(e){return this.rl.Ft(e)}A(e){return this.al.Ft(e)}je(e){return -1!==this.ol().Rl.indexOf(e)}hu(e){return -1!==this.ol().Cl.indexOf(e)}Dr(e){return -1!==this.ol().El.indexOf(e)}vl(){return this.ol().wl}Tn(){return this.ol().fl}Ri(){return this.ol().dl.enabled||!1}yl(){var e=this.ol().bl;return!(!e||null==e.enabled)&&e.enabled}Vu(){if(!this.yl())return -1;var e=this.ol().bl;return null==e.capacity||e.capacity<10?-1:e.capacity}Zu(){if(!this.yl())return -1;var e=this.ol().bl;return null==e.refill_rate||e.refill_rate<=0?-1:e.refill_rate}Ll(e){var t=this.ol().bl.endpoint_overrides;return null==t?null:t[e]}tl(e){var t=this.Ll(e);return null==t||isNaN(t.capacity)||t.capacity<=0?-1:t.capacity}el(e){var t=this.Ll(e);return null==t||isNaN(t.refill_rate)||t.refill_rate<=0?-1:t.refill_rate}Be(){return this.ol().De.enabled&&null==this.Oe()?(eC.ut(e$.bu,{e:"Missing feature flag refresh_rate_limit."}),!1):this.ol().De.enabled||!1}Oe(){return this.ol().De.refresh_rate_limit}Dt(){return this.ol().banners.enabled||!1}ne(){return this.ol().banners.max_placements||0}},A=class{constructor(e,t,i,a){this.C=e,this.Cs=t,this.B=i,this.Sl=a,this.C=e,this.Cs=t,this.B=i,this.jl=1e3,(null==a||isNaN(a))&&(a=1800),a<this.jl/1e3&&(eo.info("Specified session timeout of "+a+"s is too small, using the minimum session timeout of "+this.jl/1e3+"s instead."),a=this.jl/1e3),this.Sl=a}xl(e,t){return new u(this.Cs.getUserId(),e$.Dl,e,t.eu,{d:eZ(e-t.Gl)})}St(){var e=this.C.tu(ty.iu.Nl);return null==e?null:e.eu}zl(){var e=new Date().valueOf(),t=this.B.vl();if(null==t)return!1;var i=this.C.ft(ty.gt.Hl),a=null==i||e-i>1e3*t;return a&&this.C.Bt(ty.gt.Hl,e),a}Wl(e,t){return null==t||null==t.kl||!(e-t.Gl<this.jl)&&t.kl<e}Qo(){var e=new Date().valueOf(),t=e+1e3*this.Sl,i=this.C.tu(ty.iu.Nl);if(this.Wl(e,i)){var a="Generating session start event with time "+e;if(null!=i){var r=i.ql;r-i.Gl<this.jl&&(r=i.Gl+this.jl),this.C.Al(this.xl(r,i)),a+=" (old session ended "+r+")"}a+=". Will expire "+t.valueOf(),eo.info(a);var s=new h(eu.ce(),t);return this.C.Al(new u(this.Cs.getUserId(),e$.Bl,e,s.eu)),this.C.uu(ty.iu.Nl,s),null==this.C.ft(ty.gt.Hl)&&this.C.Bt(ty.gt.Hl,e),s.eu}if(null!=i)return i.ql=e,i.kl=t,this.C.uu(ty.iu.Nl,i),i.eu}Fl(){var e=this.C.tu(ty.iu.Nl);null!=e&&(this.C.Il(ty.iu.Nl),this.C.Al(this.xl(new Date().valueOf(),e)))}},eg=t_,e("ControlMessage",N=class e{constructor(e,t){this.triggerId=e,this.messageExtras=t,this.triggerId=e,this.messageExtras=t,this.extras={},this.isControl=!0,this.Ht=!1}static fromJson(t){return new e(t.trigger_id,t.message_extras)}ts(){return!this.Ht&&(this.Ht=!0,!0)}Do(){return this.Ht}}),ef={Ic:null,Ho:tI},e("InAppMessage",T=class e{constructor(t,i,r,s,n,o,l,u,h,c,d,p,b,g,f,m,v,w,x,y,C,E,S,k,A,N,T,_,I,O){this.message=t,this.messageAlignment=i,this.slideFrom=r,this.extras=s,this.triggerId=n,this.clickAction=o,this.uri=l,this.openTarget=u,this.dismissType=h,this.duration=c,this.icon=d,this.imageUrl=p,this.imageStyle=b,this.iconColor=g,this.iconBackgroundColor=f,this.backgroundColor=m,this.textColor=v,this.closeButtonColor=w,this.animateIn=x,this.animateOut=y,this.header=C,this.headerAlignment=E,this.headerTextColor=S,this.frameColor=k,this.buttons=A,this.cropType=N,this.orientation=T,this.htmlId=_,this.css=I,this.messageExtras=O,this.message=t,this.messageAlignment=i||e.TextAlignment.CENTER,this.duration=c||5e3,this.slideFrom=r||e.SlideFrom.BOTTOM,this.extras=s||{},this.triggerId=n,this.clickAction=o||e.ClickAction.NONE,this.uri=l,this.openTarget=u||e.OpenTarget.NONE,this.dismissType=h||e.DismissType.AUTO_DISMISS,this.icon=d,this.imageUrl=p,this.imageStyle=b||e.ImageStyle.TOP,this.iconColor=g||e.th.ih,this.iconBackgroundColor=f||e.th.sh,this.backgroundColor=m||e.th.ih,this.textColor=v||e.th.hh,this.closeButtonColor=w||e.th.eh,this.animateIn=x,null==this.animateIn&&(this.animateIn=!0),this.animateOut=y,null==this.animateOut&&(this.animateOut=!0),this.header=C,this.headerAlignment=E||e.TextAlignment.CENTER,this.headerTextColor=S||e.th.hh,this.frameColor=k||e.th.Eh,this.buttons=A||[],this.cropType=N||e.CropType.FIT_CENTER,this.orientation=T,this.htmlId=_,this.css=I,this.isControl=!1,this.messageExtras=O,this.nh=!1,this.Ht=!1,this.So=!1,this.Th=!1,this.ho=null,this.jo=null,this.ti=new a,this.oh=new a,this.Co=e.TextAlignment.CENTER}subscribeToClickedEvent(e){return this.ti.Ft(e)}subscribeToDismissedEvent(e){return this.oh.Ft(e)}removeSubscription(e){this.ti.removeSubscription(e),this.oh.removeSubscription(e)}removeAllSubscriptions(){this.ti.removeAllSubscriptions(),this.oh.removeAllSubscriptions()}closeMessage(){this.ll(this.ho)}wo(){return!0}Po(){return this.wo()}bo(){return null!=this.htmlId&&this.htmlId.length>4}lo(){return this.bo()&&null!=this.css&&this.css.length>0}do(){if(this.bo()&&this.lo())return this.htmlId+"-css"}ts(){return!this.Ht&&(this.Ht=!0,!0)}Do(){return this.Ht}$t(e){return!this.So&&(this.So=!0,this.ti.X(),!0)}Qt(){return!this.Th&&(this.Th=!0,this.oh.X(),!0)}hide(t){if(t&&t.parentNode){var i=t.closest(".ab-iam-root");if(null==i&&(i=t),this.wo()&&null!=i.parentNode){var a=i.parentNode.classList;a&&a.contains(e.rh)&&a.remove(e.rh),document.body.removeEventListener("touchmove",e.lh)}i.className=i.className.replace(e.uh,e.ah)}return this.animateOut||!1}ll(t,i){if(null!=t){this.ho=null;var a,r,s=!1;(a=-1===t.className.indexOf("ab-in-app-message")?t.getElementsByClassName("ab-in-app-message")[0]:t)&&(s=this.hide(a));var n=document.body;null!=n&&(r=n.scrollTop);var o=()=>{if(t&&t.parentNode){var e=t.closest(".ab-iam-root");null==e&&(e=t),e.parentNode&&e.parentNode.removeChild(e)}var a=this.do();if(null!=a){var s=document.getElementById(a);s&&s.parentNode&&s.parentNode.removeChild(s)}null!=n&&"Safari"===ec.browser&&(n.scrollTop=r),i?i():this.Qt()};s?setTimeout(o,e.Ih):o(),this.jo&&this.jo.focus()}}Mo(){return document.createTextNode(this.message||"")}$o(e){var t="";this.message||this.header||!this.wo()||(t="Modal Image"),e.setAttribute("alt",t)}static lh(t){if(!t.targetTouches||!(t.targetTouches.length>1)){var i=t.target;i&&i.classList&&i.classList.contains("ab-message-text")&&i.scrollHeight>i.clientHeight||document.querySelector(`.${e.rh}`)&&t.cancelable&&t.preventDefault()}}Ah(t){var i=t.parentNode;this.wo()&&null!=i&&this.orientation!==e.Orientation.LANDSCAPE&&(null!=i.classList&&i.classList.add(e.rh),document.body.addEventListener("touchmove",e.lh,!!tD()&&{passive:!1})),t.className+=" "+e.uh}static Oh(e){if(e.keyCode===tF._h&&!ey.ee(ig.mh)&&document.querySelectorAll(".ab-modal-interactions").length>0){var t=document.getElementsByClassName("ab-html-message"),i=!1;for(var a of t){var r=null;tL(a)&&a.contentWindow&&(r=a.contentWindow.document.getElementsByClassName("ab-programmatic-close-button")[0]),null!=r&&(tz(r),i=!0)}if(!i){var s=document.querySelectorAll(".ab-modal-interactions > .ab-close-button")[0];null!=s&&tz(s)}}}Lh(){this.nh||ey.ee(ig.mh)||(document.addEventListener("keydown",e.Oh,!1),ey.Nh(()=>{document.removeEventListener("keydown",e.Oh)}),this.nh=!0)}bt(t){var i={};return t&&(i[e.es.ra]=this.message,i[e.es.sa]=this.messageAlignment,i[e.es.Sh]=this.slideFrom,i[e.es.vs]=this.extras,i[e.es.ta]=this.triggerId,i[e.es.ia]=this.clickAction,i[e.es.URI]=this.uri,i[e.es.oa]=this.openTarget,i[e.es.pa]=this.dismissType,i[e.es.ma]=this.duration,i[e.es.na]=this.icon,i[e.es.fs]=this.imageUrl,i[e.es.ua]=this.imageStyle,i[e.es.ca]=this.iconColor,i[e.es.fa]=this.iconBackgroundColor,i[e.es.da]=this.backgroundColor,i[e.es.la]=this.textColor,i[e.es.ga]=this.closeButtonColor,i[e.es.ja]=this.animateIn,i[e.es.xa]=this.animateOut,i[e.es.za]=this.header,i[e.es.ha]=this.headerAlignment,i[e.es.va]=this.headerTextColor,i[e.es.wa]=this.frameColor,i[e.es.ya]=this.buttons,i[e.es.Sa]=this.cropType,i[e.es.ba]=this.orientation,i[e.es.ka]=this.htmlId,i[e.es.CSS]=this.css,i[e.es.hs]=t,i[e.es.qa]=this.messageExtras),i}}),T.th={hh:4281545523,ih:4294967295,sh:4278219733,Rh:4293914607,Mh:4283782485,Eh:3224580915,eh:4288387995},T.xo={Dh:"hd",vo:"ias",Ch:"of",dh:"do",Uh:"umt",bh:"tf",Ph:"te"},T.SlideFrom={TOP:"TOP",BOTTOM:"BOTTOM"},T.ClickAction={NEWS_FEED:"NEWS_FEED",URI:"URI",NONE:"NONE"},T.DismissType={AUTO_DISMISS:"AUTO_DISMISS",MANUAL:"SWIPE"},T.OpenTarget={NONE:"NONE",BLANK:"BLANK"},T.ImageStyle={TOP:"TOP",GRAPHIC:"GRAPHIC"},T.Orientation={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE"},T.TextAlignment={START:"START",CENTER:"CENTER",END:"END"},T.CropType={CENTER_CROP:"CENTER_CROP",FIT_CENTER:"FIT_CENTER"},T.po={Yr:"SLIDEUP",Wr:"MODAL",Ao:"MODAL_STYLED",Qr:"FULL",Vr:"WEB_HTML",fo:"HTML",Fo:"HTML_FULL"},T.Ih=500,T.ph=200,T.uh="ab-show",T.ah="ab-hide",T.rh="ab-pause-scrolling",T.es={ra:"m",sa:"ma",Sh:"sf",vs:"e",ta:"ti",ia:"ca",URI:"u",oa:"oa",pa:"dt",ma:"d",na:"i",fs:"iu",ua:"is",ca:"ic",fa:"ibc",da:"bc",la:"tc",ga:"cbc",ja:"ai",xa:"ao",za:"h",ha:"ha",va:"htc",wa:"fc",ya:"b",Sa:"ct",ba:"o",ka:"hi",CSS:"css",hs:"type",Go:"messageFields",qa:"me"},e("HtmlMessage",_=class e extends T{constructor(e,t,i,a,r,s,n,o,l,u,h,c){super(e,void 0,void 0,t,i,void 0,void 0,void 0,a=a||T.DismissType.MANUAL,r,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,s,n,void 0,void 0,void 0,o,void 0,void 0,void 0,l,u,c),this.messageFields=h,this.messageFields=h}Po(){return!1}$t(e){if(this.uo===T.po.Vr){if(this.So)return!1;this.So=!0}return this.ti.X(e),!0}bt(){var t=super.bt(e.ds);return t[T.es.Go]=this.messageFields,t}static Ur(t){return new e(t[T.es.ra],t[T.es.vs],t[T.es.ta],t[T.es.pa],t[T.es.ma],t[T.es.ja],t[T.es.xa],t[T.es.wa],t[T.es.ka],t[T.es.CSS],t[T.es.Go],t[T.es.qa])}}),_.ds=T.po.Vr,e("InAppMessageButton",I=class e{constructor(t,i,r,s,n,o,l){this.text=t,this.backgroundColor=i,this.textColor=r,this.borderColor=s,this.clickAction=n,this.uri=o,this.id=l,this.text=t||"",this.backgroundColor=i||T.th.sh,this.textColor=r||T.th.ih,this.borderColor=s||this.backgroundColor,this.clickAction=n||T.ClickAction.NONE,this.uri=o,null==l&&(l=e.Zi),this.id=l,this.So=!1,this.ti=new a}subscribeToClickedEvent(e){return this.ti.Ft(e)}removeSubscription(e){this.ti.removeSubscription(e)}removeAllSubscriptions(){this.ti.removeAllSubscriptions()}$t(){return!this.So&&(this.So=!0,this.ti.X(),!0)}static fromJson(t){return new e(t.text,t.bg_color,t.text_color,t.border_color,t.click_action,t.uri,t.id)}}),I.Zi=-1,e("FullScreenMessage",O=class e extends T{constructor(e,t,i,a,r,s,n,o,l,u,h,c,d,p,b,g,f,m,v,w,x,y,C,E,S,k,A,N,_){super(e,t,void 0,i,a,r,s,n,o=o||T.DismissType.MANUAL,l,u,h,c,d,p,b,g,f,m,v,w,x,y,C,E,S=S||T.CropType.CENTER_CROP,k=k||T.Orientation.PORTRAIT,A,N,_),this.Co=T.TextAlignment.CENTER}bt(){return super.bt(e.ds)}static Ur(t){return new e(t[T.es.ra],t[T.es.sa],t[T.es.vs],t[T.es.ta],t[T.es.ia],t[T.es.URI],t[T.es.oa],t[T.es.pa],t[T.es.ma],t[T.es.na],t[T.es.fs],t[T.es.ua],t[T.es.ca],t[T.es.fa],t[T.es.da],t[T.es.la],t[T.es.ga],t[T.es.ja],t[T.es.xa],t[T.es.za],t[T.es.ha],t[T.es.va],t[T.es.wa],tq(t[T.es.ya]),t[T.es.Sa],t[T.es.ba],t[T.es.ka],t[T.es.CSS],t[T.es.qa])}}),O.ds=T.po.Qr,e("ModalMessage",D=class e extends T{constructor(e,t,i,a,r,s,n,o,l,u,h,c,d,p,b,g,f,m,v,w,x,y,C,E,S,k,A,N){super(e,t,void 0,i,a,r,s,n,o=o||T.DismissType.MANUAL,l,u,h,c,d,p,b,g,f,m,v,w,x,y,C,E,S=S||T.CropType.FIT_CENTER,void 0,k,A,N),this.Co=T.TextAlignment.CENTER}bt(){return super.bt(e.ds)}static Ur(t){return new e(t[T.es.ra],t[T.es.sa],t[T.es.vs],t[T.es.ta],t[T.es.ia],t[T.es.URI],t[T.es.oa],t[T.es.pa],t[T.es.ma],t[T.es.na],t[T.es.fs],t[T.es.ua],t[T.es.ca],t[T.es.fa],t[T.es.da],t[T.es.la],t[T.es.ga],t[T.es.ja],t[T.es.xa],t[T.es.za],t[T.es.ha],t[T.es.va],t[T.es.wa],tq(t[T.es.ya]),t[T.es.Sa],t[T.es.ka],t[T.es.CSS],t[T.es.qa])}}),D.ds=T.po.Wr,e("SlideUpMessage",B=class e extends T{constructor(e,t,i,a,r,s,n,o,l,u,h,c,d,p,b,g,f,m,v,w,x,y){super(e,t=t||T.TextAlignment.START,i,a,r,s,n,o,l,u,h,c,void 0,d,p,b=b||T.th.Rh,g=g||T.th.Mh,f,m,v,void 0,void 0,void 0,void 0,void 0,void 0,void 0,w,x,y),this.Co=T.TextAlignment.START}wo(){return!1}Mo(){var e=document.createElement("span");return e.appendChild(document.createTextNode(this.message||"")),e}Ah(e){var t=e.getElementsByClassName("ab-in-app-message")[0];ef.Ho(t,!0,!0)||(this.slideFrom===T.SlideFrom.TOP?t.style.top="0px":t.style.bottom="0px"),super.Ah(e)}bt(){return super.bt(e.ds)}static Ur(t){return new e(t[T.es.ra],t[T.es.sa],t[T.es.Sh],t[T.es.vs],t[T.es.ta],t[T.es.ia],t[T.es.URI],t[T.es.oa],t[T.es.pa],t[T.es.ma],t[T.es.na],t[T.es.fs],t[T.es.ca],t[T.es.fa],t[T.es.da],t[T.es.la],t[T.es.ga],t[T.es.ja],t[T.es.xa],t[T.es.ka],t[T.es.CSS],t[T.es.qa])}}),B.ds=T.po.Yr,M=class e{constructor(e){this.xc=e,this.xc=e}yc(e){return null==this.xc||this.xc===e[0]}static fromJson(t){return new e(t?t.event_name:null)}bt(){return this.xc}},(R=class e{constructor(t,i,a,r){this.yE=t,this.HE=i,this.comparator=a,this.LE=r,this.yE=t,this.HE=i,this.comparator=a,this.LE=r,this.HE===e.QE.UE&&this.comparator!==e.wE.XE&&this.comparator!==e.wE.BE&&this.comparator!==e.wE.jE&&this.comparator!==e.wE.zE&&(this.LE=eQ(this.LE))}yc(t){var i=null;switch(null!=t&&(i=t[this.yE]),this.comparator){case e.wE.FE:return null!=i&&i.valueOf()===this.LE.valueOf();case e.wE.kE:return null==i||i.valueOf()!==this.LE.valueOf();case e.wE.xE:return null!=i&&typeof i==typeof this.LE&&i>this.LE;case e.wE.XE:return this.HE===e.QE.UE?null!=i&&eV(i)&&e3(i)<=this.LE.valueOf():null!=i&&typeof i==typeof this.LE&&i>=this.LE;case e.wE.JE:return null!=i&&typeof i==typeof this.LE&&i<this.LE;case e.wE.BE:return this.HE===e.QE.UE?null!=i&&eV(i)&&e3(i)>=this.LE.valueOf():null!=i&&typeof i==typeof this.LE&&i<=this.LE;case e.wE.VE:return null!=i&&"string"==typeof i&&typeof i==typeof this.LE&&null!=i.match(this.LE);case e.wE.qE:return null!=i;case e.wE.PE:return null==i;case e.wE.jE:return null!=i&&eV(i)&&e5(i)<this.LE;case e.wE.zE:return null!=i&&eV(i)&&e5(i)>this.LE;case e.wE.WE:return null==i||typeof i!=typeof this.LE||"string"!=typeof i||null==i.match(this.LE)}return!1}static fromJson(t){return new e(t.property_key,t.property_type,t.comparator,t.property_value)}bt(){var e=this.LE;return eV(this.LE)&&(e=eZ(e.valueOf())),{k:this.yE,t:this.HE,c:this.comparator,v:e}}static En(t){return new e(t.k,t.t,t.c,t.v)}}).QE={ZE:"boolean",$E:"number",tT:"string",UE:"date"},R.wE={FE:1,kE:2,xE:3,XE:4,JE:5,BE:6,VE:10,qE:11,PE:12,jE:15,zE:16,WE:17},z=class e{constructor(e){this.filters=e,this.filters=e}yc(e){for(var t=!0,i=0;i<this.filters.length;i++){for(var a=this.filters[i],r=!1,s=0;s<a.length;s++)if(a[s].yc(e)){r=!0;break}if(!r){t=!1;break}}return t}static fromJson(t){if(null==t||!eK(t))return null;for(var i=[],a=0;a<t.length;a++){for(var r=[],s=t[a],n=0;n<s.length;n++)r.push(R.fromJson(s[n]));i.push(r)}return new e(i)}bt(){for(var e=[],t=0;t<this.filters.length;t++){for(var i=this.filters[t],a=[],r=0;r<i.length;r++)a.push(i[r].bt());e.push(a)}return e}static En(t){for(var i=[],a=0;a<t.length;a++){for(var r=[],s=t[a],n=0;n<s.length;n++)r.push(R.En(s[n]));i.push(r)}return new e(i)}},U=class e{constructor(e,t){this.xc=e,this.tf=t,this.xc=e,this.tf=t}yc(e){if(null==this.xc||null==this.tf)return!1;var t=e[0],i=e[1];return t===this.xc&&this.tf.yc(i)}static fromJson(t){return new e(t?t.event_name:null,t?z.fromJson(t.property_filters):null)}bt(){return{e:this.xc,pf:this.tf?this.tf.bt():null}}},P=class e{constructor(e,t){this.if=e,this.rf=t,this.if=e,this.rf=t}yc(e){if(null==this.if)return!1;var t=q.sf(e[0],this.if);if(!t)return!1;var i=null==this.rf||0===this.rf.length;if(null!=this.rf){for(var a=0;a<this.rf.length;a++)if(this.rf[a]===e[1]){i=!0;break}}return t&&i}static fromJson(t){return new e(t?t.id:null,t?t.buttons:null)}bt(){return this.if}},F=class e{constructor(e){this.productId=e,this.productId=e}yc(e){return null==this.productId||e[0]===this.productId}static fromJson(t){return new e(t?t.product_id:null)}bt(){return this.productId}},L=class e{constructor(e,t){this.productId=e,this.tf=t,this.productId=e,this.tf=t}yc(e){if(null==this.productId||null==this.tf)return!1;var t=e[0],i=e[1];return t===this.productId&&this.tf.yc(i)}static fromJson(t){return new e(t?t.product_id:null,t?z.fromJson(t.property_filters):null)}bt(){return{id:this.productId,pf:this.tf?this.tf.bt():null}}},$=class e{constructor(e){this.if=e,this.if=e}yc(e){return null==this.if||q.sf(e[0],this.if)}static fromJson(t){return new e(t?t.campaign_id:null)}bt(){return this.if}},(q=class e{constructor(e,t){this.type=e,this.data=t,this.type=e,this.data=t}_c(t,i){return e.Ec[this.type]===t&&(null==this.data||this.data.yc(i))}static sf(e,t){var i=null;try{i=window.atob(e)}catch(t){return eo.info("Failed to unencode analytics id "+e+": "+te(t)),!1}return t===i.split("_")[0]}static fromJson(t){var i=t.type,a=null;switch(i){case e.Xr.OPEN:case e.Xr.Bs:break;case e.Xr.Rr:a=F.fromJson(t.data);break;case e.Xr.jc:a=L.fromJson(t.data);break;case e.Xr.hr:a=$.fromJson(t.data);break;case e.Xr.Ee:a=M.fromJson(t.data);break;case e.Xr.Cc:a=U.fromJson(t.data);break;case e.Xr.Bo:a=P.fromJson(t.data)}return new e(i,a)}bt(){return{t:this.type,d:this.data?this.data.bt():null}}static En(t){var i,a=null;switch(t.t){case e.Xr.OPEN:case e.Xr.Bs:break;case e.Xr.Rr:a=new F(t.d);break;case e.Xr.jc:a=new L((i=t.d||{}).id,z.En(i.pf||[]));break;case e.Xr.hr:a=new $(t.d);break;case e.Xr.Ee:a=new M(t.d);break;case e.Xr.Cc:a=new U((i=t.d||{}).e,z.En(i.pf||[]));break;case e.Xr.Bo:a=new P(t.d)}return new e(t.t,a)}}).Xr={OPEN:"open",Rr:"purchase",jc:"purchase_property",hr:"push_click",Ee:"custom_event",Cc:"custom_event_property",Bo:"iam_click",Bs:"test"},q.Ec={},q.Ec[q.Xr.OPEN]=tG.OPEN,q.Ec[q.Xr.Rr]=tG.Rr,q.Ec[q.Xr.jc]=tG.Rr,q.Ec[q.Xr.hr]=tG.hr,q.Ec[q.Xr.Ee]=tG.Ee,q.Ec[q.Xr.Cc]=tG.Ee,q.Ec[q.Xr.Bo]=tG.Bo,q.Ec[q.Xr.Bs]=tG.Bs,(G=class e{constructor(t,i=[],a,r,s=0,n,o,l=0,u=e.td,h,c,d){this.id=t,this.sd=i,this.startTime=a,this.endTime=r,this.priority=s,this.type=n,this.data=o,this.ed=l,this.rd=u,this.Kr=h,this.hd=c,this.od=d,this.id=t,this.sd=i||[],void 0===a&&(a=null),this.startTime=a,void 0===r&&(r=null),this.endTime=r,this.priority=s||0,this.type=n,this.ed=l||0,null==h&&(h=1e3*(this.ed+30)),this.Kr=h,this.data=o,null!=u&&(this.rd=u),this.hd=c,this.od=d||null}nd(t){return null==this.od||this.rd!==e.td&&t-this.od>=1e3*this.rd}ad(e){this.od=e}ud(e){return Math.max(e+1e3*this.ed-new Date().valueOf(),0)}dd(e){var t=new Date().valueOf()-e,i=null==e||isNaN(t)||null==this.Kr||t<this.Kr;return i||eo.info(`Trigger action ${this.type} is no longer eligible for display - fired ${t}ms ago and has a timeout of ${this.Kr}ms.`),!i}static fromJson(t){for(var i=t.id,a=[],r=0;r<t.trigger_condition.length;r++)a.push(q.fromJson(t.trigger_condition[r]));var s=eQ(t.start_time),n=eQ(t.end_time),o=t.priority,l=t.type,u=t.delay,h=t.re_eligibility,c=t.timeout,d=t.data,p=t.min_seconds_since_last_trigger;return eH(e.Xr,l,"Could not construct Trigger from server data","Trigger.Types")?new e(i,a,s,n,o,l,d,u,h,c,p):null}bt(){for(var e=[],t=0;t<this.sd.length;t++)e.push(this.sd[t].bt());return{i:this.id,c:e,s:this.startTime,e:this.endTime,p:this.priority,t:this.type,da:this.data,d:this.ed,r:this.rd,tm:this.Kr,ss:this.hd,ld:this.od}}static En(t){for(var i=[],a=t.c||[],r=0;r<a.length;r++)i.push(q.En(a[r]));return new e(t.i,i,e1(t.s),e1(t.e),t.p,t.t,t.da,t.d,t.r,t.tm,t.ss,t.ld)}}).Xr={Or:"inapp",md:"templated_iam"},G.td=-1,em={openUri:t1,Uo:tQ,Jo:t0,Ga:t3},ev=ir,j=class{constructor(e,t=!1){if(this.language=e,null!=e&&(e=e.toLowerCase()),null!=e&&null==is[e]){var i=e.indexOf("-");i>0&&(e=e.substring(0,i))}if(null==is[e]){var a="Braze does not yet have a localization for language "+e+", defaulting to English. Please contact us if you are willing and able to help us translate our SDK into this language.";t?eo.error(a):eo.info(a),e="en"}this.language=e}get(e){return is[this.language][e]}Oo(){switch(this.language){case"ar":case"he":case"fa":return"rtl";default:return"ltr"}}},ew=io,X=class{constructor(e,t,i,r){this.S=e,this.T=t,this.C=i,this.Cs=r,this.S=e,this.T=t,this.C=i,this.Cs=r,this.Mi=new a,ey.N(this.Mi),this._i=1e3,this.Pi=6e4,this.Gi=null,this.$i=null,this.Oi=null}Xi(){return this.Mi}Hi(e){return this.Mi.Ft(e)}Ji(){return this.Gi}Ki(e){this.Gi=e}ut(e,t,i,a){var r,s=new C;if(t===e$.Li||e instanceof N){if(!e.ts())return eo.info("This in-app message has already received an impression. Ignoring analytics event."),s}else if((t===e$.Qi||e instanceof _&&t===e$.Vi)&&!e.$t(a))return eo.info("This in-app message has already received a click. Ignoring analytics event."),s;return null==(r=e instanceof N?{trigger_ids:[e.triggerId]}:this.Wi(e))?s:(e.messageExtras&&(r.message_extras=e.messageExtras),null!=i&&(r.bid=i),eC.ut(t,r))}Yi(e,t){var i=new C;if(!e.$t())return eo.info("This in-app message button has already received a click. Ignoring analytics event."),i;var a=this.Wi(t);return null==a?i:e.id===I.Zi?(eo.info("This in-app message button does not have a tracking id. Not logging event to Braze servers."),i):(null!=e.id&&(a.bid=e.id),eC.ut(e$.Vi,a))}Ir(e){var t=e.messageFields;return null!=t&&t.is_push_primer||!1}Mr(e){if(e instanceof T){var t,i=e=>{if(e){var t=ts(e);return to(t)?tr(ta.Tr,"In-App Message"):function e(t){if(!t||!tv(t))return!1;var i=ti.properties.type,a=ti.properties.eo,r=t[i];return r===ti.types.io?tn(e,t[a]):r===ti.types.requestPushPermission}(t)&&!eb.wr()?tr(ta.Br,"In-App Message"):void 0}};if(this.Ir(e)&&!eb.wr())return"In-App Message contains a push prompt, but is not eligible for a push prompt. Ignoring.";for(var a of e.buttons||[])if(a.clickAction===T.ClickAction.URI&&a.uri&&tc.test(a.uri)&&(t=i(a.uri)))return t;return e.clickAction===T.ClickAction.URI&&e.uri&&tc.test(e.uri)?i(e.uri):void 0}}_r(e,t){t!==this.Oi&&this.qr(),this.$i=e,this.Oi=t}qr(){null!=this.$i&&(clearTimeout(this.$i),this.$i=null,this.Oi=null)}Er(e,t,i,a){var r=this.S;if(r){this.Oi&&e.triggerId!==this.Oi&&(this.qr(),ed.wi(this.C,ed.O.Gr));var s=r.Nr(!1,!1),n=r.H(s);n.template={trigger_id:e.triggerId,trigger_event_type:t},null!=i&&(n.template.data=i.$r());var o=r.J(n,ed.O.Gr);r.V(n,(r=-1)=>{var s=this.S;if(s){var l=new Date().valueOf();ed.W(this.C,ed.O.Gr,l),-1!==r&&o.push(["X-Braze-Req-Tokens-Remaining",r.toString()]);var u,h,c=!1;ep.Y({url:`${s.Z()}/template/`,data:n,headers:o,tt:t=>{if(!s.st(n,t,o))return void("function"==typeof e.Cr&&e.Cr());if(s.it(),null!=t&&null!=t.templated_message){var i=t.templated_message;if(i.type===G.Xr.Or){var a=t$(i.data);if(null!=a){var r=this.Mr(a);if(r)return eo.error(r),void("function"==typeof e.Cr&&e.Cr());"function"==typeof e.Hr&&e.Hr(a)}}}},error:t=>{c=!0,u=t,h=`getting user personalization for message ${e.triggerId}.`},nt:(r,n)=>{if(new Date().valueOf()-e.Jr<e.Kr){var o=0;if(c){var l=Math.min(e.Kr,this.Pi),d=this._i;null==a&&(a=d),o=Math.min(l,tN(d,3*a))}s.rt(n,()=>{this.Er(e,t,i,o)},ed.O.Gr,t=>this._r(t,e.triggerId),()=>this.qr(),o)}c&&s.et(u,h)}})}},ed.O.Gr)}}Wi(e){if(null==e.triggerId)return eo.info("The in-app message has no analytics id. Not logging event to Braze servers."),null;var t={};return null!=e.triggerId&&(t.trigger_ids=[e.triggerId]),t}sn(e){return!!this.C&&!(!(e&&e instanceof T&&e.constructor!==T)||e instanceof N)&&this.C.Bt(ty.gt.Lr,e.bt())}Ar(){if(!this.C)return null;var e,t=this.C.ft(ty.gt.Lr);if(!t)return null;switch(t.type){case T.po.Qr:e=O.Ur(t);break;case T.po.Vr:case T.po.fo:case T.po.Fo:e=_.Ur(t);break;case T.po.Wr:case T.po.Ao:e=D.Ur(t);break;case T.po.Yr:e=B.Ur(t)}return e&&this.Zr(),e}Zr(){this.C&&this.C.Ut(ty.gt.Lr)}},ex=ip,H=class e{constructor(e,t,i,a,r){this.triggerId=e,this.Hr=t,this.Cr=i,this.Jr=a,this.Kr=r,this.triggerId=e,this.Hr=t,this.Cr=i,this.Jr=a,this.Kr=r}static fromJson(t,i,a,r,s){return null==t||null==t.trigger_id?null:new e(t.trigger_id,i,a,r,s)}},K=class extends v{constructor(e,t,i,a,r){super(),this.tg=e,this.Ts=t,this.C=i,this.Fi=a,this.ig=r,this.tg=e,this.Ts=t,this.C=i,this.Fi=a,this.ig=r,this.sg=[],this.eg=[],this.hg=null,this.ng={},this.og={},this.triggers=[],this.lg=0,this.ag(),this.gg()}fg(){if(this.C){this.hg=this.C.ft(ty.gt.aE)||this.hg,this.ng=this.C.ft(ty.gt.iE)||this.ng,this.og=this.C.ft(ty.gt.nE)||this.og;for(var e=0;e<this.triggers.length;e++){var t=this.triggers[e];t.id&&null!=this.og[t.id]&&t.ad(this.og[t.id])}}}ag(){if(this.C){this.lg=this.C.ft(ty.gt.oE)||0;for(var e=this.C.ft(ty.gt.rE)||[],t=[],i=0;i<e.length;i++)t.push(G.En(e[i]));this.triggers=t,this.fg()}}gg(){var e=this,t=function(t,i,a,r,s){return function(){e.cg(t,i,a,r,s)}},i={};for(var a of this.triggers)a.id&&(i[a.id]=a);for(var r=!1,s=0;s<this.triggers.length;s++){var n=this.triggers[s];if(n.id&&null!=this.ng[n.id]){for(var o=this.ng[n.id],l=[],h=0;h<o.length;h++){var c=o[h],d=n.ud(c.Jr||0);if(d>0){var p=void 0,b=void 0;l.push(c),null!=c.ug&&(p=c.ug),null!=c.dg&&u.RE(c.dg)&&(b=u.En(c.dg));var g=[];if(c.pg&&eK(c.pg))for(var f=0;f<c.pg.length;f++){var m=i[c.pg[f]];null!=m&&g.push(m)}this.eg.push(window.setTimeout(t(n,c.Jr||0,p,b,g),d))}}this.ng[n.id].length>l.length&&(this.ng[n.id]=l,r=!0,0===this.ng[n.id].length&&delete this.ng[n.id])}}r&&this.C&&this.C.Bt(ty.gt.iE,this.ng)}mg(){if(this.C){for(var e=[],t=0;t<this.triggers.length;t++)e.push(this.triggers[t].bt());this.lg=new Date().valueOf(),this.C.Bt(ty.gt.rE,e),this.C.Bt(ty.gt.oE,this.lg)}}bg(){this.C&&((this.C.ft(ty.gt.oE)||0)>this.lg?this.ag():this.fg())}U(e){var t=!1;if(null!=e&&e.triggers){this.ig.Zr(),this.fg();var i,a={},r={};this.triggers=[];for(var s=0;s<e.triggers.length;s++){var n=G.fromJson(e.triggers[s]);if(n){n.id&&null!=this.og[n.id]&&(n.ad(this.og[n.id]),a[n.id]=this.og[n.id]),n.id&&null!=this.ng[n.id]&&(r[n.id]=this.ng[n.id]);for(var o=0;o<n.sd.length;o++)if(n.sd[o]._c(tG.Bs,null)){t=!0;break}this.triggers.push(n)}}eY(this.og,a)||(this.og=a,this.C&&this.C.Bt(ty.gt.nE,this.og)),eY(this.ng,r)||(this.ng=r,this.C&&this.C.Bt(ty.gt.iE,this.ng)),this.mg(),t&&(eo.info("Trigger with test condition found, firing test."),this.Ce(tG.Bs)),this.Ce(tG.OPEN);var l=this.sg;this.sg=[];for(var u=0;u<l.length;u++)i=Array.prototype.slice.call(l[u]),this.Ce(...i)}}cg(e,t,i,a,r){var s,n,o,l=a=>{this.fg();var r=new Date().valueOf();e.dd(t)||(!1===navigator.onLine&&e.type===G.Xr.Or&&a.imageUrl?eo.info(`Not showing ${e.type} trigger action ${e.id} due to offline state.`):e.nd(r)&&this.wg(e,r,i)?0===this.Ts.uc()?eo.info(`Not displaying trigger ${e.id} because neither automaticallyShowInAppMessages() nor subscribeToInAppMessage() were called.`):(this.Ts.X([a]),this.yg(e,r)):eo.info(`Not displaying trigger ${e.id} because display time fell outside of the acceptable time window.`))},u=()=>{this.fg();var s=r.pop();if(null!=s){if(this.Tg(s,t,i,a,r),s.dd(t)){var n=`Server aborted in-app message display, but the timeout on fallback trigger ${s.id} has already elapsed.`;r.length>0&&(n+=" Continuing to fall back."),eo.info(n),u()}else{eo.info(`Server aborted in-app message display. Falling back to lower priority ${s.type} trigger action ${e.id}.`);var o=1e3*s.ed-(new Date().valueOf()-t);o>0?this.eg.push(window.setTimeout(()=>{this.cg(s,t,i,a,r)},o)):this.cg(s,t,i,a,r)}}};switch(e.type){case G.Xr.Or:if(null==(s=t$(e.data))){eo.error(`Could not parse trigger data for trigger ${e.id}, ignoring.`);break}if(n=this.ig.Mr(s)){eo.error(n),u();break}l(s);break;case G.Xr.md:if(null==(o=H.fromJson(e.data,l,u,t,e.Kr||0))){eo.error(`Could not parse trigger data for trigger ${e.id}, ignoring.`);break}this.ig.Er(o,i,a);break;default:eo.error(`Trigger ${e.id} was of unexpected type ${e.type}, ignoring.`)}}Ce(e,t=null,i){if(eH(tG,e,"Cannot fire trigger action.","TriggerEvents")){if(this.Fi&&this.Fi.Zl())return eo.info("Trigger sync is currently in progress, awaiting sync completion before firing trigger event."),void this.sg.push(arguments);this.bg();for(var a=new Date().valueOf(),r=a-(this.hg||0),s=!0,n=!0,o=[],l=0;l<this.triggers.length;l++){var u=this.triggers[l],h=a+1e3*u.ed;if(u.nd(h)&&(null==u.startTime||u.startTime.valueOf()<=a)&&(null==u.endTime||u.endTime.valueOf()>=a)){for(var c=!1,d=0;d<u.sd.length;d++)if(u.sd[d]._c(e,t)){c=!0;break}c&&(s=!1,this.wg(u,h,e)&&(n=!1,o.push(u)))}}if(s)return void eo.info(`Trigger event ${e} did not match any trigger conditions.`);if(n)return void eo.info(`Ignoring ${e} trigger event because a trigger was displayed ${r/1e3}s ago.`);o.sort((e,t)=>e.priority-t.priority);var p=o.pop();null!=p&&(eo.info(`Firing ${p.type} trigger action ${p.id} from trigger event ${e}.`),this.Tg(p,a,e,i,o),0===p.ed?this.cg(p,a,e,i,o):this.eg.push(window.setTimeout(()=>{this.cg(p,a,e,i,o)},1e3*p.ed)))}}changeUser(e=!1){if(this.triggers=[],this.C&&this.C.Ut(ty.gt.rE),!e){this.sg=[],this.hg=null,this.og={},this.ng={};for(var t=0;t<this.eg.length;t++)clearTimeout(this.eg[t]);this.eg=[],this.C&&(this.C.Ut(ty.gt.aE),this.C.Ut(ty.gt.nE),this.C.Ut(ty.gt.iE))}}clearData(){this.triggers=[],this.hg=null,this.og={},this.ng={};for(var e=0;e<this.eg.length;e++)clearTimeout(this.eg[e]);this.eg=[]}wg(e,t,i){if(null==this.hg)return!0;if(i===tG.Bs)return eo.info("Ignoring minimum interval between trigger because it is a test type."),!0;var a=e.hd;return null==a&&(a=this.tg),t-this.hg>=1e3*a}Tg(e,t,i,a,r){this.fg(),e.id&&(this.ng[e.id]=this.ng[e.id]||[]);var s,n={};n.Jr=t,n.ug=i,null!=a&&(s=a.bt()),n.dg=s;var o=[];for(var l of r)l.id&&o.push(l.id);n.pg=o,e.id&&this.ng[e.id].push(n),this.C&&this.C.Bt(ty.gt.iE,this.ng)}yg(e,t){this.fg(),e.ad(t),this.hg=t,e.id&&(this.og[e.id]=t),this.C&&(this.C.Bt(ty.gt.aE,t),this.C.Bt(ty.gt.nE,this.og))}},V=class e{constructor(e,t,i,a,r){this.endpoint=e,this.zn=t,this.publicKey=i,this.Vl=a,this.fl=r,this.endpoint=e||null,this.zn=t||null,this.publicKey=i||null,this.Vl=a||null,this.fl=r||null}bt(){return{e:this.endpoint,c:this.zn,p:this.publicKey,u:this.Vl,v:this.fl}}static En(t){return new e(t.e,e1(t.c),t.p,t.u,t.v)}},J=class{constructor(e,t){this.B=e,this.C=t,this.B=e,this.C=t}getUserId(){var e=this.C.tu(ty.iu.su);if(null==e)return null;var t=e.eu,i=tt(t);if(i>c.ur){for(;i>c.ur;)i=tt(t=t.slice(0,t.length-1));e.eu=t,this.C.uu(ty.iu.su,e)}return t}ou(e){var t=null==this.getUserId();this.C.uu(ty.iu.su,new h(e)),t&&this.C.ru(e)}setCustomUserAttribute(e,t){if(this.B.hu(e))return eo.info('Custom Attribute "'+e+'" is blocklisted, ignoring.'),!1;var i={};return i[e]=t,this.nu(c.lu,i,!0)}nu(e,t,i=!1,a=!1){var r=this.C.mu(this.getUserId(),e,t),s="",n=e,o=t;return i&&(s=" custom","object"==typeof t&&(n=Object.keys(t)[0],"object"==typeof(o=t[n])&&(o=JSON.stringify(o,null,2)))),!a&&r&&eo.info(`Logged${s} attribute ${n} with value ${o}`),r}Sn(e,t,a,r,s){this.nu("push_token",e,!1,!0),this.nu("custom_push_public_key",a,!1,!0),this.nu("custom_push_user_auth",r,!1,!0),this.nu("custom_push_vapid_public_key",s,!1,!0);var n=i.Ls.Fs,o=new i(n,eo),l=new V(e,t,a,r,s);this.C.Bt(ty.gt.qn,l.bt()),o.setItem(n.Ms.cu,n.be,!0)}jn(e){if(this.nu("push_token",null,!1,!0),this.nu("custom_push_public_key",null,!1,!0),this.nu("custom_push_user_auth",null,!1,!0),this.nu("custom_push_vapid_public_key",null,!1,!0),e){var t=i.Ls.Fs,a=new i(t,eo);this.C.Bt(ty.gt.qn,!1),a.setItem(t.Ms.cu,t.be,!1)}}},ey=new class{constructor(){this.un="",this.Oa="",this.Ta=void 0,this.Ra=null,this.an=null,this.S=null,this.Fi=null,this.B=null,this.T=null,this.C=null,this.Cs=null,this.Pa="",this.isInitialized=!1,this.La=!1,this.Ua=new a,this.Wa=new a,this.options={},this.Va=[],this.Fa=[],this.Mi=[],this.Oa="5.8.1"}Ka(e){this.Ua.Ft(e)}Nh(e){this.Wa.Ft(e)}initialize(e,t){if(this._t())return eo.info("Braze has already been initialized with an API key."),!0;this.options=t||{};var i=this.ee(ig.Kh),r=t8(em.Ga());if(r&&"true"===r.brazeLogging&&(i=!0),eo.init(i),eo.info(`Initialization Options: ${JSON.stringify(this.options,null,2)}`),null==e||""===e||"string"!=typeof e)return eo.error("Braze requires a valid API key to be initialized."),!1;this.un=e;var s=this.ee(ig.Zo);if(null==s||""===s||"string"!=typeof s)return eo.error("Braze requires a valid baseUrl to be initialized."),!1;!1===/^https?:/.test(s)&&(s=`https://${s}`);var n=s;if((s=document.createElement("a")).href=n,"/"===s.pathname&&(s=`${s}api/v3`),this.Pa=s.toString(),ec.$a&&!this.ee(ig.Yo))return eo.info("Ignoring activity from crawler bot "+navigator.userAgent),this.La=!0,!1;var o=this.ee(ig.Wh)||!1;if(this.C=eg.Ja(e,o),o&&this.C.Ya(e),new f.se(null,!0).gr(ty.me))return eo.info("Ignoring all activity due to previous opt out"),this.La=!0,!1;for(var l of eW(this.options))-1===eX(ej).indexOf(l)&&eo.warn(`Ignoring unknown initialization option '${l}'.`);if(null!=this.ee(ig.Na)){var u=this.ee(ig.Na);-1!==["mparticle","wordpress","tealium"].indexOf(u)?this.Ta=u:eo.error("Invalid sdk flavor passed: "+u)}var c=this.ee(ej.Vh);if(null!=c){if(eK(c)){for(var d=[],p=0;p<c.length;p++)eH(tC,c[p],"devicePropertyAllowlist contained an invalid value.","DeviceProperties")&&d.push(c[p]);c=d}else eo.error("devicePropertyAllowlist must be an array. Defaulting to all properties."),c=null}var b=this.ee(ig.Ia);if(b){var g=new h(b);this.C.uu(ty.iu.Ia,g)}this.an=new x(this.C,c),this.B=new k(this.C),this.Cs=new J(this.B,this.C),this.T=new A(this.C,this.Cs,this.B,this.ee(ig.Xh));var v=new a;return this.Ra=new m(this.C,this.ee(ig.$h),v),this.N(v),this.S=new y(this.an,this.C,this.Ra,this.Cs,this.T,this.B,this.un,this.Pa,this.Oa,this.Ta||"",this.ee(ig.Zh),this.ee(ig.Qh)),this.Fi=new E(this.un,this.Pa,this.T,this.an,this.Cs,this.B,this.C,e=>{if(this._t())for(var t of this.ar())t.U(e)},this.Ra,this.S),this.Fi.initialize(),o||this.C.Ha(),eo.info(`Initialized for the Braze backend at "${this.ee(ig.Zo)}" with API key "${this.un}".`),ib.p(),this.B.Ke(()=>{var e;this.isInitialized&&(null===(e=this.B)||void 0===e?void 0:e.Be())&&Promise.resolve().then(function(){return eU}).then(e=>{this.isInitialized&&(0,e.default)()})}),this.Fi.rn(()=>{var e;this.isInitialized&&(null===(e=this.B)||void 0===e?void 0:e.Be())&&Promise.resolve().then(function(){return eU}).then(e=>{this.isInitialized&&(0,e.default)(void 0,void 0,!0)})}),this.Ua.X(this.options),this.isInitialized=!0,window.dispatchEvent(new CustomEvent("braze.initialized")),!0}destroy(e){if(eo.destroy(),this._t()){for(var t of(this.Wa.X(),this.Wa.removeAllSubscriptions(),this.Va))t.destroy();for(var i of(this.Va=[],this.Fa))i.clearData(!1);this.Fa=[],this.removeAllSubscriptions(),this.Mi=[],null!=this.Fi&&this.Fi.destroy(),this.Fi=null,this.Ra=null,this.an=null,this.S=null,this.B=null,this.T=null,this.Cs=null,this.options={},this.Ta=void 0,this.isInitialized=!1,this.La=!1,e&&(this.C=null)}}rr(){return!this.Xa()&&!!this._t()}Ma(){return this.un}Sr(){return this.Ra}Z(){return this.Pa}ue(){return this.an}g(){return this.S}ee(e){return this.options[e]}ar(){return this.Fa}nn(){return this.Fi}v(){return this.B}P(){return this.T}j(){return this.C}mr(){if(this.Cs&&this.Fi)return new c(this.Cs,this.Fi)}ir(){return this.Cs}tr(){return!0===this.ee(ig.re)}h(e){var t=!1;for(var i of this.Va)i===e&&(t=!0);t||this.Va.push(e)}_(e){var t=!1;for(var i of this.Fa)i.constructor===e.constructor&&(t=!0);e instanceof v&&!t&&this.Fa.push(e)}N(e){e instanceof a&&this.Mi.push(e)}removeAllSubscriptions(){if(this.rr())for(var e of this.Mi)e.removeAllSubscriptions()}removeSubscription(e){if(this.rr())for(var t of this.Mi)t.removeSubscription(e)}fe(e){this.La=e}_t(){return this.isInitialized}Xa(){return this.La}di(){return this.Oa}},eC=im,W=class{constructor(e){this.C=e,this.C=e}logClick(e,t){var i=new C;if(e.$t(),null==e.url||""===e.url)return eo.info(`Card ${e.id} has no url. Not logging click to Braze servers.`),i;if(t&&e.id&&this.C){var a=this.C.ft(ty.gt.Kt)||{};a[e.id]=!0,this.C.Bt(ty.gt.Kt,a)}var r=this.Lt([e]);if(null==r)return i;var s=t?e$.Mt:e$.Ot;return eC.ut(s,r)}Pt(e){var t=new C;if(!e.Qt())return eo.info(`Card ${e.id} refused this dismissal. Ignoring analytics event.`),t;if(e.id&&this.C){var i=this.C.ft(ty.gt.Vt)||{};i[e.id]=!0,this.C.Bt(ty.gt.Vt,i)}var a=this.Lt([e]);return null==a?t:eC.ut(e$.Wt,a)}Xt(e,t){var i=new C(!0),a=[],r=[],s={};for(var n of(this.C&&(s=t?this.C.ft(ty.gt.Yt)||{}:this.C.ft(ty.gt.Zt)||{}),e))n.ts()?(n instanceof l?r.push(n):a.push(n),n.id&&(s[n.id]=!0)):eo.info(`Card ${n.id} logged an impression too recently. Ignoring analytics event.`);var o=this.Lt(a),u=this.Lt(r);if(null==o&&null==u)return i.tt=!1,i;if(this.C&&(t?this.C.Bt(ty.gt.Yt,s):this.C.Bt(ty.gt.Zt,s)),null!=o){var h=t?e$.ss:e$.ns,c=eC.ut(h,o);i.rs(c)}if(null!=u&&t){var d=eC.ut(e$.os,u);i.rs(d)}return i}Lt(e){for(var t,i=null,a=0;a<e.length;a++)null!=(t=e[a].id)&&""!==t&&((i=i||{}).ids=i.ids||[],i.ids.push(t));return i}},eE=iv,Y=class{constructor(e,t){this.cards=e,this.lastUpdated=t,this.cards=e,this.lastUpdated=t}getUnreadCardCount(){var e=0;for(var t of this.cards)t.viewed||t instanceof l||e++;return e}nr(){eo.error("Must be implemented in a subclass")}logCardImpressions(e){eo.error("Must be implemented in a subclass")}logCardClick(e){eo.error("Must be implemented in a subclass")}sr(){eo.error("Must be implemented in a subclass")}},Y.dr=6e4,Y.Ih=500,Y.Ro=1e4,Z=class extends v{constructor(e,t,r,s,n){super(),this.Cs=e,this.C=t,this.B=r,this.Ss=s,this.S=n,this.Cs=e,this.C=t,this.B=r,this.Ss=s,this.S=n,this.Ts=new a,ey.N(this.Ts),this.Rs=0,this.Us=0,this.cards=[],this.Ds();var o=i.Ls.Fs;new i(o,eo).Ns(o.Ms.Js,e=>{this.$s(e)}),this.Es=null,this.k=null,this.Ps=null,this.Xs=null,this._s=10}Gs(){return this.Es}Hs(e){this.Es=e}Ct(){return this.k}Tt(e){this.k=e}Ds(){if(this.C){for(var e=this.C.ft(ty.gt.Is)||[],t=[],i=0;i<e.length;i++){var a=iA(e[i]);null!=a&&t.push(a)}this.cards=this.Ks(this.Os(t,!1)),this.Rs=this.C.ft(ty.gt.Qs)||this.Rs,this.Us=this.C.ft(ty.gt.Vs)||this.Us}}Ws(e,t=!1,i=0,a=0){var r;if(t)for(var s of(r=[],this.cards))s.test&&r.push(s);else r=this.cards.slice();for(var n=0;n<e.length;n++){for(var o=e[n],l=null,u=0;u<this.cards.length;u++)if(o.id===this.cards[u].id){l=this.cards[u];break}if(t){var h=ik(o);null!=l&&l.viewed&&h&&(h.viewed=!0),null!=h&&r.push(h)}else if(null==l){var c=ik(o);null!=c&&r.push(c)}else if(!l.ri(o)){for(var d=0;d<r.length;d++)if(o.id===r[d].id){r.splice(d,1);break}}}this.cards=this.Ks(this.Os(r,t)),this.Ys(),this.Rs=i,this.Us=a,this.C&&(this.C.Bt(ty.gt.Qs,this.Rs),this.C.Bt(ty.gt.Vs,this.Us))}U(e){if(this.Zs()&&null!=e&&e.cards){this.C&&this.C.Bt(ty.gt.fi,ey.di());var t=e.full_sync;t||this.Ds(),this.Ws(e.cards,t,e.last_full_sync_at,e.last_card_updated_at),this.Ts.X(this.pi(!0))}}Ci(e){this.bi(),this.Ps=e}$s(e){if(this.Zs()){this.Ds();var t,i=this.cards.slice(),a=null;a=null===(t=this.Cs)||void 0===t?void 0:t.getUserId();for(var r=0;r<e.length;r++)if(a===e[r].userId||null==a&&null==e[r].userId){for(var s=e[r].card,n=null,o=0;o<this.cards.length;o++)if(s.id===this.cards[o].id){n=this.cards[o];break}if(null==n){var l=ik(s);null!=l&&i.push(l)}else if(!n.ri(s)){for(var u=0;u<i.length;u++)if(s.id===i[u].id){i.splice(u,1);break}}}this.cards=this.Ks(this.Os(i,!1)),this.Ys(),this.Ts.X(this.pi(!0))}}Os(e,t){var i={},a={},r={};this.C&&(i=this.C.ft(ty.gt.Kt)||{},a=this.C.ft(ty.gt.Yt)||{},r=this.C.ft(ty.gt.Vt)||{});for(var s={},n={},o={},l=0;l<e.length;l++){var u=e[l].id;u&&(i[u]&&(e[l].clicked=!0,s[u]=!0),a[u]&&(e[l].viewed=!0,n[u]=!0),r[u]&&(e[l].dismissed=!0,o[u]=!0))}return t&&this.C&&(this.C.Bt(ty.gt.Kt,s),this.C.Bt(ty.gt.Yt,n),this.C.Bt(ty.gt.Vt,o)),e}Ks(e){var t=[],i=new Date,a={};this.C&&(a=this.C.ft(ty.gt.Vt)||{});for(var r=!1,s=0;s<e.length;s++){var n=e[s].url;if(!this.Ss&&n&&t7(n)){eo.error(`Card with url ${n} will not be displayed because Javascript URLs are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable this card.`);continue}var o=e[s].expiresAt,l=!0;if(null!=o&&(l=o>=i),l=l&&!e[s].dismissed)t.push(e[s]);else{var u=e[s].id;u&&(a[u]=!0),r=!0}}return r&&this.C&&this.C.Bt(ty.gt.Vt,a),t}Ys(){for(var e,t=[],i=0;i<this.cards.length;i++)t.push(this.cards[i].bt());null===(e=this.C)||void 0===e||e.Bt(ty.gt.Is,t)}bi(){this.Ps&&(clearTimeout(this.Ps),this.Ps=null)}vi(e,t,i=!1){var a,r=this.S,s=this.C;if(!r||!s)return void("function"==typeof t&&t());if(i&&(ed.wi(s,ed.O.gi),this.bi()),!this.Zs())return void(null===(a=this.B)||void 0===a||a.ji(()=>{this.vi(e,t,!0)}));var n=r.H({},!0);s.ft(ty.gt.fi)!==ey.di()&&this.yi(),n.last_full_sync_at=this.Rs,n.last_card_updated_at=this.Us;var o=r.J(n,ed.O.gi,i),l=!1;r.V(n,(i=-1)=>{if(this.C){var a=new Date().valueOf();ed.W(this.C,ed.O.gi,a)}-1!==i&&o.push(["X-Braze-Req-Tokens-Remaining",i.toString()]),ep.Y({url:`${r.Z()}/content_cards/sync`,data:n,headers:o,tt:i=>{if(!r.st(n,i,o))return l=!0,void("function"==typeof t&&t());r.it(),this.U(i),l=!1,"function"==typeof e&&e()},error:e=>{r.et(e,"retrieving content cards"),l=!0,"function"==typeof t&&t()},nt:(i,a)=>{var s;if(l){var n=this.Xs;(null==n||n<1e3*this._s)&&(n=1e3*this._s),s=Math.min(3e5,tN(1e3*this._s,3*n))}r.rt(a,()=>{this.vi(e,t,!1)},ed.O.gi,e=>this.Ci(e),()=>this.bi(),s)}})},ed.O.gi,t)}pi(e){e||this.Ds();var t=this.Ks(this.cards);t.sort((e,t)=>e.pinned&&!t.pinned?-1:t.pinned&&!e.pinned?1:e.updated&&t.updated&&e.updated>t.updated?-1:e.updated&&t.updated&&t.updated>e.updated?1:0);var i=Math.max(this.Us||0,this.Rs||0);return 0===i&&(i=void 0),this.C&&this.C.ft(ty.gt.Vs)===this.Us&&void 0===i&&(i=this.Us),new Q(t,eQ(i))}qt(e){return this.Ts.Ft(e)}yi(){this.Rs=0,this.Us=0,this.C&&(this.C.Ut(ty.gt.Qs),this.C.Ut(ty.gt.Vs))}changeUser(e){e||(this.cards=[],this.Ts.X(new Q(this.cards.slice(),null)),this.C&&(this.C.Ut(ty.gt.Is),this.C.Ut(ty.gt.Kt),this.C.Ut(ty.gt.Yt),this.C.Ut(ty.gt.Vt))),this.yi()}clearData(e){this.Rs=0,this.Us=0,this.cards=[],this.Ts.X(new Q(this.cards.slice(),null)),e&&this.C&&(this.C.Ut(ty.gt.Is),this.C.Ut(ty.gt.Kt),this.C.Ut(ty.gt.Yt),this.C.Ut(ty.gt.Vt),this.C.Ut(ty.gt.Qs),this.C.Ut(ty.gt.Vs))}Zs(){return!!this.B&&(!!this.B.Ri()||(0!==this.B.Et()&&this.Ui(),!1))}Ui(){this.Ts.X(new Q([],new Date)),this.C&&this.C.Ut(ty.gt.Is)}},eS=iN,e("ContentCards",Q=class extends Y{constructor(e,t){super(e,t)}getUnviewedCardCount(){return super.getUnreadCardCount()}logCardImpressions(e){iy(e,!0)}logCardClick(e){return iw(e,!0)}sr(){iT()}nr(){return!0}}),Q.dr=6e4,ek={oo:iB,no:iR},eA=Object.freeze({__proto__:null,changeUser:iZ}),eN=Object.freeze({__proto__:null,logCustomEvent:i8}),eT=Object.freeze({__proto__:null,logPurchase:i7}),e_=Object.freeze({__proto__:null,requestImmediateDataFlush:ae}),ee=class extends v{constructor(e,t){super(),this.C=e,this.Fi=t,this.cards=[],this.xi=null,this.C=e,this.Fi=t,this.Ts=new a,ey.N(this.Ts),this.Ds()}Ds(){var e=[];this.C&&(e=this.C.ft(ty.gt.qi)||[]);for(var t=[],i=0;i<e.length;i++){var a=iA(e[i]);null!=a&&t.push(a)}this.cards=t,this.C&&(this.xi=e1(this.C.ft(ty.gt.zi)))}ki(e){var t=[],i={};this.C&&(i=this.C.ft(ty.gt.Zt)||{});for(var a={},r=0;r<e.length;r++){var s,n=iS((s=e[r]).id,s.type,s.viewed,s.title,s.image,s.description,eQ(s.created),eQ(s.updated),s.categories,eQ(s.expires_at),s.url,s.domain,s.aspect_ratio,s.extras,!1,!1);if(null!=n){var o=n.id;o&&i[o]&&(n.viewed=!0,a[o]=!0),t.push(n)}}this.cards=t,this.Ys(),this.xi=new Date,this.C&&(this.C.Bt(ty.gt.Zt,a),this.C.Bt(ty.gt.zi,this.xi))}Ys(){for(var e,t=[],i=0;i<this.cards.length;i++)t.push(this.cards[i].bt());null===(e=this.C)||void 0===e||e.Bt(ty.gt.qi,t)}U(e){null!=e&&e.feed&&(this.Ds(),this.ki(e.feed),this.Ts.X(new et(this.cards.slice(),this.xi)))}Bi(){this.Ds();for(var e=[],t=new Date,i=0;i<this.cards.length;i++){var a=this.cards[i].expiresAt,r=!0;null!=a&&(r=a>=t),r&&e.push(this.cards[i])}return new et(e,this.xi)}vi(){this.Fi&&this.Fi.requestFeedRefresh()}qt(e){return this.Ts.Ft(e)}clearData(e){null==e&&(e=!1),this.cards=[],this.xi=null,e&&this.C&&(this.C.Ut(ty.gt.qi),this.C.Ut(ty.gt.zi)),this.Ts.X(new et(this.cards.slice(),this.xi))}},eI=an,e("Feed",et=class extends Y{constructor(e,t){super(e,t)}logCardImpressions(e){iy(e,!1)}logCardClick(e){return iw(e,!1)}sr(){ao()}nr(){return!1}}),eO=Object.freeze({__proto__:null,showFeed:ac}),(ei=class e{constructor(e,t,i,a,r,s,n,o,l,u,h){this.on=e,this.un=t,this.an=i,this.hn=r,this.cn=s,this.fn=n,this.B=o,this.ln=l,this.dn=u,this.C=h,this.on=e,this.un=t,this.an=i,this.pn=a+"/safari/"+t,this.hn=r||"/service-worker.js",this.fn=n,this.B=o,this.ln=l||!1,this.dn=u||!1,this.C=h,this.bn=eb.yn(),this.mn=eb.gn()}vn(){return this.dn}wn(e,t,i,a,r){e.unsubscribe().then(e=>{e?this.kn(t,i,a,r):(eo.error("Failed to unsubscribe device from push."),"function"==typeof r&&r(!1))}).catch(e=>{eo.error("Push unsubscription error: "+e),"function"==typeof r&&r(!1)})}Pn(e,t,i){var a,r,s=(e=>{if("string"==typeof e)return e;if(0!==e.endpoint.indexOf("https://android.googleapis.com/gcm/send"))return e.endpoint;var t=e.endpoint;return e.Dn&&-1===e.endpoint.indexOf(e.Dn)&&(t=e.endpoint+"/"+e.Dn),t})(e),n=null,o=null;if(null!=e.getKey)try{var l=Array.from(new Uint8Array(e.getKey("p256dh"))),u=Array.from(new Uint8Array(e.getKey("auth")));n=btoa(String.fromCharCode.apply(null,l)),o=btoa(String.fromCharCode.apply(null,u))}catch(e){eo.error(te(e))}var h=e.options&&(a=e.options.applicationServerKey)&&a.byteLength&&a.byteLength>0?btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(a)))).replace(/\+/g,"-").replace(/\//g,"_"):null;null===(r=this.on)||void 0===r||r.Sn(s,t,n,o,h),s&&"function"==typeof i&&i(s,n,o)}An(){var e;null===(e=this.on)||void 0===e||e.jn(!0)}xn(e,t){var i;null===(i=this.on)||void 0===i||i.jn(!1),eo.info(e),"function"==typeof t&&t(!1)}Nn(e,t,i,a){var r;if("default"===t.permission)try{window.safari.pushNotification.requestPermission(this.pn,e,{api_key:this.un,device_id:(null===(r=this.an)||void 0===r?void 0:r.ve().id)||""},t=>{"granted"===t.permission&&this.on&&this.on.setPushNotificationSubscriptionType(c.NotificationSubscriptionTypes.OPTED_IN),this.Nn(e,t,i,a)})}catch(e){this.xn("Could not request permission for push: "+e,a)}else"denied"===t.permission?this.xn("The user has blocked notifications from this site, or Safari push is not configured in the Braze dashboard.",a):"granted"===t.permission&&(eo.info("Device successfully subscribed to push."),this.Pn(t.deviceToken,new Date,i))}requestPermission(e,t,i){var a=a=>{switch(a){case"granted":return void("function"==typeof e&&e());case"default":return void("function"==typeof t&&t());case"denied":return void("function"==typeof i&&i());default:eo.error("Received unexpected permission result "+a)}},r=!1;if("default"!==window.Notification.permission)a(Notification.permission);else{var s=window.Notification.requestPermission(e=>{r&&a(e)});s?s.then(e=>{a(e)}):r=!0}}kn(e,t,i,a){var r={userVisibleOnly:!0};null!=t&&(r.applicationServerKey=t),e.pushManager.subscribe(r).then(e=>{eo.info("Device successfully subscribed to push."),this.Pn(e,new Date,i)}).catch(e=>{eb.isPushBlocked()?(eo.info("Permission for push notifications was denied."),"function"==typeof a&&a(!1)):(eo.error("Push subscription failed: "+e),"function"==typeof a&&a(!0))})}Un(){if(this.ln)return navigator.serviceWorker.getRegistration(this.hn);var e=this.cn?{scope:this.cn}:void 0;return navigator.serviceWorker.register(this.hn,e).then(()=>navigator.serviceWorker.ready.then(e=>(e&&"function"==typeof e.update&&e.update().catch(e=>{eo.info("ServiceWorker update failed: "+e)}),e)))}Wn(e){this.ln||(e.unregister(),eo.info("Service worker successfully unregistered."))}subscribe(t,i){if(!eb.isPushSupported())return eo.info(e._n),void("function"==typeof i&&i(!1));if(this.bn){if(!this.ln&&null!=window.location){var a=this.hn;-1===a.indexOf(window.location.host)&&(a=window.location.host+a),-1===a.indexOf(window.location.protocol)&&(a=window.location.protocol+"//"+a)}if(eb.isPushBlocked())return void this.xn("Notifications from this site are blocked. This may be a temporary embargo or a permanent denial.",i);if(this.B&&!this.B.Tn()&&0===this.B.Et())return eo.info("Waiting for VAPID key from server config before subscribing to push."),void this.B.In(()=>{this.subscribe(t,i)});var r=eb.isPushPermissionGranted();this.requestPermission(()=>{!r&&this.on&&this.on.setPushNotificationSubscriptionType(c.NotificationSubscriptionTypes.OPTED_IN),this.Un().then(e=>{if(null==e)return eo.error("No service worker registration. Set the `manageServiceWorkerExternally` initialization option to false or ensure that your service worker is registered before calling registerPush."),void("function"==typeof i&&i(!0));e.pushManager.getSubscription().then(a=>{var r=null;if(null!=(null===(s=this.B)||void 0===s?void 0:s.Tn())&&(r=el.Vn(this.B.Tn())),a){var s,n,o,l=null,u=null;if(this.C&&(o=this.C.ft(ty.gt.qn)),o&&!eK(o)){try{n=V.En(o).zn}catch(e){n=null}null==n||isNaN(n.getTime())||0===n.getTime()||(u=new Date(l=n)).setMonth(l.getMonth()+6)}null!=r&&a.options&&a.options.applicationServerKey&&a.options.applicationServerKey.byteLength&&a.options.applicationServerKey.byteLength>0&&!eY(r,new Uint8Array(a.options.applicationServerKey))?(a.options.applicationServerKey.byteLength>12?eo.info("Device was already subscribed to push using a different VAPID provider, creating new subscription."):eo.info("Attempting to upgrade a gcm_sender_id-based push registration to VAPID - depending on the browser this may or may not result in the same gcm_sender_id-based subscription."),this.wn(a,e,r,t,i)):a.expirationTime&&new Date(a.expirationTime).valueOf()<=new Date().valueOf()?(eo.info("Push subscription is expired, creating new subscription."),this.wn(a,e,r,t,i)):o&&eK(o)?this.wn(a,e,r,t,i):null==u?(eo.info("No push subscription creation date found, creating new subscription."),this.wn(a,e,r,t,i)):u.valueOf()<=new Date().valueOf()?(eo.info("Push subscription older than 6 months, creating new subscription."),this.wn(a,e,r,t,i)):(eo.info("Device already subscribed to push, sending existing subscription to backend."),this.Pn(a,l,t))}else this.kn(e,r,t,i)}).catch(e=>{eo.error("Error checking current push subscriptions: "+e)})}).catch(e=>{eo.error("ServiceWorker registration failed: "+e)})},()=>{var e="Permission for push notifications was ignored.";eb.isPushBlocked()&&(e+=" The browser has automatically blocked further permission requests for a period (probably 1 week)."),eo.info(e),"function"==typeof i&&i(!0)},()=>{eo.info("Permission for push notifications was denied."),"function"==typeof i&&i(!1)})}else if(this.mn){if(null==this.fn||""===this.fn)return eo.error("You must supply the safariWebsitePushId initialization option in order to use registerPush on Safari"),void("function"==typeof i&&i(!0));var s=window.safari.pushNotification.permission(this.fn);this.Nn(this.fn,s,t,i)}}unsubscribe(t,i){if(!eb.isPushSupported())return eo.info(e._n),void("function"==typeof i&&i());this.bn?navigator.serviceWorker.getRegistration(this.hn).then(e=>{e?e.pushManager.getSubscription().then(a=>{a?(this.An(),a.unsubscribe().then(a=>{a?(eo.info("Device successfully unsubscribed from push."),"function"==typeof t&&t()):(eo.error("Failed to unsubscribe device from push."),"function"==typeof i&&i()),this.Wn(e)}).catch(e=>{eo.error("Push unsubscription error: "+e),"function"==typeof i&&i()})):(eo.info("Device already unsubscribed from push."),"function"==typeof t&&t())}).catch(e=>{eo.error("Error unsubscribing from push: "+e),"function"==typeof i&&i()}):(eo.info("Device already unsubscribed from push."),"function"==typeof t&&t())}):this.mn&&(this.An(),eo.info("Device unsubscribed from push."),"function"==typeof t&&t())}})._n="Push notifications are not supported in this browser.",eB=Object.freeze({__proto__:null,default:eD=am}),eM=Object.freeze({__proto__:null,requestPushPermission:av}),eR=Object.freeze({__proto__:null,unregisterPush:aw}),e("FeatureFlag",ea=class e{constructor(e,t=!1,i={},a){this.id=e,this.enabled=t,this.properties=i,this.trackingString=a,this.id=e,this.enabled=t,this.properties=i,this.trackingString=a}he(e,t,i){var a=this.properties[e];return null==a?(this.ye(e),null):t(a)?a.value:(this.Pe(i),null)}getStringProperty(e){return this.he(e,this.Ie,"string")}getNumberProperty(e){return this.he(e,this.Te,"number")}getBooleanProperty(e){return this.he(e,this.Ne,"boolean")}getImageProperty(e){return this.he(e,this.Re,"image")}getJsonProperty(e){return this.he(e,this.Se,"jsonobject")}getTimestampProperty(e){return this.he(e,this.Ae,"datetime")}bt(){var t={};return t[e.es.ps]=this.id,t[e.es.Fe]=this.enabled,t[e.es.we]=this.properties,t[e.es.xe]=this.trackingString,t}Pe(e){eo.info(`Property is not of type ${e}.`)}ye(e){eo.info(`${e} not found in feature flag properties.`)}Ie(e){return"string"===e.type&&"string"==typeof e.value}Te(e){return"number"===e.type&&"number"==typeof e.value}Ne(e){return"boolean"===e.type&&"boolean"==typeof e.value}Re(e){return"image"===e.type&&"string"==typeof e.value}Se(e){return"jsonobject"===e.type&&"object"==typeof e.value&&e.value.constructor==Object}Ae(e){return"datetime"===e.type&&"number"==typeof e.value}}),ea.es={ps:"id",Fe:"e",we:"pr",xe:"fts"},ea.ui={ps:"id",Fe:"enabled",we:"properties",xe:"fts"},er=class extends v{constructor(e,t,i,r){super(),this.B=e,this.S=t,this.C=i,this.T=r,this.De=[],this.qe=0,this.B=e,this.S=t,this.C=i,this.T=r,this.ze=null,this.ke=new a,this.R=10,this.I=null,this.q=null,ey.N(this.ke)}U(e){var t;if((null===(t=this.B)||void 0===t?void 0:t.Be())&&null!=e&&e.feature_flags){for(var i of(this.De=[],e.feature_flags)){var a=function(e){if(e[ea.ui.ps]&&"boolean"==typeof e[ea.ui.Fe])return new ea(e[ea.ui.ps],e[ea.ui.Fe],e[ea.ui.we],e[ea.ui.xe]);eo.info(`Unable to create feature flag from ${JSON.stringify(e,null,2)}`)}(i);a&&this.De.push(a)}this.qe=new Date().getTime(),this.Me(),this.ke.X(this.De)}}Ue(){var e={};this.C&&(e=this.C.ft(ty.gt.Xe));var t={};for(var i in e){var a=function(e){if(e[ea.es.ps]&&"boolean"==typeof e[ea.es.Fe])return new ea(e[ea.es.ps],e[ea.es.Fe],e[ea.es.we],e[ea.es.xe]);eo.info(`Unable to deserialize feature flag from ${JSON.stringify(e,null,2)}`)}(e[i]);a&&(t[a.id]=a)}return t}_e(){var e;return(null===(e=this.C)||void 0===e?void 0:e.ft(ty.gt.Ge))||{}}He(e){this.C&&this.C.Bt(ty.gt.Ge,e)}qt(e){return this.ke.Ft(e)}refreshFeatureFlags(e,t,i=!1,a=!0){var r=()=>{"function"==typeof t&&t(),this.ke.X(this.De)};if(!this.Je(i))return!this.ze&&this.B&&(this.ze=this.B.Ke(()=>{this.refreshFeatureFlags(e,t)})),void r();var s=this.S;if(!s)return void r();a&&this.G();var n=s.H({},!0),o=s.J(n,ed.O.Le),l=!1;s.V(n,(a=-1)=>{var s=this.S;if(!s)return void r();var u=new Date().valueOf();ed.W(this.C,ed.O.Le,u),-1!==a&&o.push(["X-Braze-Req-Tokens-Remaining",a.toString()]),ep.Y({url:`${s.Z()}/feature_flags/sync`,headers:o,data:n,tt:t=>{if(!s.st(n,t,o))return l=!0,void r();s.it(),this.U(t),l=!1,"function"==typeof e&&e()},error:e=>{s.et(e,"retrieving feature flags"),l=!0,r()},nt:(a,r)=>{var n;if(l){var o=this.I;(null==o||o<1e3*this.R)&&(o=1e3*this.R),n=Math.min(3e5,tN(1e3*this.R,3*o))}s.rt(r,()=>{this.refreshFeatureFlags(e,t,i,!0)},ed.O.Le,e=>this.ot(e),()=>this.G(),n)}})},ed.O.Le,t)}G(){null!=this.q&&(clearTimeout(this.q),this.q=null)}ot(e){this.G(),this.q=e}Je(e){if(!this.B)return!1;if(!e){var t=this.B.Oe();if(null==t)return!1;var i=!1;if(!isNaN(t)){if(-1===t)return eo.info("Feature flag refreshes not allowed"),!1;i=new Date().getTime()>=(this.qe||0)+1e3*t}if(!i)return eo.info(`Feature flag refreshes were rate limited to ${t} seconds`),!1}return this.B.Be()}Qe(){var e;return(null===(e=this.C)||void 0===e?void 0:e.ft(ty.gt.Ve))||null}We(){var e,t;null===(e=this.C)||void 0===e||e.Bt(ty.gt.Ve,null===(t=this.T)||void 0===t?void 0:t.St())}Ye(){var e,t=null===(e=this.T)||void 0===e?void 0:e.St(),i=this.Qe();return null==i||t===i}Me(){if(this.C){var e={};for(var t of this.De){var i=t.bt();e[t.id]=i}this.C.Bt(ty.gt.Xe,e),this.C.Bt(ty.gt.Ze,this.qe),this.We()}}},ez=ax,eU=Object.freeze({__proto__:null,default:ay,refreshFeatureFlags:aC}),e("Banner",es=class{constructor(e,t,i,a=!1,r=!1,s=-1){this.id=e,this.placementId=t,this.html=i,this.At=a,this.isControl=r,this.Gt=s,this.id=e,this.placementId=t,this.html=i,this.At=a,this.isControl=r,this.Gt=s,this.Ht=!1}Jt(){return this.isControl}bt(){return{id:this.id,o:this.placementId,html:this.html,t:this.At,i:this.isControl,u:this.Gt}}}),en=class extends v{constructor(e,t,i,r){super(),this.B=e,this.S=t,this.C=i,this.T=r,this.banners={},this.B=e,this.S=t,this.C=i,this.T=r,this.R=10,this.I=null,this.q=null,this.F=new a,ey.N(this.F),this.k=null,this.D=null}U(e){if(this.L()&&null!=e&&e.banners){this.banners={};var t=e.banners;for(var i in t){var a,r=t[i],s=null;null!=r&&null!=r.banner&&(a=r.banner,s=new es(a.id,a.placement_id,a.html,a.is_test_send,a.is_control,a.expires_at)),s&&(this.banners[i]=s)}this.M(),this.F.X(this.banners)}}$(e,t,i,a=!0){var r,s=()=>{"function"==typeof i&&i()};if(!this.L())return void(null===(r=this.B)||void 0===r||r.A(()=>{this.$(e,t,i)}));var n=this.S;if(!n)return void s();a&&this.G();var o=n.H({},!0),l=[];for(var u of e)l.push({id:u});o.placements=l;var h=n.J(o,ed.O.K),c=!1;n.V(o,(a=-1)=>{var r=this.S;if(!r)return void s();var n=new Date().valueOf();ed.W(this.C,ed.O.K,n),-1!==a&&h.push(["X-Braze-Req-Tokens-Remaining",a.toString()]),ep.Y({url:`${r.Z()}/banners/sync`,headers:h,data:o,tt:e=>{if(!r.st(o,e,h))return c=!0,void s();r.it(),this.U(e),c=!1,"function"==typeof t&&t()},error:e=>{r.et(e,"retrieving banners"),c=!0,s()},nt:(a,s)=>{var n;if(this.D=e,c){var o=this.I;(null==o||o<1e3*this.R)&&(o=1e3*this.R),n=Math.min(3e5,tN(1e3*this.R,3*o))}r.rt(s,()=>{this.$(e,t,i,!1)},ed.O.K,e=>this.ot(e),()=>this.G(),n)}})},ed.O.K,i)}ht(){return this.D}lt(e,t){var i={id:e.id};return t&&(i.bid=t),eC.ut(e$.ct,i).tt}G(){null!=this.q&&(clearTimeout(this.q),this.q=null)}ot(e){this.G(),this.q=e}dt(){var e={};this.C&&(e=this.C.ft(ty.gt.vt));var t={};for(var i in e){var a,r=null;null!=e[i]&&(a=e[i],r=new es(a.id,a.o,a.html,a.t,a.i,a.u)),r&&(t[r.placementId]=r)}return t}M(){if(this.C){var e,t={};for(var i in this.banners){var a=(null===(e=this.banners[i])||void 0===e?void 0:e.bt())||null;t[i]=a}this.C.Bt(ty.gt.vt,t),this.jt()}}jt(){var e,t;null===(e=this.C)||void 0===e||e.Bt(ty.gt.yt,null===(t=this.T)||void 0===t?void 0:t.St())}wt(){var e;return(null===(e=this.C)||void 0===e?void 0:e.ft(ty.gt.yt))||null}Ct(){return this.k}Tt(e){this.k=e}Rt(){var e,t=null===(e=this.T)||void 0===e?void 0:e.St(),i=this.wt();return null!=i&&t===i}It(){var e,t=null===(e=this.T)||void 0===e?void 0:e.St(),i=this.wt();return null==i||t===i}qt(e){return this.F.Ft(e)}Nt(){var e;return(null===(e=this.C)||void 0===e?void 0:e.ft(ty.gt.kt))||{}}xt(e){this.C&&this.C.Bt(ty.gt.kt,e)}changeUser(){this.zt()}L(){return!!this.B&&(!!this.B.Dt()||(0!==this.B.Et()&&this.zt(),!1))}zt(){this.banners={},this.C&&(this.C.Ut(ty.gt.vt),this.C.Ut(ty.gt.kt)),this.F.X({})}},eP=aN,e({Banner:es,BrazeSdkMetadata:iW,CaptionedImage:n,Card:r,ClassicCard:o,ContentCards:Q,ControlCard:l,ControlMessage:N,DeviceProperties:tC,FeatureFlag:ea,Feed:et,FullScreenMessage:O,HtmlMessage:_,ImageOnly:s,InAppMessage:T,InAppMessageButton:I,ModalMessage:D,SlideUpMessage:B,User:c,WindowUtils:em,addSdkMetadata:iY,automaticallyShowInAppMessages:ih,changeUser:iZ,deferInAppMessage:ic,destroy:iQ,destroyFeed:au,disableSDK:i0,enableSDK:i1,getAllBanners:aM,getAllFeatureFlags:aS,getBanner:a_,getCachedContentCards:i_,getCachedFeed:al,getDeferredInAppMessage:id,getDeviceId:i3,getFeatureFlag:aE,getUser:t5,handleBrazeAction:t4,hideContentCards:iH,initialize:i5,insertBanner:az,isDisabled:i2,isInitialized:i4,isPushBlocked:ab,isPushPermissionGranted:ag,isPushSupported:af,logBannerImpressions:aD,logCardClick:iw,logCardDismissal:ix,logCardImpressions:iy,logContentCardClick:iE,logContentCardImpressions:iC,logCustomEvent:i8,logFeatureFlagImpression:aA,logFeedDisplayed:ah,logInAppMessageButtonClick:ia,logInAppMessageClick:tY,logInAppMessageHtmlClick:t6,logInAppMessageImpression:tW,logPurchase:i7,openSession:i6,refreshFeatureFlags:aC,removeAllSubscriptions:i9,removeSubscription:iD,requestBannersRefresh:aU,requestContentCardsRefresh:iT,requestFeedRefresh:ao,requestImmediateDataFlush:ae,requestPushPermission:av,setLogger:at,setSdkAuthenticationSignature:ai,showContentCards:iK,showFeed:ac,showInAppMessage:il,subscribeToBannersUpdates:aR,subscribeToContentCardsUpdates:iV,subscribeToFeatureFlagsUpdates:ak,subscribeToFeedUpdates:ad,subscribeToInAppMessage:iu,subscribeToSdkAuthenticationFailures:aa,toggleContentCards:iJ,toggleFeed:ap,toggleLogging:ar,unregisterPush:aw,wipeData:as})},[]]},[]]);
