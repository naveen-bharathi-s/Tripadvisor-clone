(this.$WP=this.$WP||[]).push(["cjerkd",(e,a)=>{var n,r,i,d,s,o,l,t,c,u,m,g,p,h,b,f,_,v,T,G,I,M,C,y,w,H,S,O,k,N,j,W,z,x,D,P,R,q,A,L,$,B,E,F,U,K,Z,J={iconWrapper:"rjSeK d q",iconWrapperSmall:"ADmrQ d q",iconWrapperMedium:"jOFMI d q _T",connectImg:"VNkBD",connectImgSmall:"uUSkJ",connectImgMedium:"jaoBo _T",icon:"nIvCR d Cj",iconSmall:"gqKUw d Cj",iconMedium:"yNpzT d _T Cj"},V=({onClick:e,size:a="large",fontSize:i="large",allBlack:d,...s})=>{var o=N(),l=L.includes(o),[t]=S(s);return n(P,{variant:"secondary",size:a,onClick:e,fullWidth:!0,...t,children:[r(k,{id:"memx_mw_gating_cta",messages:"Continue with:"})," ",n("div",{className:z({[J.iconWrapperSmall]:"small"===i},{[J.iconWrapperMedium]:"medium"===i},{[J.iconWrapper]:"large"===i}),children:[r(x,{src:d?"/img2/google/GoogleG/black.svg":"/img2/google/GoogleG/1color@3x.png",className:z({[J.connectImgSmall]:"small"===i},{[J.connectImgMedium]:"medium"===i},{[J.connectImg]:"large"===i})}),l&&r(x,{src:"/img2/line/line_color_20.png",className:z({[J.connectImgSmall]:"small"===i},{[J.connectImgMedium]:"medium"===i},{[J.connectImg]:"large"===i})}),r("div",{className:z({[J.iconSmall]:"small"===i},{[J.iconMedium]:"medium"===i},{[J.icon]:"large"===i}),children:r(D,{})})]})]})},Q=(e,a,n,r)=>{var i=encodeURIComponent(e),d=encodeURIComponent(e),s=void 0===r?"":`&c=${r}`;return`https://tripadvisor.onelink.me/dIWJ?af_dp=${i}&af_web_dp=${d}&af_sub1=${a}&af_sub2=true&af_sub3=${n}&pid=website${s}`},X=e=>{var a=R(),{onClick:d,mcid:s}=e,o=p(),l=q(),{path:t}=h(),[c]=S(e),u=i(()=>{a({module:"app_download",action:"app_download_click",context:o}),d&&d(o)},[d,a,o]),m=B(`https://${l}${t}`,s,o,"GatingExperiment");return n(P,{variant:"secondary",size:"large",fullWidth:!0,onClick:u,href:m,...c,children:[r(k,{id:"open_in_the_app",messages:"Open in the app"})," "]})},Y=({headline:e,subheadline:a,...i})=>n("div",{className:O(i),children:[r("div",{className:"sHvwv _T d",children:r(H,{})}),r(w,{variant:"expressive-display-02",marginTop:"spacing-04",children:e}),r(w,{variant:"body-01",marginTop:"spacing-02",children:a})]}),ee=({onShow:e,onContinueWith:a,onOpenInApp:i,mcid:d})=>{var{localize:s}=j(),o=C(e);return r(A,{children:n("div",{ref:o,children:[r(F,{headline:s.string("Log in or open in our app","hard_gate_hybrid_header"),subheadline:s.string("Read traveller reviews, plus save and compare your favourite picks.","hard_gate_subheader")}),r($,{size:"large",onClick:a,fontSize:"medium",marginTop:"spacing-04"}),r(E,{mcid:d,onClick:i,marginTop:"spacing-03"})]})})},ea=()=>{},en=({onShow:e,onDismiss:a,onAutoCancelled:i,onSuccessfulLogin:t,onGeneralSkipDismiss:c,onNotVisible:m,onOneTapHidden:p})=>{var{page:b}=h(),f=g(),{localize:_}=j(),v=C(e),[T,G]=d(null),[I,M]=d(!1),w=er(T),H=s(null);return o(()=>I?(clearTimeout(H.current),()=>{}):(H.current=setTimeout(()=>{!w&&m&&(T?m("hidden"):m("not_mounted"))},3e3),()=>{clearTimeout(H.current)}),[m,T,w,I]),o(()=>{w&&!I?M(!0):!w&&I&&p&&p()},[w,I,M,p]),n(y,{children:[r(l,{children:r(K,{onDismiss:()=>{a&&a(),u(f)},triggerNext:ea,onAutoCancelled:i||ea,enhancedGoogleOneTapGate:!0,servletName:b,suppressContextualMessage:!0,onSuccessfulLogin:t,onGeneralSkipDismiss:c,onIFrameShown:G})}),r("div",{ref:v,children:r(F,{headline:_.string("Log in to unlock your free membership","hard_gate_onetap_header"),subheadline:_.string("Read traveller reviews, plus save and compare your favourite picks.","hard_gate_subheader")})})]})},er=e=>{var[a,n]=d(!1);return o(()=>{if(e instanceof HTMLElement){var a=new IntersectionObserver(([e])=>n(e.isIntersecting));return a.observe(e),()=>{a.disconnect()}}return n(!1),()=>{}},[e]),a},ei=({onLogin:e})=>{var{login:a}=c(),s=g(),{page:o}=h(),{geoId:l,locationId:t}=f(),u=_(),{impressionKey:p}=v(),y=T(),w=G(),H=I(15e3,"MembershipHardGateBounce15s"),S=I(3e4,"MembershipHardGateBounce30s"),[O,k]=d(!m(s)),[N,j]=d(!1),W=i(()=>{H(),S()},[H,S]),z=C(W),x=i(()=>{a({flowOrigin:"login",pid:40620,flow:"CORE_COMBINED",isFullWidthMobile:!0,forceLogin:!0,closeX:!1,extraQueryParams:{funnelKey:p,page:o,geo_id:l,detail_id:t,is_dated:u}}).then(e=>{e&&y("MembershipHardGateHybrid",{userId:e.userId,newMember:!!e.hasCreatedMember,source:M(e.loginProvider)},"SuccessLogin",e.userId||void 0)}).finally(e)},[a,e,p,o,l,t,u,y]);return r("div",{ref:z,className:"MmTOI D t _U s l Za f Pk PY Px PK Gg",children:n("div",{className:"KjOWP _Z w f",children:[r("div",{className:"Mbtbi f",children:N&&O&&r(b,{onClick:()=>k(!1)})}),r("div",{className:"ZgpFj f _Z",children:O?r(Z,{onShow:()=>{y("MembershipHardGateGOT")},onDismiss:()=>{w("MembershipHardGateGOT","Close"),k(!1)},onAutoCancelled:()=>{w("MembershipHardGateGOT","Close","other"),k(!1)},onSuccessfulLogin:(a,n)=>{y("MembershipHardGateGOT",{userId:n,newMember:a,source:"google"},"SuccessLogin",n),e&&e()},onGeneralSkipDismiss:(e,a)=>{y("MembershipHardGateGOT",{googleOneTapActionType:e,googleOneTapReason:a},"Error")},onNotVisible:e=>{y("MembershipHardGateGOT",{googleOneTapActionType:"not_visible",googleOneTapReason:e},"Error"),k(!1)},onOneTapHidden:()=>{j(!0)}}):r(U,{onShow:()=>{y("MembershipHardGateHybrid")},onContinueWith:()=>{w("MembershipHardGateHybrid","CTA","click","continueWith"),x()},onOpenInApp:e=>{w("MembershipHardGateHybrid","CTA","click","openInTheApp",{downloadId:e})},mcid:65389})})]})})};return[()=>{L=W(["id-ID","ja-JP","zh-TW","th-TH"]),$=V,B=Q,E=X,F=Y,U=ee,K=t(()=>a("j3bsmh")),Z=en,e("default",ei)},[e=>(n=e.jsxs,r=e.jsx),e=>(i=e.useCallback,d=e.useState,s=e.useRef,o=e.useEffect,l=e.Suspense,t=e.lazy),e=>c=e.default,e=>(u=e.setRegDialogDismissed,m=e.shouldSuppressRegistrationDialog),e=>g=e.useSessionId,e=>(p=e.usePageviewUid,h=e.useRoute),e=>b=e.CloseButton,e=>(f=e.useRouteIds,_=e.useIsDated,v=e.useHardGateContext,T=e.useHardGateImpression,G=e.useHardGateInteraction,I=e.useBounceTracking,M=e.sourceFromLoginProvider),e=>C=e.useOnVisible,e=>y=e.ErrorBoundary,e=>w=e.default,e=>H=e.Logo,e=>(S=e.getMarginProps,O=e.margin),e=>(k=e.default,N=e.useLocale,j=e.useLocalize),e=>W=e.readOnly,e=>z=e.default,e=>x=e.CdnImage,e=>D=e.default,e=>P=e.default,e=>R=e.useGARecorder,e=>q=e.useDomainName,e=>A=e.AutoFocus]]},["21h32l","o4yt4q","rdycz1","cyrz7y","al4vil","fgwvq1","uzmmz7","igyuz7","3btuy0","83pm0d","essqvy","bzl252","gw8uw6","7thqz4","5vmpsm","fkji80","s6q22n","gjtatx","jppfwt","32pwc7","qlcuu5","2r4qug"]]);
